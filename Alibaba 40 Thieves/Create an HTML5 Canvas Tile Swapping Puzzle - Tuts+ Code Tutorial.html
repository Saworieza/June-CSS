<!DOCTYPE html>
<!-- saved from url=(0092)http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747 -->
<html data-ads="[{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_development&quot;,&quot;location&quot;:&quot;inarticle&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1392179526912-0&quot;},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_development&quot;,&quot;location&quot;:&quot;post_top&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1379650391729-0&quot;},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_development&quot;,&quot;location&quot;:&quot;post_mid&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1382314910331-0&quot;},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_development&quot;,&quot;location&quot;:&quot;post_comments&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1379650407131-0&quot;},{&quot;location&quot;:&quot;leader&quot;,&quot;unit_name&quot;:&quot;hub_development&quot;,&quot;slot_id&quot;:&quot;1391730982123-0&quot;,&quot;width&quot;:728,&quot;height&quot;:90,&quot;doubleclick_id&quot;:&quot;11757429&quot;}]" data-app-version="7055a5bef4ebb15d2f5cab53bef13971705e3b64-production" class=" js no-touch history"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/inpage_linkid.js" id="undefined"></script><script type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/webtrends.hm-647e048ae19ef93538840fde7badd7ef.js"></script><script type="text/javascript" async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/dc.js"></script><script async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/webtrends.min-738f9eacf942006e63b195a1bcb993b7.js"></script><script async="" type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/gpt.js"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-5.newrelic.com","errorBeacon":"jserror.newrelic.com","licenseKey":"27851e2035","applicationID":"3094824","transactionName":"JQpZTURXXlRcRBYWRBIKRVBXVEEXSl5WFQ==","queueTime":0,"applicationTime":378,"ttGuid":"","agentToken":null,"agent":"js-agent.newrelic.com/nr-411.min.js"}</script>
<script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgUFWFRbGwAAXVVaBQU="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){function n(t,e,n){n||(n={});for(var r=o[t],a=r&&r.length||0,s=n[i]||(n[i]={}),u=0;a>u;u++)r[u].apply(s,e);return s}function r(t,e){var n=o[t]||(o[t]=[]);n.push(e)}var o={},i="nr@context";e.exports={on:r,emit:n}},{}],2:[function(t){function e(t,e,n,i,s){return u?u-=1:r("err",[s||new UncaughtException(t,e,n)]),"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t(5),a=window.onerror,s=!1,u=0;t("loader").features.push("err"),window.onerror=e,NREUM.noticeError=n;try{throw new Error}catch(d){"stack"in d&&(t(1),t(2),"addEventListener"in window&&t(3),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&t(4),s=!0)}i.on("fn-start",function(){s&&(u+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&u>0&&(u-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:5,2:4,3:3,4:6,5:1,6:14,handle:"D5DuLP",loader:"G9z0Bl"}],3:[function(t){function e(t){r.inPlace(t,["addEventListener","removeEventListener"],"-",n)}function n(t){return t[1]}var r=t(1),o=(t(3),t(2));if(e(window),"getPrototypeOf"in Object){for(var i=document;i&&!i.hasOwnProperty("addEventListener");)i=Object.getPrototypeOf(i);i&&e(i);for(var a=XMLHttpRequest.prototype;a&&!a.hasOwnProperty("addEventListener");)a=Object.getPrototypeOf(a);a&&e(a)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&e(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e=t[1];"function"==typeof e?this.wrapped=e["nr@wrapped"]?t[1]=e["nr@wrapped"]:e["nr@wrapped"]=t[1]=r(e,"fn-"):"function"==typeof e.handleEvent&&r.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:15,2:1,3:14}],4:[function(t){var e=(t(3),t(1)),n=t(2);e.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=e(t[0],"fn-")})},{1:15,2:1,3:14}],5:[function(t){function e(t){var e=t[0];"string"==typeof e&&(e=new Function(e)),t[0]=n(e,"fn-")}var n=(t(3),t(1)),r=t(2);n.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",e)},{1:15,2:1,3:14}],6:[function(t){function e(){o.inPlace(this,s,"fn-")}function n(t,e){o.inPlace(e,["onreadystatechange"],"fn-")}function r(t,e){return e}var o=t(1),i=t(2),a=window.XMLHttpRequest,s=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];window.XMLHttpRequest=function(t){var n=new a(t);try{i.emit("new-xhr",[],n),o.inPlace(n,["addEventListener","removeEventListener"],"-",function(t,e){return e}),n.addEventListener("readystatechange",e,!1)}catch(r){try{i.emit("internal-error",r)}catch(s){}}return n},window.XMLHttpRequest.prototype=a.prototype,o.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",r),i.on("send-xhr-start",n),i.on("open-xhr-start",n)},{1:15,2:1}],7:[function(t){function e(){function e(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function n(t){var n=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;u>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!n.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){n.status=t.status;var a=t.responseType,d="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,f=e(d);if(f&&(r.rxSize=f),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;r.cbTime=this.cbTime,o("xhr",[n,r])}}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}t("loader").features.push("xhr");var o=t("handle"),i=t(1),a=t(5),s=["load","error","abort","timeout"],u=s.length,d=t(2);t(3),t(4),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=n,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,n){var r=this.metrics,o=t[0],i=this;if(r&&o){var d=e(o);d&&(r.txSize=d)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof n.onload))&&i.end(n)}catch(e){try{a.emit("internal-error",e)}catch(r){}}};for(var f=0;u>f;f++)n.addEventListener(s[f],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&e()},{1:8,2:11,3:3,4:6,5:1,handle:"D5DuLP",loader:"G9z0Bl"}],8:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("/")[0].split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e){var n=r[t];return n?n.apply(this,e):(o[t]||(o[t]=[]),void o[t].push(e))}var r={},o={};e.exports=n,n.queues=o,n.handlers=r},{}],11:[function(t,e){function n(t){if(!t||"object"!=typeof t&&"function"!=typeof t)return-1;if(t===window)return 0;if(o.call(t,"__nr"))return t.__nr;try{return Object.defineProperty(t,"__nr",{value:r,writable:!0,enumerable:!1}),r}catch(e){return t.__nr=r,r}finally{r+=1}}var r=1,o=Object.prototype.hasOwnProperty;e.exports=n},{}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&u&&u.body){p.proto="https"===c.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e=u.createElement("script");e.src=p.proto+t.agent,u.body.appendChild(e)}}function r(){"complete"===u.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=window,u=s.document,d="addEventListener",f="attachEvent",c=(""+location).split("?")[0],p=e.exports={offset:i(),origin:c,features:[]};u[d]?(u[d]("DOMContentLoaded",o,!1),s[d]("load",n,!1)):(u[f]("onreadystatechange",r),s[f]("onload",n)),a("mark",["firstbyte",i()])},{handle:"D5DuLP"}],14:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],15:[function(t,e){function n(t,e,r,s){function nrWrapper(){try{var n,a=u(arguments),d=this,f=r&&r(a,d)||{}}catch(c){i([c,"",[a,d,s],f])}o(e+"start",[a,d,s],f);try{return n=t.apply(d,a)}catch(p){throw o(e+"err",[a,d,p],f),p}finally{o(e+"end",[a,d,n],f)}}return a(t)?t:(e||(e=""),nrWrapper[n.flag]=!0,nrWrapper)}function r(t,e,r,o){r||(r="");var i,s,u,d="-"===r.charAt(0);for(u=0;u<e.length;u++)s=e[u],i=t[s],a(i)||(t[s]=n(i,d?s+r:r,o,s,t))}function o(t,e,n){try{s.emit(t,e,n)}catch(r){i([r,t,e,n])}}function i(t){try{s.emit("internal-error",t)}catch(e){}}function a(t){return!(t&&"function"==typeof t&&t.apply&&!t[n.flag])}var s=t(1),u=t(2);e.exports=n,n.inPlace=r,n.flag="nr@wrapper"},{1:1,2:14}]},{},["G9z0Bl",2,7]);</script><meta charset="utf-8"><title>Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial</title><link href="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial.html" rel="canonical"><link href="http://static.tutsplus.com/assets/favicon-3ef7b4f54ed4378b31ff3124d3c4bff8.png" rel="shortcut icon" type="image/png"><link href="http://static.tutsplus.com/assets/apple-touch-icon-3ef7b4f54ed4378b31ff3124d3c4bff8.png" rel="apple-touch-icon" type="image/png"><link href="http://static.tutsplus.com/assets/application-26483718fe08173530544e443bfe2c69.css" media="all" rel="stylesheet"><!--[if lte IE 8]><link href="http://static.tutsplus.com/assets/ie8-60cf0a9325a4cf96153342dac3a0c330.css" media="screen" rel="stylesheet" /><script src="http://static.tutsplus.com/assets/modernizr.custom-21d4ec93a3dac71842112f3e789ada34.js"></script><![endif]--><script src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/application-3c64581245c3979ab8aabb45cc921dc2.js"></script><link href="http://code.tutsplus.com/posts.atom" rel="alternate" title="Atom 1.0" type="application/atom+xml"><meta content="authenticity_token" name="csrf-param">
<meta content="BFJvIddPzsCboqNWyDf+GkaKgitJqyEK+Ak65g8+PEI=" name="csrf-token"><meta content="initial-scale=1" name="viewport"><meta content="index, follow" name="robots"><meta content="Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial" property="og:title"><meta content="Code Tuts+" property="og:site_name"><meta content="In this tutorial we will be working with the HTML5 canvas and Javascript to create a dynamic tile swapping game. The result will be a puzzle that works with any given image, and has flexible difficulty levels that are easily adjusted. | Difficulty: Beginner; Length: Medium; Tags: Games, HTML5, Flash" property="og:description"><meta content="article" property="og:type"><meta content="http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747" property="og:url"><meta content="https://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/html5_canvas_puzzle.png" property="og:image"><meta content="In this tutorial we will be working with the HTML5 canvas and Javascript to create a dynamic tile swapping game. The result will be a puzzle that works with any given image, and has flexible difficulty levels that are easily adjusted. | Difficulty: Beginner; Length: Medium; Tags: Games, HTML5, Flash" name="description"><meta content="http://static.tutsplus.com/assets/favicon-3ef7b4f54ed4378b31ff3124d3c4bff8.png" property="og:image"><link href="https://plus.google.com/108971748263060947124/posts" rel="publisher"><script src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/vwo_test_1-c92ac7721271ed44bb674c8bb703c94d.js"></script><script src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/vwo_static-62ce6522acbf5adfd200cd91f2b763cc.js"></script><script type="text/javascript" async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/embed.js"></script><script async="" type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/count.js"></script><style type="text/css"></style><script async="" type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/pubads_impl_39.js"></script><script type="text/javascript" async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/saved_resource"></script><script async="" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/count-data.js"></script><script type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/osd.js"></script></head><body class="page-body topic-code" data-ga-account="UA-11792865-37" data-wt-dcsid="dcs8a5oy83dv0hk3pdwcb7l96_3r7l"><div class="page-wrap"><div class="announcement-bar view announcement-bar--open view--loaded" data-announcement-id="tuts-plus-merged"><div class="announcement-bar__content"><div class="announcement-bar__primary"><div class="announcement-bar__title">Tuts+ and Tuts+ Premium have now merged into one site.</div><a class="announcement-bar__link" href="http://blog.tutsplus.com/post/85577815689/introducing-the-new-tuts" sl-processed="1">Read more →</a></div><div class="announcement-bar__secondary"><a class="announcement-bar__close-link" href="javascript:" title="Close this announcement bar" sl-processed="1"><i class="icon-remove-sign announcement-bar__close-icon"></i></a></div></div></div><!--[if lt IE 9]><div class="legacy-ie-banner"><h2 class="legacy-ie-banner__title">Unsupported browser</h2><p class="legacy-ie-banner__text">This site was designed for modern browsers and tested with Internet Explorer version 9 and later. </p><p class="legacy-ie-banner__text">It may not look or work correctly on your browser. </p></div><![endif]--><nav class="global-nav view view--loaded"><div class="global-nav__mobile"><section class="global-nav__mobile-search"><form accept-charset="UTF-8" action="http://code.tutsplus.com/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div><input class="global-nav__mobile-search-input" name="search[keywords]" placeholder="Search Tuts+" type="text"><button class="global-nav__mobile-search-button" name="button" type="submit"><i class="icon-search"></i></button></form></section><ul class="global-nav__mobile-top-level"><li class="global-nav__mobile-top-level-item global-nav__mobile-top-level-item--expanded"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://tutsplus.com/" sl-processed="1"><span class="global-nav__mobile-top-level-link-title">Tutorials</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747#" sl-processed="1"><span class="global-nav__mobile-top-level-expand-text"><i class="icon-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="icon-minus global-nav__mobile-top-level-link-icon"></i></span></a><ul class="global-nav__mobile-second-level"><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://design.tutsplus.com/" sl-processed="1">Design &amp; Illustration</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://code.tutsplus.com/" sl-processed="1">Code</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://webdesign.tutsplus.com/" sl-processed="1">Web Design</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://music.tutsplus.com/" sl-processed="1">Music &amp; Audio</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://photography.tutsplus.com/" sl-processed="1">Photography</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://cgi.tutsplus.com/" sl-processed="1">3D &amp; Motion Graphics</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/" sl-processed="1">Game Development</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-computers" href="http://computers.tutsplus.com/" sl-processed="1">Computer Skills</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-crafts" href="http://crafts.tutsplus.com/" sl-processed="1">Crafts &amp; DIY</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-business" href="http://business.tutsplus.com/" sl-processed="1">Business</a></li></ul></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://courses.tutsplus.com/" sl-processed="1"><span class="global-nav__mobile-top-level-link-title">Courses</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747#" sl-processed="1"><span class="global-nav__mobile-top-level-expand-text"><i class="icon-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="icon-minus global-nav__mobile-top-level-link-icon"></i></span></a><div class="global-nav__mobile-second-level"><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-all-topics-link" href="http://courses.tutsplus.com/courses" sl-processed="1">All Topics</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://courses.tutsplus.com/topics/design/courses" sl-processed="1">Design &amp; Illustration</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://courses.tutsplus.com/topics/code/courses" sl-processed="1">Code</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://courses.tutsplus.com/topics/webdesign/courses" sl-processed="1">Web Design</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://courses.tutsplus.com/topics/music/courses" sl-processed="1">Music &amp; Audio</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://courses.tutsplus.com/topics/photography/courses" sl-processed="1">Photography</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://courses.tutsplus.com/topics/cgi/courses" sl-processed="1">3D &amp; Motion Graphics</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-business" href="http://courses.tutsplus.com/topics/business/courses" sl-processed="1">Business</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-bundles-link" href="http://courses.tutsplus.com/bundles" sl-processed="1"><span class="translation_missing" title="translation missing: en.views.courses.courses_menu.bundles">Bundles</span></a></div></div></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://ebooks.tutsplus.com/" sl-processed="1"><span class="global-nav__mobile-top-level-link-title">eBooks</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747#" sl-processed="1"><span class="global-nav__mobile-top-level-expand-text"><i class="icon-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="icon-minus global-nav__mobile-top-level-link-icon"></i></span></a><div class="global-nav__mobile-second-level"><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://ebooks.tutsplus.com/topics/design/ebooks" sl-processed="1">Design &amp; Illustration</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://ebooks.tutsplus.com/topics/code/ebooks" sl-processed="1">Code</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://ebooks.tutsplus.com/topics/webdesign/ebooks" sl-processed="1">Web Design</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://ebooks.tutsplus.com/topics/music/ebooks" sl-processed="1">Music &amp; Audio</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://ebooks.tutsplus.com/topics/photography/ebooks" sl-processed="1">Photography</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://ebooks.tutsplus.com/topics/cgi/ebooks" sl-processed="1">3D &amp; Motion Graphics</a></div></div></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link" href="https://jobs.tutsplus.com/" sl-processed="1">Jobs</a></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link" href="http://blog.tutsplus.com/" sl-processed="1">Blog</a></li></ul><div class="global-nav__mobile-user-links"><a class="global-nav__mobile-user-link" href="https://code.tutsplus.com/sign_up" sl-processed="1">Create an Account</a><a class="global-nav__mobile-user-link" href="https://code.tutsplus.com/sign_in" sl-processed="1">Sign In</a></div></div><div class="global-nav__header"><div class="global-nav__header-content"><a class="global-nav__header-tuts-logo-link" href="http://tutsplus.com/" sl-processed="1"><img alt="tuts+" class="global-nav__header-tuts-logo-image" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/tuts_logo-79176000c077f4191a2cfcc3b312b7ed.svg"></a><div class="global-nav__header-left"><ul class="global-nav__header-list"><li class="global-nav__header-item"><nav class="topics-menu view view--loaded" data-toggle=".topics-menu__dropdown-toggle"><a class="topics-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary global-nav__header-link--active" href="http://tutorials.tutsplus.com/" sl-processed="1">Tutorials<i class="icon-chevron-down"></i></a><ul class="topics-menu__topics"><li class="topics-menu__topic topic-design" data-slug="design"><a class="topics-menu__topic-link topic-design" href="http://design.tutsplus.com/" sl-processed="1">Design &amp; Illustration<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-design"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-design" href="http://design.tutsplus.com/" sl-processed="1">Design &amp; Illustration</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/vector" sl-processed="1">Vector</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/photoshop" sl-processed="1">Photoshop</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/illustration" sl-processed="1">Illustration</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/photo-effects" sl-processed="1">Photo Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/drawing" sl-processed="1">Drawing</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/text-effects" sl-processed="1">Text Effects</a></li></ul><a class="topics-menu__more-categories-link topic-design" href="http://design.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-design"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-design" href="http://design.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-code" data-slug="code"><a class="topics-menu__topic-link topic-code" href="http://code.tutsplus.com/" sl-processed="1">Code<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-code"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-code" href="http://code.tutsplus.com/" sl-processed="1">Code</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/web-dev" sl-processed="1">Web Dev</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/html-css" sl-processed="1">HTML &amp; CSS</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/wordpress" sl-processed="1">WordPress</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/php" sl-processed="1">PHP</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/javascript-ajax" sl-processed="1">JavaScript &amp; AJAX</a></li></ul><a class="topics-menu__more-categories-link topic-code" href="http://code.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-code"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-code" href="http://code.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-webdesign" data-slug="webdesign"><a class="topics-menu__topic-link topic-webdesign" href="http://webdesign.tutsplus.com/" sl-processed="1">Web Design<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-webdesign"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-webdesign" href="http://webdesign.tutsplus.com/" sl-processed="1">Web Design</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/complete-websites" sl-processed="1">Complete Websites</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/design-theory" sl-processed="1">Design Theory</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/htmlcss" sl-processed="1">HTML/CSS</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/typography" sl-processed="1">Typography</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/ux" sl-processed="1">UX</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/applications-and-tools" sl-processed="1">Applications and Tools</a></li></ul><a class="topics-menu__more-categories-link topic-webdesign" href="http://webdesign.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-webdesign"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-webdesign" href="http://webdesign.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-music" data-slug="music"><a class="topics-menu__topic-link topic-music" href="http://music.tutsplus.com/" sl-processed="1">Music &amp; Audio<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-music"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-music" href="http://music.tutsplus.com/" sl-processed="1">Music &amp; Audio</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/audio-production" sl-processed="1">Audio Production</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/mixing-mastering" sl-processed="1">Mixing &amp; Mastering</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/sound-design" sl-processed="1">Sound Design</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/composition" sl-processed="1">Composition</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/recording" sl-processed="1">Recording</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/buyers-guides" sl-processed="1">Buyers Guides</a></li></ul><a class="topics-menu__more-categories-link topic-music" href="http://music.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-music"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-music" href="http://music.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-photography" data-slug="photography"><a class="topics-menu__topic-link topic-photography" href="http://photography.tutsplus.com/" sl-processed="1">Photography<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-photography"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-photography" href="http://photography.tutsplus.com/" sl-processed="1">Photography</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/shooting" sl-processed="1">Shooting</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/hardware" sl-processed="1">Hardware</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/post-processing" sl-processed="1">Post-Processing</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/inspiration" sl-processed="1">Inspiration</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/lighting" sl-processed="1">Lighting</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/theory" sl-processed="1">Theory</a></li></ul><a class="topics-menu__more-categories-link topic-photography" href="http://photography.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-photography"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-photography" href="http://photography.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-cgi" data-slug="cgi"><a class="topics-menu__topic-link topic-cgi" href="http://cgi.tutsplus.com/" sl-processed="1">3D &amp; Motion Graphics<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-cgi"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-cgi" href="http://cgi.tutsplus.com/" sl-processed="1">3D &amp; Motion Graphics</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/after-effects" sl-processed="1">After Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/visual-effects" sl-processed="1">Visual Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/motion-graphics" sl-processed="1">Motion Graphics</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/cinema-4d" sl-processed="1">Cinema 4D</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/3d" sl-processed="1">3D</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/workflow" sl-processed="1">Workflow</a></li></ul><a class="topics-menu__more-categories-link topic-cgi" href="http://cgi.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-cgi"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-cgi" href="http://cgi.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-gamedevelopment" data-slug="gamedevelopment"><a class="topics-menu__topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/" sl-processed="1">Game Development<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-gamedevelopment"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/" sl-processed="1">Game Development</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/implementation" sl-processed="1">Implementation</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/business" sl-processed="1">Business</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/game-design" sl-processed="1">Game Design</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/from-scratch" sl-processed="1">From Scratch</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/how-to-learn" sl-processed="1">How to Learn</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/roundups" sl-processed="1">Roundups</a></li></ul><a class="topics-menu__more-categories-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-gamedevelopment"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-computers" data-slug="computers"><a class="topics-menu__topic-link topic-computers" href="http://computers.tutsplus.com/" sl-processed="1">Computer Skills<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-computers"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-computers" href="http://computers.tutsplus.com/" sl-processed="1">Computer Skills</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/os-x" sl-processed="1">OS X</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/app-training" sl-processed="1">App Training</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/productivity" sl-processed="1">Productivity</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/hardware" sl-processed="1">Hardware</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/tips-shortcuts" sl-processed="1">Tips &amp; Shortcuts</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/security" sl-processed="1">Security</a></li></ul><a class="topics-menu__more-categories-link topic-computers" href="http://computers.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-computers"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-computers" href="http://computers.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-crafts" data-slug="crafts"><a class="topics-menu__topic-link topic-crafts" href="http://crafts.tutsplus.com/" sl-processed="1">Crafts &amp; DIY<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-crafts"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-crafts" href="http://crafts.tutsplus.com/" sl-processed="1">Crafts &amp; DIY</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/jewellery" sl-processed="1">Jewellery</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/crochet" sl-processed="1">Crochet</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/paper-crafts" sl-processed="1">Paper Crafts</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/homewares" sl-processed="1">Homewares</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/decorations" sl-processed="1">Decorations</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-crafts hello" href="http://crafts.tutsplus.com/categories/sewing" sl-processed="1">Sewing</a></li></ul><a class="topics-menu__more-categories-link topic-crafts" href="http://crafts.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-crafts"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-crafts" href="http://crafts.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li><li class="topics-menu__topic topic-business" data-slug="business"><a class="topics-menu__topic-link topic-business" href="http://business.tutsplus.com/" sl-processed="1">Business<i class="icon-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-business"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-business" href="http://business.tutsplus.com/" sl-processed="1">Business</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/business-finance" sl-processed="1">Business &amp; Finance</a></li></ul><a class="topics-menu__more-categories-link topic-business" href="http://business.tutsplus.com/categories" sl-processed="1">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-business"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-business" href="http://business.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div></li></ul></nav></li><li class="global-nav__header-item"><nav class="courses-menu view" data-toggle=".courses-menu__dropdown-toggle"><a class="courses-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary " href="http://courses.tutsplus.com/" sl-processed="1">Courses<i class="icon-chevron-down"></i></a><ul class="courses-menu__topics"><a class="courses-menu__topic-link courses-menu__all-topics-link" href="http://courses.tutsplus.com/courses" sl-processed="1">All Topics</a><li class="courses-menu__topic topic-design" data-slug="design"><a class="courses-menu__topic-link topic-design" href="http://courses.tutsplus.com/topics/design/courses" sl-processed="1">Design &amp; Illustration</a></li><li class="courses-menu__topic topic-code" data-slug="code"><a class="courses-menu__topic-link topic-code" href="http://courses.tutsplus.com/topics/code/courses" sl-processed="1">Code</a></li><li class="courses-menu__topic topic-webdesign" data-slug="webdesign"><a class="courses-menu__topic-link topic-webdesign" href="http://courses.tutsplus.com/topics/webdesign/courses" sl-processed="1">Web Design</a></li><li class="courses-menu__topic topic-music" data-slug="music"><a class="courses-menu__topic-link topic-music" href="http://courses.tutsplus.com/topics/music/courses" sl-processed="1">Music &amp; Audio</a></li><li class="courses-menu__topic topic-photography" data-slug="photography"><a class="courses-menu__topic-link topic-photography" href="http://courses.tutsplus.com/topics/photography/courses" sl-processed="1">Photography</a></li><li class="courses-menu__topic topic-cgi" data-slug="cgi"><a class="courses-menu__topic-link topic-cgi" href="http://courses.tutsplus.com/topics/cgi/courses" sl-processed="1">3D &amp; Motion Graphics</a></li><li class="courses-menu__topic topic-business" data-slug="business"><a class="courses-menu__topic-link topic-business" href="http://courses.tutsplus.com/topics/business/courses" sl-processed="1">Business</a></li><a class="courses-menu__topic-link courses-menu__bundles-link" href="http://courses.tutsplus.com/bundles" sl-processed="1"><span class="translation_missing" title="translation missing: en.views.courses.courses_menu.bundles">Bundles</span></a></ul></nav></li><li class="global-nav__header-item"><nav class="ebooks-menu view" data-toggle=".ebooks-menu__dropdown-toggle"><a class="ebooks-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary " href="http://ebooks.tutsplus.com/" sl-processed="1">eBooks<i class="icon-chevron-down"></i></a><ul class="ebooks-menu__topics"><li class="ebooks-menu__topic topic-design" data-slug="design"><a class="ebooks-menu__topic-link topic-design" href="http://ebooks.tutsplus.com/topics/design/ebooks" sl-processed="1">Design &amp; Illustration</a></li><li class="ebooks-menu__topic topic-code" data-slug="code"><a class="ebooks-menu__topic-link topic-code" href="http://ebooks.tutsplus.com/topics/code/ebooks" sl-processed="1">Code</a></li><li class="ebooks-menu__topic topic-webdesign" data-slug="webdesign"><a class="ebooks-menu__topic-link topic-webdesign" href="http://ebooks.tutsplus.com/topics/webdesign/ebooks" sl-processed="1">Web Design</a></li><li class="ebooks-menu__topic topic-music" data-slug="music"><a class="ebooks-menu__topic-link topic-music" href="http://ebooks.tutsplus.com/topics/music/ebooks" sl-processed="1">Music &amp; Audio</a></li><li class="ebooks-menu__topic topic-photography" data-slug="photography"><a class="ebooks-menu__topic-link topic-photography" href="http://ebooks.tutsplus.com/topics/photography/ebooks" sl-processed="1">Photography</a></li><li class="ebooks-menu__topic topic-cgi" data-slug="cgi"><a class="ebooks-menu__topic-link topic-cgi" href="http://ebooks.tutsplus.com/topics/cgi/ebooks" sl-processed="1">3D &amp; Motion Graphics</a></li></ul></nav></li><li class="global-nav__header-item"><a class="global-nav__header-link" href="https://jobs.tutsplus.com/" sl-processed="1">Jobs</a></li><li class="global-nav__header-item"><a class="global-nav__header-link " href="http://blog.tutsplus.com/" sl-processed="1">Blog</a></li></ul></div></div><div class="global-nav__header-right"><div class="global-nav__user-links"><a class="global-nav__header-link" href="https://code.tutsplus.com/sign_up" sl-processed="1">Create an Account</a><div class="global-nav__user-links-separator"> or </div><a class="global-nav__header-link" href="https://code.tutsplus.com/sign_in" sl-processed="1">Sign In</a></div></div></div><div class="global-nav__mobile-toggle"><a class="global-nav__mobile-toggle-link" href="javascript:" sl-processed="1"><i class="icon-reorder"></i></a></div></nav><div class="ad view ad--leaderboard"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1391730982123-0" style="width: 728px; height: 90px;"><div id="google_ads_iframe_/11757429/hub_development_leader_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_development_leader_0" name="google_ads_iframe_/11757429/hub_development_leader_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div><div class="page-content" style="height: auto;"><main class="content"><div class="topic-header"><div class="topic-header__navigation"><div class="topic-header__topic"><a class="topic-header__topic-link topic-link topic-code" href="http://code.tutsplus.com/" sl-processed="1">Code</a></div><ul class="topic-header__nav-links"><li class="topic-header__nav-link topic-header__nav-link--dropdown"><div class="dropdown-menu view topic-header__nav-link-categories view--loaded" data-toggle=".dropdown-menu__toggle"><a class="dropdown-menu__toggle" href="http://code.tutsplus.com/categories" sl-processed="1"><span class="dropdown-menu__title">Categories</span> <i class="icon-chevron-down"></i></a><ul class="dropdown-menu__items"><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/web-development" sl-processed="1">Web Development</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/flash" sl-processed="1">Flash</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/mobile-development" sl-processed="1">Mobile Development</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/wordpress" sl-processed="1">WordPress</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/php" sl-processed="1">PHP</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/news" sl-processed="1">News</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/javascript-ajax" sl-processed="1">JavaScript &amp; AJAX</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/javascript" sl-processed="1">Javascript</a></li><li class="dropdown-menu__item"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories/ios-sdk" sl-processed="1">iOS SDK</a></li><li class="dropdown-menu__item dropdown-menu__more"><a class="dropdown-menu__item-link topic-code" href="http://code.tutsplus.com/categories" sl-processed="1">More…</a></li></ul></div></li><li class="topic-header__nav-link topic-header__nav-link--direct"><a href="http://code.tutsplus.com/categories" sl-processed="1">Categories</a></li><li class="topic-header__nav-link"><a href="http://code.tutsplus.com/series" sl-processed="1">Series</a></li></ul></div><div class="topic-header__secondary"><div class="topic-header__search"><form accept-charset="UTF-8" action="http://code.tutsplus.com/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div><input class="posts-switcher--field" id="view" name="view" type="hidden"><input class="topic-header__search-input" name="search[keywords]" placeholder="Search tutorials and articles..." type="text"><button class="topic-header__search-button" name="button" type="submit"><div class="icon icon-search topic-header__search-icon"></div></button></form></div></div></div><article class="post tutorial"><div class="post-title-and-body view view--loaded"><div class="post-title-and-body__title-and-meta"><div class="post-title-and-body__primary-category"><a class="post-title-and-body__primary-category-link" href="http://code.tutsplus.com/categories/games" sl-processed="1">Games</a></div><h1 class="post-title-and-body__title">Create an HTML5 Canvas Tile Swapping Puzzle</h1><div class="post-title-and-body__publication-meta"><span class="post-title-and-body__author-by">by </span><span class="post-title-and-body__author"><a class="post-title-and-body__author-link" href="http://tutsplus.com/authors/brad-manderscheid" rel="author" sl-processed="1">Brad Manderscheid</a></span><time class="post-title-and-body__publication-date" datetime="2012-01-31T07:00:39Z" title="31 Jan 2012">31 Jan 2012</time><span class="post-title-and-body__comment-count"><i class="icon tutsicon-comment post-title-and-body__comment-icon"></i><a class="post-title-and-body__comment-count-link" data-disqus-identifier="10747 http://active.tutsplus.com/?p=10747" href="http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747#disqus_thread" sl-processed="1">23 Comments</a></span></div><div class="post-title-and-body__translation-dropdown-container"></div></div><div class="post-title-and-body__social-share-links sticky-block--floating"><div class="post-title-and-body__social-share-links-content"><ul class="social-share-links"><li class="social-share-link-item"><a class="social-share-link social-share-link--twitter" href="https://twitter.com/intent/tweet?text=Create%20an%20HTML5%20Canvas%20Tile%20Swapping%20Puzzle%20%E2%80%94%20Tuts+&url=http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747&via=tutsplus" sl-processed="1"><i class="icon-twitter"></i></a></li><li class="social-share-link-item"><a class="social-share-link social-share-link--facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747" sl-processed="1"><i class="icon-facebook-sign"></i></a></li><li class="social-share-link-item"><a class="social-share-link social-share-link--google-plus" href="https://plus.google.com/share?url=http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747" rel="publisher" sl-processed="1"><i class="icon-google-plus"></i></a></li><li class="social-share-link-item"><a class="social-share-link social-share-link--pinterest" href="https://www.pinterest.com/pin/create/button/?url=http://code.tutsplus.com/tutorials/create-an-html5-canvas-tile-swapping-puzzle--active-10747&description=Create%20an%20HTML5%20Canvas%20Tile%20Swapping%20Puzzle%20%E2%80%94%20Tuts+&media=http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/html5_canvas_puzzle.jpg" sl-processed="1"><i class="icon-pinterest"></i></a></li></ul></div></div><div class="post-title-and-body__body"><div class="post-title-and-body__content"><p>In this tutorial we will be working with the HTML5 canvas and Javascript to create a dynamic tile swapping game. The result will be a puzzle that works with any given image, and has flexible difficulty levels that are easily adjusted. </p>
<p><!--more--></p>
<hr>
<h2>The Complete HTML5 Canvas Puzzle</h2>
<p>Here is a quick shot of the puzzle we will be building:</p>
<div class="tutorial_image"><a href="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle.html" data-original-url="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle.html" sl-processed="1"><img src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/html5_canvas_puzzle.jpg" data-original-url="http://activetuts.s3.amazonaws.com/tuts/403_html5TileSwapPuzzle/html5_canvas_puzzle.jpg" alt="Final HTML5 Puzzle"></a><br>
<br>Click to play</div>
<p>A couple of notes:</p>
<ul>
<li><strong>Cross-browser compatibility:</strong> This puzzle was tested and works in all versions of Safari, Firefox, and Chrome that support the <code>canvas</code> element.</li>
<li><strong>Mobile:</strong> The code provide here works in the above-mentioned desktop browser and is not optimised for mobile. The puzzle will load and render just fine, but because of the touch and drag behaviors in mobile browsers, optimization is required for it to function correctly.  Optimizing this puzzle for mobile will be covered in a future tutorial. </li>
<li><strong>Adjustable Difficulty:</strong> The code contains a constant, <code>PUZZLE_DIFFICULTY</code>, that determines the number of pieces. In the demo above, this is set to <code>4</code>, giving a 4x4 puzzle. We can easily change this - for example, <a href="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle_hard.html" data-original-url="http://activetuts.s3.amazonaws.com/tuts/403_html5TileSwapPuzzle/demo/puzzle_hard.html" sl-processed="1">this version</a> has a <code>PUZZLE_DIFFICULTY</code> of <code>10</code>.
</li></ul>
<hr>
<h2>Getting Started</h2>
<p>To get started, create a directory for the project.  Place an image in the directory that you want to use as your puzzle.  Any web friendly image will do, and it can be any size your heart desires - just make sure it fits within the fold of your browser's window.</p>
<hr>
<h2><span>Step 1:</span> Creating the HTML Template</h2>
<p>Open a new file using your favorite text editor and save it inside your project directory, next to your image. Next, fill out this basic <code>HTML</code> template.</p>
<div><div id="highlighter_87518" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html plain">&lt;!</code><code class="html keyword">DOCTYPE</code> <code class="html plain">html&gt;</code></div><div class="line number2 index1 alt1"><code class="html plain">&lt;</code><code class="html keyword">html</code><code class="html plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="html plain">&lt;</code><code class="html keyword">head</code><code class="html plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">title</code><code class="html plain">&gt;HTML5 Puzzle&lt;/</code><code class="html keyword">title</code><code class="html plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">script</code><code class="html plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;/</code><code class="html keyword">script</code><code class="html plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="html plain">&lt;/</code><code class="html keyword">head</code><code class="html plain">&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="html plain">&lt;</code><code class="html keyword">body</code> <code class="html color1">onload</code><code class="html plain">=</code><code class="html string">"init();"</code><code class="html plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">canvas</code> <code class="html color1">id</code><code class="html plain">=</code><code class="html string">"canvas"</code><code class="html plain">&gt;&lt;/</code><code class="html keyword">canvas</code><code class="html plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="html plain">&lt;/</code><code class="html keyword">body</code><code class="html plain">&gt;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="html plain">&lt;/</code><code class="html keyword">html</code><code class="html plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>All we need to do here is create a standard <code>HTML5</code> template containing one <code>canvas</code> tag with the <code>id</code> of “canvas”.  We’ll write an <code>onload</code> listener in the <code>body</code> tag which will call our <code>init()</code> function when fired.</p>
<p>Now start by placing your cursor inside the <code>script</code> tag.  From here on out it's <strong>all javascript.</strong> With the exception of the initial variables, I'll be organising the sections by function.  First showing you the code and then explaining the logic.</p>
<p>Ready?  Let's get right to it!</p>
<hr>
<h2><span>Step 2:</span> Setting Up Our Variables</h2>
<p>Let’s set up our variables and take a look at each one.</p>
<div><div id="highlighter_59269" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">const PUZZLE_DIFFICULTY = 4;</code></div><div class="line number2 index1 alt1"><code class="javascript plain">const PUZZLE_HOVER_TINT = </code><code class="javascript string">'#009900'</code><code class="javascript plain">;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_canvas;</code></div><div class="line number5 index4 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">_stage;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">_img;</code></div><div class="line number8 index7 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_pieces;</code></div><div class="line number9 index8 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">_puzzleWidth;</code></div><div class="line number10 index9 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_puzzleHeight;</code></div><div class="line number11 index10 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">_pieceWidth;</code></div><div class="line number12 index11 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_pieceHeight;</code></div><div class="line number13 index12 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">_currentPiece;</code></div><div class="line number14 index13 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_currentDropPiece;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">_mouse;</code></div></div></td></tr></tbody></table></div></div>
<p>First we have a couple of constants: <code>PUZZLE_DIFFICULTY</code> and <code>PUZZLE_HOVER_TINT</code>.  The <code>PUZZLE_DIFFICULTY</code> constant holds the number of pieces in our puzzle.  In this application, the rows and columns always match, so by setting <code>PUZZLE_DIFFICULTY</code> to <code>4</code>, we get 16 puzzle pieces in total.  Increasing this increases the difficulty of the puzzle.</p>
<p>Next is a series of variables:</p>
<ul>
<li><code>_canvas</code> and <code>_stage</code> will hold a reference to the canvas and to its drawing context, respectively.  We do this so we don’t have to write out the entire query each time we use them.  And we’ll be using them a lot!</li>
<li><code>_img</code> will be a reference to the loaded image, which we will be copying pixels from throughout the application.</li>
<li><code>_puzzleWidth</code>, <code>_puzzleHeight</code>, <code>_pieceWidth</code>, and <code>_pieceHeight</code> will be used to store the dimensions of both the entire puzzle and each individual puzzle piece.  We set these once to prevent calculating them over and over again each time we need them.</li>
<li><code>_currentPiece</code> holds a reference to the piece currently being dragged.</li>
<li><code>_currentDropPiece</code> holds a reference to the piece currently in position to be dropped on. (In the demo, this piece is highlighted green.)</li>
<li><code>_mouse</code> is a reference that will hold the mouse's current <code>x</code> and <code>y</code> position.  This gets updated when the puzzle is clicked to determine which piece is touched, and when a piece is being dragged to determine what piece it's hovering over.</li>
</ul>
<p>Now, on to our functions.</p>
<hr>
<h2><span>Step 3:</span> The <code>init()</code> Function</h2>
<div><div id="highlighter_976246" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">init(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_img = </code><code class="javascript keyword">new</code> <code class="javascript plain">Image();</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_img.addEventListener(</code><code class="javascript string">'load'</code><code class="javascript plain">,onImage,</code><code class="javascript keyword">false</code><code class="javascript plain">);</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_img.src = </code><code class="javascript string">"mke.jpg"</code><code class="javascript plain">;</code></div><div class="line number5 index4 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The first thing we want to do in our application is to load the image for the puzzle.  The image object is first instantiated and set to our <code>_img</code> variable.  Next, we listen for the <code>load</code> event which will then fire our <code>onImage()</code> function when the image has finished loading.  Lastly we set the source of the image, which triggers the load.</p>
<hr>
<h2><span>Step 4:</span> The <code>onImage()</code> Function</h2>
<div><div id="highlighter_887779" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">onImage(e){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieceWidth = Math.floor(_img.width / PUZZLE_DIFFICULTY)</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieceHeight = Math.floor(_img.height / PUZZLE_DIFFICULTY)</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_puzzleWidth = _pieceWidth * PUZZLE_DIFFICULTY;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_puzzleHeight = _pieceHeight * PUZZLE_DIFFICULTY;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">setCanvas();</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">initPuzzle();</code></div><div class="line number8 index7 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Now that the image is successfully loaded, we can set the majority of the variables declared earlier.  We do this here because we now have information about the image and can set our values appropriately.</p>
<p>The first thing we do is calculate the size of each puzzle piece.  We do this by dividing the <code>PUZZLE_DIFFICULTY</code> value by the width and height of the loaded image.  We also trim the fat off of the edges to give us some nice even numbers to work with and  assure that each piece can appropriately swap ‘slots’ with others.  </p>
<p>Next we use our new puzzle piece values to determine the total size of the puzzle and set these values to <code>_puzzleWidth</code> and <code>_puzzleHeight</code>.</p>
<p>Lastly, we call off a few functions - <code>setCanvas()</code> and <code>initPuzzle()</code>. </p>
<hr>
<h2><span>Step 5:</span> The <code>setCanvas()</code> Function</h2>
<div><div id="highlighter_522756" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">setCanvas(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_canvas = document.getElementById(</code><code class="javascript string">'canvas'</code><code class="javascript plain">);</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage = _canvas.getContext(</code><code class="javascript string">'2d'</code><code class="javascript plain">);</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_canvas.width = _puzzleWidth;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_canvas.height = _puzzleHeight;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_canvas.style.border = </code><code class="javascript string">"1px solid black"</code><code class="javascript plain">;</code></div><div class="line number7 index6 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Now that our puzzle values are complete, we want to set up our <code>canvas</code> element.  First we set our <code>_canvas</code> variable to reference our <code>canvas</code> element, and <code>_stage</code> to reference its <code>context</code>.</p>
<p>Now we set the <code>width</code> and <code>height</code> of our <code>canvas</code> to match the size of our trimmed image,  followed by applying some simple styles to create a black border around our <code>canvas</code> to display the bounds of our puzzle.</p>
<hr>
<h2><span>Step 6:</span> The <code>initPuzzle()</code> Function</h2>
<div><div id="highlighter_473895" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">initPuzzle(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieces = [];</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse = {x:0,y:0};</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentPiece = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, 0, 0, _puzzleWidth, _puzzleHeight, 0, 0, _puzzleWidth, _puzzleHeight);</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">createTitle(</code><code class="javascript string">"Click to Start Puzzle"</code><code class="javascript plain">);</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">buildPieces();</code></div><div class="line number9 index8 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Here we initialize the puzzle.  We set this function up in such a way that we can call it again later when we want to replay the puzzle.  Anything else that needed to be set prior to playing will not need to be set again.</p>
<p>First we set <code>_pieces</code> as an empty <code>array</code> and create the <code>_mouse</code> object, which will hold our mouse position throughout the application.  Next we set the <code>_currentPiece</code> and <code>_currentPieceDrop</code> to <code>null</code>.  (On the first play these values would already be <code>null</code>, but we want to make sure they get reset when replaying the puzzle.)   </p>
<p>Finally, it’s time to draw! First we draw the entire image to display to the player what they will be creating.  After that we create some simple instructions by calling our <code>createTitle()</code> function.</p>
<hr>
<h2><span>Step 7:</span> The <code>createTitle()</code> Function</h2>
<div><div id="highlighter_578143" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">createTitle(msg){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillStyle = </code><code class="javascript string">"#000000"</code><code class="javascript plain">;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = .4;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillRect(100,_puzzleHeight - 40,_puzzleWidth - 200,40);</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillStyle = </code><code class="javascript string">"#FFFFFF"</code><code class="javascript plain">;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = 1;</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.textAlign = </code><code class="javascript string">"center"</code><code class="javascript plain">;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.textBaseline = </code><code class="javascript string">"middle"</code><code class="javascript plain">;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.font = </code><code class="javascript string">"20px Arial"</code><code class="javascript plain">;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillText(msg,_puzzleWidth / 2,_puzzleHeight - 20);</code></div><div class="line number11 index10 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Here we create a fairly simple message that instructs the user to click the puzzle to begin.<br>
Our message will be a semi-transparent rectangle that will serve as the background of our text.  This allows the user to see the image behind it and also assures our white text will be legible on any image</p>
<p>We simply set <code>fillStyle</code> to black and <code>globalAlpha</code> to <code>.4</code>, before filling in a short black rectangle at the bottom of the image.</p>
<p>Since <code>globalAlpha</code> affects the entire canvas, we need to set it back to <code>1</code> (opaque) before drawing the text.  To set up our title, we set the <code>textAlign</code> to 'center' and the <code>textBaseline</code> to <code>'middle'</code>. We can also apply some <code>font</code> properties.</p>
<p>To draw the text, we use the <code>fillText()</code> method. We pass in the <code>msg</code> variable and place it at the horizontal center of the <code>canvas</code>, and the vertical center of the rectangle.</p>
<hr>
<h2><span>Step 8:</span> The <code>buildPieces()</code> Function</h2>
<div><div id="highlighter_489085" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">buildPieces(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">xPos = 0;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">yPos = 0;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; PUZZLE_DIFFICULTY * PUZZLE_DIFFICULTY;i++){</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = {};</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.sx = xPos;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.sy = yPos;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieces.push(piece);</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos += _pieceWidth;</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(xPos &gt;= _puzzleWidth){</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos = 0;</code></div><div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">yPos += _pieceHeight;</code></div><div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousedown = shufflePuzzle;</code></div><div class="line number18 index17 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Finally it's time to build the puzzle!</p>
<p>We do this by building an <code>object</code> for each piece.  These objects will not be responsible for rendering to the canvas, but rather to merely hold references on what to draw and where. That being said, let’s get to it.</p>
<p>First off, let’s declare a few variables that we’ll be reusing through the loop.  We want to set up the loop to iterate through the number of puzzle pieces we need.  We get this value by multiplying <code>PUZZLE_DIFFICULTY</code> by itself - so in this case we get 16.</p>
<h3>In the loop:</h3>
<div><div id="highlighter_23328" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; PUZZLE_DIFFICULTY * PUZZLE_DIFFICULTY;i++){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = {};</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.sx = xPos;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.sy = yPos;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieces.push(piece);</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos += _pieceWidth;</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(xPos &gt;= _puzzleWidth){</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos = 0;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">yPos += _pieceHeight;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number11 index10 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Start by creating an empty <code>piece</code> object.  Next add the <code>sx</code> and <code>sy</code> properties to the object.  In the first iteration, these values are <code>0</code> and represent the point in our image where we will begin to draw from.  Now push it to the <code>_pieces[]</code> array.  This object will also contain the properties <code>xPos</code> and <code>yPos</code>, which will tell us the current position in the puzzle where the piece should be drawn.  We’ll be shuffling the objects before its playable so these values don’t need to be set quite yet.</p>
<p>The last thing we do in each loop is increase the local variable <code>xPos</code> by <code>_pieceWidth</code>.  Before continuing on with the loop, we determine if we need to step down to the next row of pieces by checking whether <code>xPos</code> is beyond the width of the puzzle.  If so, we reset <code>xPos</code> back to 0 and increase <code>yPos</code> by <code>_pieceHeight</code>.</p>
<p>Now we have our puzzle pieces all stored away nicely in our <code>_pieces</code> array.  At this point the code finally stops executing and waits for the user to interact.  We set a click listener to the <code>document</code> to fire the <code>shufflePuzzle()</code> function when triggered, which will begin the game. </p>
<hr>
<h2><span>Step 9:</span> The <code>shufflePuzzle()</code> Function</h2>
<div><div id="highlighter_179228" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">shufflePuzzle(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_pieces = shuffleArray(_pieces);</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.clearRect(0,0,_puzzleWidth,_puzzleHeight);</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">xPos = 0;</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">yPos = 0;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.xPos = xPos;</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.yPos = yPos;</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, piece.sx, piece.sy, _pieceWidth, _pieceHeight, xPos, yPos, _pieceWidth, _pieceHeight);</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.strokeRect(xPos, yPos, _pieceWidth,_pieceHeight);</code></div><div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos += _pieceWidth;</code></div><div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(xPos &gt;= _puzzleWidth){</code></div><div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos = 0;</code></div><div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">yPos += _pieceHeight;</code></div><div class="line number18 index17 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number19 index18 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number20 index19 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousedown = onPuzzleClick;</code></div><div class="line number21 index20 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<div><div id="highlighter_792660" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">shuffleArray(o){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(</code><code class="javascript keyword">var</code> <code class="javascript plain">j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">return</code> <code class="javascript plain">o;</code></div><div class="line number4 index3 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>First things first: shuffle the <code>_pieces[]</code> array.  I’m using a nice utility function here that will shuffle the indices of the array passed into it.  The explanation of this function is beyond the topic of this tutorial so we’ll move on, knowing that we have successfully shuffled our pieces. (For a basic introduction to shuffling, <a href="http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-randomly-shuffle-an-array-in-as3/" sl-processed="1">take a look at this tutorial</a>.)</p>
<p>Let’s first clear all graphics drawn to the <code>canvas</code> to make way for drawing our pieces. Next, set up the array similar to how we did when first creating our piece objects.  </p>
<h3>In the loop:</h3>
<div><div id="highlighter_112634" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.xPos = xPos;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece.yPos = yPos;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, piece.sx, piece.sy, _pieceWidth, _pieceHeight, xPos, yPos, _pieceWidth, _pieceHeight);</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.strokeRect(xPos, yPos, _pieceWidth,_pieceHeight);</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos += _pieceWidth;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(xPos &gt;= _puzzleWidth){</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">xPos = 0;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">yPos += _pieceHeight;</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number12 index11 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>First of all, use the <code>i</code> variable to set up our reference to the current piece object in the loop. Now we populate the <code>xPos</code> and <code>yPos</code> properties I mentioned earlier, which will be <code>0</code> in our first iteration.</p>
<p>Now, at long last, we draw our pieces. </p>
<p>The first parameter of <code>drawImage()</code> assigns the source of the image we want to draw from. Then use the piece objects <code>sx</code> and <code>sy</code> properties, along with <code>_pieceWidth</code> and <code>_pieceHeight</code>, to populate the parameters that declare the area of the image in which to draw from.  The last four parameters set the area of the <code>canvas</code> where we want to draw.  We use the <code>xPos</code> and <code>yPos</code> values that we are both building in the loop and assigning to the object.</p>
<p>Immediately after this we draw a quick stroke around the piece to give it a border, which will separate it nicely from the other pieces.</p>
<p>Now we wait for the user to grab a piece by setting another <code>click</code> listener.  This time it will fire an <code>onPuzzleClick()</code> function.</p>
<div class="tutorial_image"><img src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/html5_canvas_puzzle_shuffled.jpg" data-original-url="http://activetuts.s3.amazonaws.com/tuts/403_html5TileSwapPuzzle/html5_canvas_puzzle_shuffled.jpg" alt="Final HTML5 Puzzle"></div>
<hr>
<h2><span>Step 10:</span> The <code>onPuzzleClick()</code> Function</h2>
<div><div id="highlighter_219875" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">onPuzzleClick(e){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(e.layerX || e.layerX == 0){</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.layerX - _canvas.offsetLeft;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.layerY - _canvas.offsetTop;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">else</code> <code class="javascript keyword">if</code><code class="javascript plain">(e.offsetX || e.offsetX == 0){</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.offsetX - _canvas.offsetLeft;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.offsetY - _canvas.offsetTop;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentPiece = checkPieceClicked();</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_currentPiece != </code><code class="javascript keyword">null</code><code class="javascript plain">){</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.clearRect(_currentPiece.xPos,_currentPiece.yPos,_pieceWidth,_pieceHeight);</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.save();</code></div><div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = .9;</code></div><div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, _currentPiece.sx, _currentPiece.sy, _pieceWidth, _pieceHeight, _mouse.x - (_pieceWidth / 2), _mouse.y - (_pieceHeight / 2), _pieceWidth, _pieceHeight);</code></div><div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.restore();</code></div><div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousemove = updatePuzzle;</code></div><div class="line number18 index17 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmouseup = pieceDropped;</code></div><div class="line number19 index18 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number20 index19 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>We know that the puzzle was clicked; now we need to determine what piece was clicked on.  This simple conditional will get us our mouse position on all modern desktop browsers that support <code>canvas</code>, using either <code>e.layerX</code> and <code>e.layerY</code> or <code>e.offsetX</code> and <code>e.offsetY</code>.  Use these values to update our <code>_mouse</code> object by assigning it an <code>x</code> and a <code>y</code> property to hold the current mouse position - in this case, the position where it was clicked.</p>
<p>In line 112 we then immediately set <code>_currentPiece</code> to the returned value from our <code>checkPieceClicked()</code> function. We separate this code because we want to use it later when dragging the puzzle piece.  I’ll explain this function in the next step.</p>
<p>If the value returned was <code>null</code>, we simply do nothing, as this implies that the user didn’t actually click on a puzzle piece. However, if we do retrieve a puzzle piece, we want to attach it to the mouse and fade it out a bit to reveal the pieces underneath. So how do we do this?</p>
<p>First we clear the <code>canvas</code> area where the piece sat before we clicked it. We use <code>clearRect()</code> once again, but in this case we pass in only the area obtained from the <code>_currentPiece</code> object.  Before we redraw it, we want to <code>save()</code> the context of the canvas before proceeding. This will assure that anything we draw after saving will not simply draw over anything in its way.  We do this because we’ll be slightly fading the dragged piece and want to see the pieces under it.  If we didn’t call <code>save()</code>, we’d just draw over any graphics in the way - faded or not.</p>
<p>Now we draw the image so its center is positioned at the mouse pointer.  The first 5 parameters of <code>drawImage</code> will always be the same throughout the application.  When clicking, the next two parameters will be updated to center itself to the pointer of the mouse.  The last two parameters, the <code>width</code> and <code>height</code> to draw, will also never change.</p>
<p>Lastly we call the <code>restore()</code> method.  This essentially means we are done using the new alpha value and want to restore all properties back to where they were. To wrap up this function we add two more listeners.  One for when we move the mouse (dragging the puzzle piece), and one for when we let go (drop the puzzle piece).</p>
<hr>
<h2><span>Step 11:</span> The <code>checkPieceClicked()</code> Function</h2>
<div><div id="highlighter_604307" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">checkPieceClicked(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_mouse.x &lt; piece.xPos || _mouse.x &gt; (piece.xPos + _pieceWidth) || _mouse.y &lt; piece.yPos || _mouse.y &gt; (piece.yPos + _pieceHeight)){</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">//PIECE NOT HIT</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">else</code><code class="javascript plain">{</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">return</code> <code class="javascript plain">piece;</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">return</code> <code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number14 index13 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Now we need to backtrack a bit.  We were able to determine what piece was clicked, but how did we do it?  It’s pretty simple actually.  What we need to do is loop through all of the puzzle pieces and determine if the click was within the bounds of any of our objects.  If we find one, we return the matched object and end the function.  If we find nothing, we return <code>null</code>.</p>
<hr>
<h2><span>Step 12:</span> The <code>updatePuzzle()</code> Function</h2>
<div><div id="highlighter_322330" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">updatePuzzle(e){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(e.layerX || e.layerX == 0){</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.layerX - _canvas.offsetLeft;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.layerY - _canvas.offsetTop;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">else</code> <code class="javascript keyword">if</code><code class="javascript plain">(e.offsetX || e.offsetX == 0){</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.offsetX - _canvas.offsetLeft;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.offsetY - _canvas.offsetTop;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.clearRect(0,0,_puzzleWidth,_puzzleHeight);</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div><div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(piece == _currentPiece){</code></div><div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">continue</code><code class="javascript plain">;</code></div><div class="line number18 index17 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number19 index18 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, piece.sx, piece.sy, _pieceWidth, _pieceHeight, piece.xPos, piece.yPos, _pieceWidth, _pieceHeight);</code></div><div class="line number20 index19 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.strokeRect(piece.xPos, piece.yPos, _pieceWidth,_pieceHeight);</code></div><div class="line number21 index20 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_currentDropPiece == </code><code class="javascript keyword">null</code><code class="javascript plain">){</code></div><div class="line number22 index21 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_mouse.x &lt; piece.xPos || _mouse.x &gt; (piece.xPos + _pieceWidth) || _mouse.y &lt; piece.yPos || _mouse.y &gt; (piece.yPos + _pieceHeight)){</code></div><div class="line number23 index22 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">//NOT OVER</code></div><div class="line number24 index23 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number25 index24 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">else</code><code class="javascript plain">{</code></div><div class="line number26 index25 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece = piece;</code></div><div class="line number27 index26 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.save();</code></div><div class="line number28 index27 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = .4;</code></div><div class="line number29 index28 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillStyle = PUZZLE_HOVER_TINT;</code></div><div class="line number30 index29 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillRect(_currentDropPiece.xPos,_currentDropPiece.yPos,_pieceWidth, _pieceHeight);</code></div><div class="line number31 index30 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.restore();</code></div><div class="line number32 index31 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number33 index32 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number34 index33 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number35 index34 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.save();</code></div><div class="line number36 index35 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = .6;</code></div><div class="line number37 index36 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, _currentPiece.sx, _currentPiece.sy, _pieceWidth, _pieceHeight, _mouse.x - (_pieceWidth / 2), _mouse.y - (_pieceHeight / 2), _pieceWidth, _pieceHeight);</code></div><div class="line number38 index37 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.restore();</code></div><div class="line number39 index38 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.strokeRect( _mouse.x - (_pieceWidth / 2), _mouse.y - (_pieceHeight / 2), _pieceWidth,_pieceHeight);</code></div><div class="line number40 index39 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Now back to the dragging.  We call this function when the user moves the mouse.  This is the biggest function of the application as it’s doing several things.  Let’s begin. I'll break it down as we go.</p>
<div><div id="highlighter_43555" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">_currentDropPiece = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number2 index1 alt1"><code class="javascript keyword">if</code><code class="javascript plain">(e.layerX || e.layerX == 0){</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.layerX - _canvas.offsetLeft;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.layerY - _canvas.offsetTop;</code></div><div class="line number5 index4 alt2"><code class="javascript plain">}</code></div><div class="line number6 index5 alt1"><code class="javascript keyword">else</code> <code class="javascript keyword">if</code><code class="javascript plain">(e.offsetX || e.offsetX == 0){</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.x = e.offsetX - _canvas.offsetLeft;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_mouse.y = e.offsetY - _canvas.offsetTop;</code></div><div class="line number9 index8 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Start by setting <code>_currentDropPiece</code> to <code>null</code>.  We need to reset this back to <code>null</code> on update because of the chance that our piece was dragged back to its home.  We don’t want the previous <code>_currentDropPiece</code> value hanging around. Next we set the <code>_mouse</code> object the same way we did on click.</p>
<div><div id="highlighter_853154" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">_stage.clearRect(0,0,_puzzleWidth,_puzzleHeight);</code></div></div></td></tr></tbody></table></div></div>
<p>Here we need to do clear all graphics on the canvas.  We essentially need to redraw the puzzle pieces because the object being dragged on top will effect their appearance.  If we didn't do this, we’d see some very strange results following the path of our dragged puzzle piece.</p>
<div><div id="highlighter_611389" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number2 index1 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number3 index2 alt2"><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div></div></td></tr></tbody></table></div></div>
<p>Begin by setting up our usual pieces loop.</p>
<h3>In the Loop:</h3>
<div><div id="highlighter_873181" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number2 index1 alt1"><code class="javascript keyword">if</code><code class="javascript plain">(piece == _currentPiece){</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">continue</code><code class="javascript plain">;</code></div><div class="line number4 index3 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Create our <code>piece</code> reference as usual.  Next check if the piece we are currently referencing is the same as piece we are dragging. If so, continue the loop.  This will keep the dragged piece's home slot empty.</p>
<div><div id="highlighter_586605" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">_stage.drawImage(_img, piece.sx, piece.sy, _pieceWidth, _pieceHeight, piece.xPos, piece.yPos, _pieceWidth, _pieceHeight);</code></div><div class="line number2 index1 alt1"><code class="javascript plain">_stage.strokeRect(piece.xPos, piece.yPos, _pieceWidth,_pieceHeight);</code></div></div></td></tr></tbody></table></div></div>
<p>Moving on, redraw the puzzle piece using its properties exactly the same way we did when first drew them.  You’ll need to draw the border as well.</p>
<div><div id="highlighter_68828" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">if</code><code class="javascript plain">(_currentDropPiece == </code><code class="javascript keyword">null</code><code class="javascript plain">){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_mouse.x &lt; piece.xPos || _mouse.x &gt; (piece.xPos + _pieceWidth) || _mouse.y &lt; piece.yPos || _mouse.y &gt; (piece.yPos + _pieceHeight)){</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">//NOT OVER</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">else</code><code class="javascript plain">{</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece = piece;</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.save();</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.globalAlpha = .4;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillStyle = PUZZLE_HOVER_TINT;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.fillRect(_currentDropPiece.xPos,_currentDropPiece.yPos,_pieceWidth, _pieceHeight);</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.restore();</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number13 index12 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Since we have a reference to each object in the loop, we can also use this opportunity to check if the dragged piece is on top of it.  We do this because we want to give the user feedback on what piece it can be dropped on.  Let’s dig into that code now.</p>
<p>First we want to see if this loop has already produced a drop target.  If so, we don’t need to bother since only one drop target can be possible and any given mouse move.  If not, <code>_currentDropPiece</code> will be <code>null</code> and we can proceed into the logic. Since our mouse is in the middle of the dragged piece, all we really need to do is determine what other piece our mouse is over.</p>
<p>Next, use our handy <code>checkPieceClicked()</code> function to determine whether the mouse is hovering over the current piece object in the loop. If so, we set the <code>_currentDropPiece</code> variable and draw a tinted box over the puzzle piece, indicating that it is now the drop target.</p>
<p>Remember to <code>save()</code> and <code>restore()</code>. Otherwise you’d get the tinted box and not the image underneath.</p>
<h3>Out of the Loop:</h3>
<div><div id="highlighter_659138" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript plain">_stage.save();</code></div><div class="line number2 index1 alt1"><code class="javascript plain">_stage.globalAlpha = .6;</code></div><div class="line number3 index2 alt2"><code class="javascript plain">_stage.drawImage(_img, _currentPiece.sx, _currentPiece.sy, _pieceWidth, _pieceHeight, _mouse.x - (_pieceWidth / 2), _mouse.y - (_pieceHeight / 2), _pieceWidth, _pieceHeight);</code></div><div class="line number4 index3 alt1"><code class="javascript plain">_stage.restore();</code></div><div class="line number5 index4 alt2"><code class="javascript plain">_stage.strokeRect( _mouse.x - (_pieceWidth / 2), _mouse.y - (_pieceHeight / 2), _pieceWidth,_pieceHeight);</code></div></div></td></tr></tbody></table></div></div>
<p>Last but not least we need to redraw the dragged piece.  The code is the same as when we first clicked it, but the mouse has moved so its position will be updated.</p>
<hr>
<h2><span>Step 13:</span> The <code>pieceDropped()</code> Function</h2>
<div><div id="highlighter_373142" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">pieceDropped(e){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousemove = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmouseup = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(_currentDropPiece != </code><code class="javascript keyword">null</code><code class="javascript plain">){</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">tmp = {xPos:_currentPiece.xPos,yPos:_currentPiece.yPos};</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentPiece.xPos = _currentDropPiece.xPos;</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentPiece.yPos = _currentDropPiece.yPos;</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece.xPos = tmp.xPos;</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_currentDropPiece.yPos = tmp.yPos;</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">resetPuzzleAndCheckWin();</code></div><div class="line number12 index11 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>OK, the worst is behind us.  We are now successfully dragging a puzzle piece and even getting visual feedback on where it will be dropped.  Now all that is left is to drop the piece. Let’s first remove the listeners right away since nothing is being dragged.</p>
<p>Next, check that <code>_currentDropPiece</code> is not <code>null</code>.  If it is, this means that we dragged it back to the piece's home area and not over another slot.  If it’s not <code>null</code>, we continue with the function.</p>
<p>What we do now is simply swap the <code>xPos</code> and <code>yPos</code> of each piece.  We make a quick temp object as a buffer to hold one of the object's values in the swapping process.  At this point, the two pieces both have new <code>xPos</code> and <code>yPos</code> values, and will snap into their new homes on the next draw.  That’s what we’ll do now, simultaneously checking whether the game has been won.</p>
<hr>
<h2><span>Step 14:</span> The <code>resetPuzzleAndCheckWin()</code> Function</h2>
<div><div id="highlighter_542275" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">resetPuzzleAndCheckWin(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.clearRect(0,0,_puzzleWidth,_puzzleHeight);</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">gameWin = </code><code class="javascript keyword">true</code><code class="javascript plain">;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">i;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">piece;</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code><code class="javascript plain">(i = 0;i &lt; _pieces.length;i++){</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">piece = _pieces[i];</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.drawImage(_img, piece.sx, piece.sy, _pieceWidth, _pieceHeight, piece.xPos, piece.yPos, _pieceWidth, _pieceHeight);</code></div><div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">_stage.strokeRect(piece.xPos, piece.yPos, _pieceWidth,_pieceHeight);</code></div><div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(piece.xPos != piece.sx || piece.yPos != piece.sy){</code></div><div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">gameWin = </code><code class="javascript keyword">false</code><code class="javascript plain">;</code></div><div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code><code class="javascript plain">(gameWin){</code></div><div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">setTimeout(gameOver,500);</code></div><div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number17 index16 alt2"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Once again, clear the <code>canvas</code> and set up a <code>gameWin</code> variable, setting it to <code>true</code> by default.  Now proceed with our all-too-familiar pieces loop.</p>
<p>The code here should look familiar so we won’t go over it.  It simply draws the pieces back into their original or new slots.  Within this loop, we want to see if each piece is being drawn in its winning position.  This is simple: we check to see if our <code>sx</code> and <code>sy</code> properties match up with <code>xPos</code> and <code>yPos</code>.  If not, we know we couldn't possibly win the puzzle and set <code>gameWin</code> to <code>false</code>.  If we made it through the loop with everyone in their winning places, we set up a quick <code>timeout</code> to call our <code>gameOver()</code> method.  (We set a timeout so the screen doesn’t change so drastically upon dropping the puzzle piece.)  </p>
<hr>
<div class="post__inarticle-ad-template" style="margin-top: 30px;"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1392179526912-0" style="width: 300px; height: 250px;"><div id="google_ads_iframe_/11757429/hub_development_inarticle_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_development_inarticle_0" name="google_ads_iframe_/11757429/hub_development_inarticle_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div><iframe id="google_ads_iframe_/11757429/hub_development_inarticle_0__hidden__" name="google_ads_iframe_/11757429/hub_development_inarticle_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div><div class="ad__label">Advertisement</div></div></div></div><h2><span>Step 15:</span> The <code>gameOver()</code> Function</h2>
<div><div id="highlighter_946110" class="syntaxhighlighter  javascript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">gameOver(){</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousedown = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmousemove = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">document.onmouseup = </code><code class="javascript keyword">null</code><code class="javascript plain">;</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">initPuzzle();</code></div><div class="line number6 index5 alt1"><code class="javascript plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>This is our last function!  Here we just remove all listeners and call <code>initPuzzle()</code>, which resets all necessary values and waits for the user to play again.</p>
<hr>
<h2>Conclusion</h2>
<p><a href="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle.html" data-original-url="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle.html" sl-processed="1">Click here to see the final result.</a></p>
<p>As you can see, you can do a lot of new creative things in HTML5 using selected bitmap areas of loaded images and drawing.  You can easily extend this application by adding scoring and perhaps even a timer to give it more gameplay.  Another idea would be to increase the difficulty and select a different image in the <code>gameOver()</code> function, giving the game levels. </p>
</div></div></div><div class="post__sidebar"><div class="post__ad post__ad--first"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1379650391729-0" style="width: 300px; height: 250px;"><div id="google_ads_iframe_/11757429/hub_development_post_top_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_development_post_top_0" name="google_ads_iframe_/11757429/hub_development_post_top_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div></div><div class="post__series-info"></div><div class="post-meta"><img alt="Preview for Create an HTML5 Canvas Tile Swapping Puzzle" class="post-meta__image" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/html5_canvas_puzzle.png"><div class="post-meta__description"><div class="post-meta__item"><div class="post-meta__label">Difficulty:</div><div class="post-meta__value"><a class="post-meta__link" href="http://code.tutsplus.com/search?search%5Bfilters%5D%5Bdifficulty%5D%5B%5D=Beginner" sl-processed="1">Beginner</a></div></div><div class="post-meta__item"><div class="post-meta__label">Length:</div><div class="post-meta__value"><a class="post-meta__link" href="http://code.tutsplus.com/search?search%5Bfilters%5D%5Bcompletion_time%5D%5B%5D=Medium" sl-processed="1">Medium</a></div></div><div class="post-meta__item"><div class="post-meta__label">Tagged with:</div><div class="post-meta__value"><span class="post-meta__tag"><a class="post-meta__category-link" href="http://code.tutsplus.com/categories/games" sl-processed="1">Games</a></span><span class="post-meta__tag"><a class="post-meta__category-link" href="http://code.tutsplus.com/categories/html5" sl-processed="1">HTML5</a></span><span class="post-meta__tag"><a class="post-meta__category-link" href="http://code.tutsplus.com/categories/flash" sl-processed="1">Flash</a></span></div></div><div class="post-meta__resource-links"><a class="post-meta__download-attachment-link button" href="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/HTML5_Tile_Swapping_Puzzle.zip" sl-processed="1">Download Attachment <i class="tutsicon-download"></i></a><a class="post-meta__demo-link button" href="http://cdn.tutsplus.com/active/uploads/legacy/tuts/403_html5TileSwapPuzzle/demo/puzzle.html" sl-processed="1">View Online Demo <i class="tutsicon-globe"></i></a></div></div></div><div class="instructor-bio view instructor-bio--collapsed view--loaded"><img alt="" class="instructor-bio__image" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/068d49bd15e261e6a54c04efd5328cb3"><div class="instructor-bio__title">About Brad Manderscheid</div><div class="instructor-bio__details">Brad Manderscheid is a freelance developer, working under his company name, Actionmouse. He develops applications and games for mobile, desktop, and the web.</div><a class="instructor-bio__expand-link" href="javascript:;" sl-processed="1">+ Expand Bio</a><a class="instructor-bio__collapse-link" href="javascript:;" sl-processed="1">- Collapse Bio</a></div><div class="post__ad"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1382314910331-0" style="width: 300px; height: 250px;"><div id="google_ads_iframe_/11757429/hub_development_post_mid_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_development_post_mid_0" name="google_ads_iframe_/11757429/hub_development_post_mid_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div></div></div><div class="post__related-posts"><div class="card-header"><div class="card-header__title">Related Posts</div></div><ul class="posts posts--grid-small"><li class="posts__post"><div class="posts__post-main-topic topic-code">Code</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-code" href="http://code.tutsplus.com/categories/mobile-development" sl-processed="1">Mobile Development</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/create-a-puzzle-game-for-android-with-the-dolby-audio-api--cms-20800" sl-processed="1">Create a Puzzle Game for Android with the Dolby Audio API</a><a class="posts__post-preview " href="http://code.tutsplus.com/tutorials/create-a-puzzle-game-for-android-with-the-dolby-audio-api--cms-20800" sl-processed="1"><img alt="Preview image@2x" class="posts__post-preview-image posts__post-preview-image--regular" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/preview-image@2x.jpg"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Beginner<span class="posts__post-meta-label">Completion Time:</span>Medium</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/sashen-govender" sl-processed="1">Sashen Govender</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-05-08T15:30:08Z" title="8 May 2014">5 days ago</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-05-08T15:30:08Z">8 May 2014</time></div><div class="posts__post-teaser">In this tutorial, I will show you how to use the Dolby Audio API to enhance the sound in your And...</div><div class="posts__post-summary">In this tutorial, I will show you how to use the Dolby Audio API to enhance the sound in your Android applications. To show you how to use the Dolby Audio API, we will create a simple yet fun puzzle game.<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/create-a-puzzle-game-for-android-with-the-dolby-audio-api--cms-20800" sl-processed="1">Read More…</a></div></div></li><li class="posts__post"><div class="posts__post-main-topic topic-gamedevelopment">Game Development</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/categories/games" sl-processed="1">Games</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/game-input-simplified--cms-19759" sl-processed="1">Game Input Simplified</a><a class="posts__post-preview " href="http://code.tutsplus.com/tutorials/game-input-simplified--cms-19759" sl-processed="1"><img alt="Preview" class="posts__post-preview-image posts__post-preview-image--regular" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/Preview.png"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Intermediate<span class="posts__post-meta-label">Completion Time:</span>Medium</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/si-robertson" sl-processed="1">Si Robertson</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-03-06T15:30:09Z" title="6 Mar 2014">6 Mar 2014</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-03-06T15:30:09Z">6 Mar 2014</time></div><div class="posts__post-teaser">Cross-platform games all have one thing in common: they all need to deal with a multitude of game...</div><div class="posts__post-summary">Cross-platform games all have one thing in common: they all need to deal with a multitude of game input devices (controllers), and dealing with those input devices can become a daunting task. This tutorial demonstrates one way to handle multiple input devices through the use of a simple, unified API.<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/game-input-simplified--cms-19759" sl-processed="1">Read More…</a></div></div></li><li class="posts__post"><div class="posts__post-main-topic topic-gamedevelopment">Game Development</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/categories/implementation" sl-processed="1">Implementation</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/write-once-publish-everywhere-with-haxepunk-making-a-game--gamedev-14071" sl-processed="1">Write Once, Publish Everywhere With HaxePunk: Making a Game</a><a class="posts__post-preview posts__post-preview--cropped" href="http://code.tutsplus.com/tutorials/write-once-publish-everywhere-with-haxepunk-making-a-game--gamedev-14071" sl-processed="1"><img alt="Previewretinaimage" class="posts__post-preview-image posts__post-preview-image--cropped" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/previewretinaimage.png"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Intermediate<span class="posts__post-meta-label">Completion Time:</span>Medium</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/jacob-white" sl-processed="1">Jacob White</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-02-22T15:30:25Z" title="22 Feb 2014">22 Feb 2014</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-02-22T15:30:25Z">22 Feb 2014</time></div><div class="posts__post-teaser">You've probably had this experience before: you hear about an awesome game, but then you find out...</div><div class="posts__post-summary">You've probably had this experience before: you hear about an awesome game, but then you find out that it's only coming out on the one platform that you don't own. It doesn't have to be this way. In this tutorial, you will learn how to use Haxe to make a game in one development platform that can target multiple gaming platforms, including Linux, Mac, Windows, iOS, Android, and Flash.<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/write-once-publish-everywhere-with-haxepunk-making-a-game--gamedev-14071" sl-processed="1">Read More…</a></div></div></li><li class="posts__post"><div class="posts__post-main-topic topic-code">Code</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-code" href="http://code.tutsplus.com/categories/javascript-ajax" sl-processed="1">JavaScript &amp; AJAX</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/javascript-animation-that-works-part-4-of-4--net-35263" sl-processed="1">JavaScript Animation that Works (Part 4 of 4)</a><a class="posts__post-preview posts__post-preview--cropped" href="http://code.tutsplus.com/tutorials/javascript-animation-that-works-part-4-of-4--net-35263" sl-processed="1"><img alt="Spriting icon large" class="posts__post-preview-image posts__post-preview-image--cropped" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/spriting-icon-large.png"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Intermediate<span class="posts__post-meta-label">Completion Time:</span>Short</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/steven-riche" sl-processed="1">Steven Riche</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-02-18T14:00:32Z" title="18 Feb 2014">18 Feb 2014</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-02-18T14:00:32Z">18 Feb 2014</time></div><div class="posts__post-teaser">
In the first part of this series, we introduced the idea of using spriting as an easy, cross-br...</div><div class="posts__post-summary">
In the first part of this series, we introduced the idea of using spriting as an easy, cross-browser way of having interactive animation for the web. In the second part, we got some animation working, and in the third we cleaned up our code and made it ready for the web.
<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/javascript-animation-that-works-part-4-of-4--net-35263" sl-processed="1">Read More…</a></div></div></li><li class="posts__post"><div class="posts__post-main-topic topic-code">Code</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-code" href="http://code.tutsplus.com/categories/php" sl-processed="1">PHP</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/creating-a-photo-tag-wall-with-twilio-picture-messaging-php--net-35369" sl-processed="1">Creating a Photo Tag Wall With Twilio Picture Messaging &amp; PHP</a><a class="posts__post-preview posts__post-preview--cropped" href="http://code.tutsplus.com/tutorials/creating-a-photo-tag-wall-with-twilio-picture-messaging-php--net-35369" sl-processed="1"><img alt="Procedural to oop php retina preview" class="posts__post-preview-image posts__post-preview-image--cropped" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/procedural-to-oop-php-retina-preview.jpg"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Beginner<span class="posts__post-meta-label">Completion Time:</span>Quick</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/roger-stringer" sl-processed="1">Roger Stringer</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-01-09T18:40:04Z" title="9 Jan 2014">9 Jan 2014</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-01-09T18:40:04Z">9 Jan 2014</time></div><div class="posts__post-teaser">Twilio's recently announced Picture Messaging has vastly opened up what we can do with text messa...</div><div class="posts__post-summary">Twilio's recently announced Picture Messaging has vastly opened up what we can do with text messaging, now we can attach photos to our text messages and have them get used in different ways.

In our case, we are going to build a Photo Tag Wall, which will contain photos linked to tags that will be displayed on a website.<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/creating-a-photo-tag-wall-with-twilio-picture-messaging-php--net-35369" sl-processed="1">Read More…</a></div></div></li><li class="posts__post"><div class="posts__post-main-topic topic-code">Code</div><div class="posts__post-primary-category"><a class="posts__post-primary-category-link topic-code" href="http://code.tutsplus.com/categories/javascript-ajax" sl-processed="1">JavaScript &amp; AJAX</a></div><a class="posts__post-title" href="http://code.tutsplus.com/tutorials/javascript-objects--net-35979" sl-processed="1">JavaScript Objects</a><a class="posts__post-preview posts__post-preview--cropped" href="http://code.tutsplus.com/tutorials/javascript-objects--net-35979" sl-processed="1"><img alt="Cover" class="posts__post-preview-image posts__post-preview-image--cropped" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/cover.jpg"><span class="posts__post-meta"><span class="posts__post-meta-label">Difficulty:</span>Beginner<span class="posts__post-meta-label">Completion Time:</span>Short</span></a><div class="posts__post-details"><div class="posts__post-publication-meta"><span class="posts__post-author"><a class="posts__post-author-link" href="http://tutsplus.com/authors/cody-lindley" sl-processed="1">Cody Lindley</a></span><time class="posts__post-publication-date posts__post-publication-date--relative" datetime="2014-01-01T14:00:03Z" title="1 Jan 2014">1 Jan 2014</time><time class="posts__post-publication-date posts__post-publication-date--formatted" datetime="2014-01-01T14:00:03Z">1 Jan 2014</time></div><div class="posts__post-teaser">In JavaScript, objects are king: Almost everything is an object or acts like an object. Understan...</div><div class="posts__post-summary">In JavaScript, objects are king: Almost everything is an object or acts like an object. Understand objects and you will understand JavaScript. So let's examine the creation of objects in JavaScript.<a class="posts__post-link posts__post-read-more-link" href="http://code.tutsplus.com/tutorials/javascript-objects--net-35979" sl-processed="1">Read More…</a></div></div></li></ul></div><footer class="post__footer"><div class="post__comments" id="comments"><div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" tabindex="0" title="Disqus" width="100%" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/saved_resource.html" scrolling="no" horizontalscrolling="no" verticalscrolling="no" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 3042px !important;"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" tabindex="0" title="Disqus" scrolling="no" style="width: 742px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 742px !important; max-width: 742px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" tabindex="0" title="Disqus" scrolling="no" style="width: 742px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 742px !important; max-width: 742px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe></div><script type="text/javascript">var disqus_shortname  = "activetuts";
var disqus_identifier = "10747 http://active.tutsplus.com/?p=10747";
var disqus_title      = "Create an HTML5 Canvas Tile Swapping Puzzle";

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();

(function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());</script></div><div class="post__footer-sidebar"><div class="post__ad"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1379650407131-0" style="width: 300px; height: 250px;"><div id="google_ads_iframe_/11757429/hub_development_post_comments_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_development_post_comments_0" name="google_ads_iframe_/11757429/hub_development_post_comments_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div></div></div></footer></article></main></div></div><footer class="page-footer"><div class="page-footer__content"><div class="page-footer__tuts-brand"><img alt="tuts+" class="page-footer__tuts-logo-image tuts-logo" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/tuts_logo-79176000c077f4191a2cfcc3b312b7ed.svg"><span class="page-footer__tuts-brand-text">Teaching skills to millions worldwide.</span></div><nav class="page-footer__links"><ul class="page-footer__link-list"><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/about" sl-processed="1">About</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/blog" sl-processed="1">Blog</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/pricing" sl-processed="1">Pricing</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/faq" sl-processed="1">FAQ</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/support" sl-processed="1">Support</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/write-for-us" sl-processed="1">Write For Us</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/advertise" sl-processed="1">Advertise</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/privacy-policy" sl-processed="1">Privacy Policy</a></li><li class="page-footer__link-list-item"><a class="page-footer__link" href="http://tutsplus.com/terms-and-conditions" sl-processed="1">Terms &amp; Conditions</a></li></ul><ul class="page-footer__social-links"><li class="page-footer__social-link-item"><a class="page-footer__social-link page-footer__link" href="https://www.facebook.com/tutsplus" sl-processed="1"><i class="icon-facebook"></i></a></li><li class="page-footer__social-link-item"><a class="page-footer__social-link page-footer__link" href="https://twitter.com/tutsplus" sl-processed="1"><i class="icon-twitter"></i></a></li><li class="page-footer__social-link-item"><a class="page-footer__social-link page-footer__link" href="https://plus.google.com/108971748263060947124/posts" rel="publisher" sl-processed="1"><i class="icon-google-plus"></i></a></li></ul></nav></div><div class="page-footer__envato-bar"><div class="page-footer__envato-bar-content"><div class="page-footer__copyright">© 2013 Envato Pty Ltd.</div><div class="page-footer__envato-logo"><a class="page-footer__envato-logo-link" href="http://www.envato.com/" sl-processed="1"><img alt="envato" class="page-footer__envato-logo-image" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/envato_logo-bea126b87a05d98d331259dee204aac6.svg"></a></div></div></div></footer><script async="async" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/body-1efd53ca9d88bc97a24f2b4473538b78.js"></script><script src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/1342X589339.skimlinks.js" type="text/javascript"></script><script src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/nr-411.min.js"></script><iframe id="google_osd_static_frame_2700597229413" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe><script type="text/javascript" src="./Create an HTML5 Canvas Tile Swapping Puzzle - Tuts+ Code Tutorial_files/27851e2035"></script></body></html>