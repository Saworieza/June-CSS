if("undefined"==typeof nRelate){var nr_load_time=(new Date).getTime();nRelate=function(){function r(a){this.res=a||10}function n(a,b){var c=f.extend({},{type:"alert",callback:null,width:550,height:0},b);this.dialog=f.xgebi(a);if(!this.dialog)if(a)this.dialog=document.createElement("div"),this.dialog.innerHTML=a,document.body.appendChild(this.dialog);else return!1;n.instances[a]=this;var d=document.createElement("div");d.className="nr_dialog";d.style.position="absolute";d.style.zIndex=9E3;d.style.top=
0;d.style.left="-9999px";d.style.overflow="hidden";d.style.MozBorderRadius="10px";d.style.WebkitBorderRadius="10px";d.style.borderRadius="10px";d.style.MozBoxShadow="rgb(0, 0, 0) 0 0 18px 0";d.style.WebkitBoxShadow="rgb(0, 0, 0) 0 0 18px 0";d.style.boxShadow="rgb(0, 0, 0) 0 0 18px 0";d.style.border="1px solid rgb(53, 106, 193)";d.style.backgroundColor="#fff";c.height&&(d.style.height=c.height+"px");var e=document.createElement("img");e.src="http://css.nrcdn.com/images/nr_close.png";e.title="Close dialog";
e.style.cursor="pointer";e.style.position="absolute";e.style.top="5px";e.style.right="5px";f.bind(e,"click",function(b){n.instances[a].hide();f.is_function(c.callback)&&c.callback(!1)});d.appendChild(e);d.appendChild(this.dialog.parentNode.removeChild(this.dialog));if("confirm"==c.type){var g,h,m;g=document.createElement("span");f.xac(g,"nr_dialog_btn nr_btn_ok");g.innerHTML=c.txt_ok||"Ok";f.bind(g,"click",function(){n.instances[a].hide();f.is_function(c.callback)&&c.callback(!0)});h=document.createElement("span");
f.xac(h,"nr_dialog_btn nr_btn_cancel");h.innerHTML=c.txt_ok||"Cancel";f.bind(h,"click",function(){n.instances[a].hide();f.is_function(c.callback)&&c.callback(!1)});m=document.createElement("div");f.xac(m,"nr_dialog_btns");m.appendChild(g);m.appendChild(h);d.appendChild(m)}this.closebtn=e;this.dialog=d;document.body.appendChild(this.dialog);d=n.grey;d||(d=document.createElement("div"),d.className="nr_dialog_overlay",d.style.position="fixed",d.style.overflow="hidden",d.style.zIndex="9000",d.style.opacity=
0.6,d.style.filter="alpha(opacity=30)",d.style.backgroundColor="#000",n.grey=document.body.appendChild(d),f.bind(d,"click",function(){for(var a in n.instances)n.instances[a].hide();f.is_function(c.callback)&&c.callback(!1)}));f.bind(window,"resize",function(){for(var a in n.instances)n.instances[a].is_opened&&n.instances[a].center()})}var f={init:function(a){var b,c=null;if(this.is_initialized)return this.debug("nRelate already setup"),!1;this.is_initialized=!0;this.extend(this.options,a,this.constants);
if(this.is_object(this.options.plugins))for(b in this.options.plugins)this.is_defined(this.plugin_helpers[b])&&(c=c||{},c[b]=this.extend(!0,{},this.plugin_helpers[b]._defaults,this.options.plugins[b],this.plugin_helpers[b]));this.options.plugins=c;this.plugins_sanitized=!0;for(b in this.options.plugins)this.snt(b);this.lcs();this.debug("Options initialized %o",this.options)},snt:function(a){var b,c,d,e=["cssstyle","thumbsize","ad_place","widgetstyle"];c={style:"cssstyle",thumb_size:"thumbsize"};for(b in c)this.is_defined(this.options.plugins[a][b])&&
(this.options.plugins[a][c[b]]=this.options.plugins[a][b],delete this.options.plugins[a][b]);b=0;for(c=e.length;b<c;b++)d="supported_"+e[b]+"s",0>this.in_array(this.options.plugins[a][e[b]],this.options.plugins[a][d])&&(this.options.plugins[a][e[b]]=this.options.plugins[a][d][0]);this.is_function(this.options.plugins[a].csnt)&&this.options.plugins[a].csnt.call(this,this.options.plugins[a])},lcs:function(){var a=this.options.debug_mode?this.options.debug_cs_api_url:this.options.cs_api_url,a=a+(this.to_slug(this.options.domain)+
".js");this.debug("Loading custom scripts from %o",a);this.lr(a,"nrelate-widget-cs");var b=this;setTimeout(function(){b.acs({})},5E3)},acs:function(a){if(this.plugins_sanitized&&!this.custom_scripts_loaded){this.custom_scripts_loaded=!0;var b;this.debug("Applying custom scripts");for(b in this.options.plugins)this.extend(this.options.plugins[b],a[b]);this.nr_cs_load_time=(new Date).getTime();if(!this.options.browser.msie)try{this.pd()}catch(c){}this.bdr(this.pd,"pd()")}},pd:function(){var a,b,c,d,
e;for(p in this.options.plugins){this.is_function(this.options.plugins[p].fph)?(a=this.options.plugins[p].fph,this.debug("Use custom fph for %s",p)):(a=this.dfph,this.debug("Use default fph for %s",p));this.is_function(this.options.plugins[p].fpl)?(b=this.options.plugins[p].fpl,this.debug("Use custom fpl for %s",p)):(b=this.dfpl,this.debug("Use default fpl for %s",p));this.is_function(this.options.plugins[p].fkw)?(c=this.options.plugins[p].fkw,this.debug("Use custom fkw for %s",p)):(c=this.dfkw,this.debug("Use default fkw for %s",
p));this.debug("Parsing document for %s",p);d=this.options.plugins[p].cts.length;this.options.plugins[p].phs=a.call(this,p);this.options.plugins[p].pls=b.call(this,p);e={};a=0;for(b=this.options.plugins[p].pls.length;a<b;a++)e[this.options.plugins[p].pls[a]]=1;this.is_home_page=Boolean(this.is_defined(window.nr_is_home)?window.nr_is_home:1<this.get_keys(e).length);this.options.plugins[p].kws=c.call(this,p);a=d;for(b=this.options.plugins[p].phs.length;a<b&&a<(1>=b?1:15);++a)this.act(a,p);this.mac()}},
dfph:function(a){var b,c,d,e,g,h,m,l=[],f="post-body article-content entry-content entry post-entry post-inner postmeta2 post_content text postcontent single post-header content post art-PostContent jump-link entrytitle wrap blogPost post-footer postfooter commentpage post-footer-line".split(" "),n=["post-footer","postfooter","commentpage","post-footer-line"],q=["format_teaser","sideContent","ngg-widget"];if(l=this.xgebi("nrelate_"+a+"_placeholder"))return this.debug("Backwards compatibility: using #nrelate_%s_placeholder: %o",
a,l),[l];if(0<(l=this.xgebcn("nr_"+a+"_placeholder","div")).length)return this.debug("Using manually located .nr_%s_placeholder: %o",a,l),l;if(this.options.manual_ph_only)return[];b=0;for(e=f.length;b<e;b++)if(m=this.xgebcn(f[b]),0<(g=m.length)){this.debug("Found candidates with .%s selector",f[b]);for(c=0;c<g;c++){d=0;for(h=q.length;d<h;d++)if(this.xhc(m[c],q[d])){this.debug("%o excluded because of class .%s",m[c],q[d]);m[c]=!1;break}m[c]&&0<=this.in_array(f[b],n)&&(this.is_defined(m[c].previousSibling)&&
1===m[c].previousSibling.nodeType?(this.debug("Asigning previousSibling because of .%s",f[b]),m[c]=m[c].previousSibling):(this.debug("%o excluded because it doesn't have valid previousSibling",m[c]),m[c]=!1));m[c]&&(l[l.length]=m[c])}if(l.length)return this.debug("Document parsed. Found these placeholders %o",l),l}else this.debug("No placeholders found with .%s selector",f[b]);if(l=this.xgebi("nrelate_"+a+"_backup_placeholder"))return this.debug("Backwards compatibility: using #nrelate_%s_backup_placeholder: %o",
a,l),[l];this.debug("No placeholders found");return[]},dfpl:function(a){var b,c,d,e,g,h,m,l=[],f=["entry-title","post-title","entry-header"],n=["h3","h2","h1"];if(1==this.options.plugins[a].phs.length&&"undefined"!=typeof window.nr_pageurl)return this.debug("Manually defined nr_pageurl"),[{href:window.nr_pageurl}];if(0<this.options.plugins[a].phs.length&&this.options.plugins[a].phs[0].getAttribute("data-permalink")){b=0;for(e=this.options.plugins[a].phs.length;b<e;b++)if(g=this.get_data_attr(this.options.plugins[a].phs[b],
"permalink"))l[l.length]={href:g};else{l=[];break}if(l.length)return this.debug("Found data-permalink attribute on placeholders"),l}if(0<(m=this.xgeba("meta","property","og:url")).length){b=0;for(e=this.options.plugins[a].phs.length;b<e;b++)l[l.length]={href:m[0].content};this.debug("Found og:url meta tag");return l}if(0<(m=this.xgeba("link","rel","canonical")).length){b=0;for(e=this.options.plugins[a].phs.length;b<e;b++)l[l.length]=m[0];this.debug("Found canonical link tag");return l}if(1<(l=this.xgeba("a",
"title","permanent link")).length)return this.debug("Found title='permanent link' permalinks %o",l),l;b=0;for(e=f.length;b<e;b++)for(c=0,g=n.length;c<g;c++){if(0<(h=this.xgebcn(f[b],n[c])).length)for(d=0;d<h.length;d++)0<(m=this.xgebtn("a",h[d])).length&&(l[l.length]=m[0]);if(0<l.length)return this.debug("Found permalinks on %s.%s %o",n[c],f[b],l),l}if(0<(l=this.xgeba("a","rel","bookmark")).length)return this.debug("Found rel='bookmark' permalinks %o",l),l;if(0<(l=this.xgebcn("permalink","a")).length)return this.debug("Found class='permalink' permalinks %o",
l),l;if(0<(c=this.xgebcn("post")).length){b=0;for(e=c.length;b<e;b++)0<(m=this.xgebtn("a",c[b])).length&&(l[l.length]=m[0]);if(0<l.length)return this.debug("Found first links inside div.post %o",l),l}if(0<(c=this.options.plugins[a].phs).length){b=0;for(e=c.length;b<e;b++)0<(m=this.xgebtn("a",c[b])).length&&(l[l.length]=m[0]);if(0<l.length)return this.debug("Found first links inside div.post %o",l),l}this.debug("No permalinks found");return[]},dfkw:function(a){var b,c,d,e,g,h,m=document.title,l=[],
f=["entry-title","post-title","entry-header"],n=["h3","h2","h1"];if("undefined"!=typeof window.nr_keywords&&"encodeURI(document.title)"!=window.nr_keywords)return this.debug("Manually defined nr_keywords"),[window.nr_keywords];if(0<this.options.plugins[a].phs.length&&this.options.plugins[a].phs[0].getAttribute("data-title")){b=0;for(c=this.options.plugins[a].phs.length;b<c;b++)l[l.length]=this.get_data_attr(this.options.plugins[a].phs[b],"title");this.debug("Found data-title attribute on placeholders");
return l}b=0;for(c=f.length;b<c;b++)for(d=0,e=n.length;d<e;d++){if(0<(g=this.xgebcn(f[b],n[d])).length)for(k=0;k<g.length;k++)if(h=g[k].innerText||g[k].textContent,this.is_home_page)l[l.length]=h;else if(0<=m.search(this.regex_escape(h))){b=0;for(c=this.options.plugins[a].pls.length;b<c;b++)l[b]=h;break}if(0<l.length)return this.debug("Found keywords on %s.%s %o",n[d],f[b],l),l}if(!this.is_home_page){b=0;for(c=this.options.plugins[a].pls.length;b<c;b++)l[b]=m;this.debug("Single post page. Using document.title as keyword");
return l}this.debug("No keywords found");return[]},act:function(a,b,c){var d;c="string"!=typeof c?"":c;d=document.createElement("div");d.id="nrelate_"+b+"_"+a;d.innerHTML=c;this.xac(d,"nrelate");this.xac(d,"nrelate_"+b);this.xac(d,"nr_clear");d.nr_api_called=!1;d.nr_plugin=b;d.nr_viewed=!1;this.options.plugins[b].phs[a].appendChild(d);this.options.plugins[b].cts[a]=d},mac:function(){var a,b,c,d,e,g;for(a in this.options.plugins)if(this.is_function(this.options.plugins[a].should_load)&&!this.options.plugins[a].should_load.call(this,
this.options.plugins[a]))this.debug("Ignore %s API calls because of should_load",a);else for(this.debug("Making API calls for %s",a),b=0,c=this.options.plugins[a].cts.length;b<c;b++)if(!(d=this.options.plugins[a].cts[b]).nr_api_called){if(!this.is_defined(this.options.plugins[a].pls[b]))if(1==c)this.options.plugins[a].pls[b]={href:window.location.href};else continue;e=1==this.options.plugins[a].phs.length?document.title:"";e=this.aurlp(this.options.plugins[a].api_url,{plugin:this.options.plugins[a].shortname,
tag:"nrelate_"+a,domain:this.options.domain,keywords:this.options.plugins[a].kws[b]||e,url:this.options.plugins[a].pls[b].href,nr_div_number:b,pr_id:this.get_print_id()});"referrer"in document&&document.referrer&&(e=this.aurlp(e,{referrer:document.referrer}));this.is_home_page||(d.nr_src_url=this.options.plugins[a].pls[b].href);e=this.apip(this.options.plugins[a],e,d);if(g=this.gurlp(window.location.search,"predefined_set_override"))e=this.aurlp(e,{predefined_set_override:g});this.nr_parse_time=(new Date).getTime();
if("performance"in window){g=this.nr_load_time-window.performance.timing.responseStart;var h=this.nr_cs_load_time-this.nr_load_time,m=this.nr_parse_time-Math.max(window.performance.timing.domInteractive,this.nr_cs_load_time);this.debug("#%s Loading time: %f | CS Loading time: %f | Parse time %f",d.id,g/1E3,h/1E3,m/1E3);e=this.aurlp(e,{loading_time:g,cs_time:h,parse_time:m})}if(g=this.parse_json(this.get_data_attr(d.parentNode,"options")))e=this.aurlp(e,g);d.nr_api_call_time=(new Date).getTime();this.debug("Making API call for #%s: %o",
d.id,e);this.lr(e,d.id+"-api_call");d.nr_api_called=!0;d.nr_api_url=e}},apip:function(a,b,c){var d,e,g={},h="cssstyle thumbsize ad_place widgetstyle header ad_header widget_id page_type_id page_type geo article_id".split(" "),m=["norelatedposts","ad_num"];this.is_array(this.options.extra_apip.general)&&(h=h.concat(this.options.extra_apip.general));d=0;for(e=h.length;d<e;d++)null!==a[h[d]]&&this.is_defined(a[h[d]])&&(g[h[d]]=a[h[d]]);this.is_array(this.options.extra_apip.numeric)&&(m=m.concat(this.options.extra_apip.numeric));
d=0;for(e=m.length;d<e;d++)isNaN(a[m[d]])||(g[m[d]]=a[m[d]]);g.length!=={}&&(b=this.aurlp(b,g));this.is_function(a.capip)&&(b=a.capip.call(this,b,a,c));return b},sw:function(a,b,c){var d=c||{};(c=this.xgebi(b))?(this.debug("Injecting content into #%s container",b),c.nr_count_views=d.count_views||this.options.plugins[c.nr_plugin].count_views,this.sctc(this.options.plugins[c.nr_plugin],c,d),c.innerHTML=a,this.sct(this.options.plugins[c.nr_plugin],c,d),0==this.xgebcn("nr_link","a",c).length&&(c.style.display=
"none"),c.nr_widget_initialized_time=(new Date).getTime()):this.debug("#%s container not found",b)},sctc:function(a,b,c){a.cssstyle=c.cssstyle||c.style||a.cssstyle||a.supported_cssstyles[1];a.cssversion=c.cssversion||0;a.thumbsize=c.thumbsize||c.thumb_size||a.thumbsize||a.supported_thumbsizes[1];a.ad_place=c.ad_place||a.ad_place||a.supported_ad_places[1];a.widgetstyle=c.widgetstyle||a.widgetstyle||a.supported_widgetstyles[1];a.whats_this_link=c.whats_this_link||a.whats_this_link||!1;a.widget_id=c.widget_id||
a.widget_id||"0";a.page_type_id=c.page_type_id||a.page_type_id||"0";a.page_type=c.page_type||a.page_type||"0";a.geo=c.geo||a.geo||"0";a.article_id=c.article_id||a.article_id||"0";if(a.cssstyle)if("custom"==a.cssstyle){c=this.to_slug(this.options.domain);var d=(this.options.debug_mode?this.options.debug_css_api_url:this.options.css_api_url)+c+".css",d=this.aurlp(d,{v:a.cssversion});this.debug("Loading custom style from %o",d);this.lr(d,"nrelate-"+c+"custom-style",{type:"css",callback:this.fah})}else"none"!=
a.cssstyle&&this.lr(this.options.default_stylesheet_url,"nrelate-styles",{type:"css",callback:this.fah});this.bind(window,"load",function(){nRelate.fah()});this.xac(b,"nrelate_"+a.cssstyle);0===a.widgetstyle?this.xac(b,"nr_text"):this.xac(b,"nr_"+a.thumbsize);"Separate"==a.ad_place?this.xac(b,"nr_2col"):this.xac(b,"nr_1row")},sct:function(a,b,c){var d=this;this.xac(b,"nr_initializing");if(c.widget_id||a.widget_id)this.xac(b,"widget_id_"+(c.widget_id||a.widget_id)),b.nr_widget_id=c.widget_id||a.widget_id;
b.nr_cols_num=c.cols_num||0;this.fh(b);this.ctr(b);this.aa(b);this.pr(b);a.whats_this_link&&this.wtl(b,a,c);c.uc&&this.ucs(b,a,c);this.is_function(a.csct)&&a.csct.call(this,a,b,c);this.xrc(b,"nr_initializing");this.xac(b,"nr_setup");this.bvc();this.bdr(function(){d.cab(b)})},fh:function(a){if((a=this.xgebi(a))&&!0!=a.nr_fixing_height){var b;if(0==(b=this.xgebcn("nr_panel","a",a)).length){if(0<(b=this.xgebcn("nr_link","a",a)).length)for(c=0;c<b.length;c++)this.xac(b[c].parentNode,"nr_li_"+(c+1)),this.xac(b[c],
"nr_row_"+(c+1))}else{a.nr_fixing_height=!0;var c,d,e,g,h;num_rows=num_cols=img_height=link_height=link_y=d=0;row_links=[];tallest=0;_col_counter=_row_counter=1;h=this.xgebtn("img",a);c=0;for(e=h.length;c<e;c++)img_height=Math.max(img_height,this.xHeight(h[c]));this.xrc(a,"rotate");c=0;for(e=b.length;c<e;c++)b[c].style.minHeight=0,b[c].style.transition="none";d=this.xPageY(b[0]);c=0;for(e=b.length;c<e;c++)if(h=b[c],link_height=Math.max(this.xHeight(h),img_height),a.nr_cols_num)row_links[row_links.length]=
h,tallest=tallest<link_height?link_height:tallest,num_cols=a.nr_cols_num;else{link_y=this.xPageY(h);if(d!=link_y){d=0;for(g=row_links.length;d<g&&!this.xhc(a,"nr_text");d++)row_links[d].style.minHeight=tallest+"px";row_links=[];d=link_y;tallest=link_height;row_links[row_links.length]=h}else row_links[row_links.length]=h,tallest=tallest<link_height?link_height:tallest;num_cols=num_cols<row_links.length?row_links.length:num_cols}d=0;for(g=row_links.length;d<g&&!this.xhc(a,"nr_text");d++)row_links[d].style.minHeight=
tallest+"px";c=0;for(e=b.length;c<e;c++)b[c].style.transition="";num_rows=b.length%num_cols+1;c=0;for(e=b.length;c<e;c++)h=b[c],this.xrc(h,"nr_odd_row|nr_even_row|nr_odd_col|nr_even_col|nr_first_col|nr_last_col|nr_first_row|nr_last_row|nr_row_[\\d]+|nr_col_[\\d]+|nr_unit_[\\d]+"),this.xac(h,"nr_unit_"+(c+1)),this.xac(h,"nr_col_"+_col_counter),this.xac(h,"nr_row_"+_row_counter),1==_col_counter?this.xac(h,"nr_first_col"):_col_counter==num_cols&&this.xac(h,"nr_last_col"),1==_row_counter?this.xac(h,"nr_first_row"):
_row_counter==num_rows&&this.xac(h,"nr_last_row"),this.xac(h,0==_row_counter%2?"nr_even_row":"nr_odd_row"),this.xac(h,0==_col_counter%2?"nr_even_col":"nr_odd_col"),_col_counter++,_col_counter>num_cols&&(_col_counter=1,_row_counter++);this.xhc(a,"nrelate_pol")&&this.xac(a,"rotate");a.nr_fixing_height=!1;if(!this.is_dom_ready){var m=this;clearInterval(a.nr_fixheight_interval);a.nr_fixheight_interval=setTimeout(function(){m.fh(a)},100)}}}},fah:function(){var a,b;for(a in this.options.plugins)for(b=0;b<
this.options.plugins[a].cts.length;b++)this.debug("Fix height of #%s",this.options.plugins[a].cts[b].id),this.fh(this.options.plugins[a].cts[b])},ctr:function(a){if(a=this.xgebi(a)){var b,c,d,e,g=this;if(0!=(d=this.xgebcn("nr_link","a",a)).length)for(b=0,c=d.length;b<c;b++)e=a.nr_plugin,this.bind(d[b],"click",function(b){g.hclk(b,e,a)})}},hclk:function(a,b,c){a||(a=window.event);for(var d,e=this,g=this.evtsrc(a);"a"!=g.nodeName.toLowerCase();)g=g.parentNode;if(this.xhc(g,"nr_partner")||this.xhc(g,
"nr_tx_link")&&this.xhc(g,"nr_external"))return!0;d=this.xhc(g,"nr_external")?"external":"internal";this.cwv(c,this.options.plugins[b]);b=this.aurlp(this.options.tracking_url,{plugin:this.options.plugins[b].shortname,type:d,domain:this.options.domain,src_url:c.nr_src_url||window.location.href,dest_url:this.clicked_link=g.href,widget_id:c.nr_widget_id||this.options.plugins[b].widget_id,page_type_id:this.options.plugins[b].page_type_id,page_type:this.options.plugins[b].page_type,geo:this.options.plugins[b].geo,
article_id:this.options.plugins[b].article_id,pr_id:this.get_print_id()});"referrer"in document&&document.referrer&&(b=this.aurlp(b,{referrer:document.referrer}));if(c=this.parse_json(this.get_data_attr(g,"tracking-params")))b=this.aurlp(b,c);if(c=this.parse_json(this.get_data_attr(g,"link-params")))this.clicked_link=this.aurlp(this.clicked_link,c);this.middle_click=2==a.which||a.ctrlKey||a.metaKey||"_blank"==g.target?!0:!1;ifr=document.createElement("iframe");ifr.id="nr_clickthrough_frame_"+Math.ceil(100*
Math.random());ifr.frameBorder="0";ifr.allowTransparency="true";ifr.style.height="0px";ifr.style.width="0px";ifr.style.display="none";this.bind(ifr,"load",function(){e.clicked_link&&!e.middle_click&&(window.location.href=e.clicked_link);g.nr_original_link&&(g.href=g.nr_original_link,g.nr_original_link=null);e.middle_click=e.clicked_link=!1});ifr.src=b;document.body.insertBefore(ifr,document.body.firstChild);if(this.middle_click)return g.nr_original_link=g.href,g.href=this.clicked_link,!0;this.prevent_default(a);
return!1},bvc:function(){if(!this.views_handler_bound){var a=this;this.bind(window,"scroll",function(){a.vch.apply(a)});this.bind(window,"resize",function(){a.vch.apply(a)});this.views_handler_bound=!0}},vch:function(){var a,b,c,d,e=this.xScrollTop()+this.xClientHeight(),g=this.xScrollLeft()+this.xClientWidth();for(a in this.options.plugins)if(this.is_array(this.options.plugins[a].cts))for(c=0,d=this.options.plugins[a].cts.length;c<d;c++)b=this.options.plugins[a].cts[c],b.nr_count_views&&!b.nr_viewed&&
(b.nr_top_distance=this.xPageY(b)+0.9*this.xHeight(b),b.nr_left_distance=this.xPageX(b)+0.9*this.xWidth(b),e>=b.nr_top_distance&&g>=b.nr_left_distance&&this.cwv(b,this.options.plugins[a]))},cwv:function(a,b){var c;a.nr_count_views&&!a.nr_viewed&&(a.nr_viewed=!0,this.xac(a,"nr_viewed"),c=this.aurlp(this.options.views_url,{plugin:b.shortname,domain:this.options.domain,url:a.nr_src_url||window.location.href,widget_id:b.widget_id,page_type_id:b.page_type_id,page_type:b.page_type,geo:b.geo,pr_id:this.get_print_id(),
top:a.nr_top_distance,left:a.nr_left_distance,api_time:a.nr_widget_initialized_time-a.nr_api_call_time,page_size:this.xDocSize()}),a.nr_all_units_blocked?c=this.aurlp(c,{all_units_blocked:1}):a.nr_all_partners_blocked&&(c=this.aurlp(c,{all_partners_blocked:1})),this.lr(c,a.id+"_view"))},aa:function(a){if((a=this.xgebi(a))&&0!=(a=this.xgebcn("nr_sponsored","span",a)).length){var b,c,d=this,e=new r;b=0;for(c=a.length;b<c;b++)this.bind(a[b],"mouseover",function(a){a=d.evtsrc(a);e.css(a,"left",0,150,
5)}),this.bind(a[b],"mouseout",function(a){a=d.evtsrc(a);var b=d.xWidth(a.parentNode)-18;e.css(a,"left",b,150,5)})}},pr:function(a){var b,c,d,e,g=this;if(0!=(e=this.xgebcn("nr_remove","span",a)).length)for(b=0,c=e.length;b<c;b++)d=e[b],this.bind(d,"click",function(b){var c,d,e,f;d=g.evtsrc(b);e=d.parentNode;c=g.parse_json(g.get_data_attr(e,"tracking-params")).nrid;confirm("Are you sure to remove this unit?\n\nYou can undo this later on partners.nrelate.com")&&(f=g.xhc(e,"nr_partner")?"ad":g.xhc(e,
"nr_external")?"external":"internal",c=g.aurlp(g.options.remove_url,{nrid:c,domain:g.options.domain,ct_id:a.id,nr_type:f,pr_id:g.get_print_id()}),g.lr(c),e.removeChild(d),d=new r,d.opacity(e,0.2,500,5));g.prevent_default(b)})},prc:function(a,b){var c,d;if(!(a=this.xgebi(a)))return!1;b&&(c=new n(b),c.show());if(c=this.xgebi(a.id+"-api_call"))d=c.parentNode,d.removeChild(c);a.nr_api_called=!1;this.lr(this.aurlp(a.nr_api_url,{reload_uc:1}),a.id+"-api_call")},wtl:function(a,b,c){var d,e,g=this;if(0==
this.xgebcn("nr_link","a",a).length)return!1;e=document.createElement("div");e.style.fontSize="0.7em";e.style.color="#AAA";e.style.textAlign="right";e.style.clear="both";d=document.createElement("span");d.innerHTML=c.whats_this_content||this.options.whats_this_content||b.whats_this_content;d.title="about these links";d.style.cursor="pointer";this.xac(d,"nr_about");e.appendChild(d);a.appendChild(e);this.bind(d,"click",function(a){var d,e=b.fullname+"_whats_this_dialog";g.xgebi(e)||(d=document.createElement("iframe"),
d.id=e,d.src=c.whats_this_url||b.whats_this_url,d.style.width="100%",d.style.height="150%",d.style.border="0px",d.setAttribute("border","0"),document.body.appendChild(d));d={};c.whats_this_width&&(d.width=c.whats_this_width);c.whats_this_height&&(d.height=c.whats_this_height);(new n(e,d)).show();g.prevent_default(a)})},ucs:function(a,b,c){var d,e,g,h,f=this;if(!c.did||0==(h=this.xgebcn("nr_link","a",a)).length)return!1;this.tuc(a,b,c);b=0;for(d=h.length;b<d;b++)e=document.createElement("span"),this.xac(e,
"nr_uc_btns"),g=document.createElement("span"),this.xac(g,"uc_btn"),g.innerHTML="&#x2715;",e.appendChild(g),h[b].appendChild(e),this.bind(g,"click",function(b){var d,e,g,h,n,q;f.prevent_default(b);h=f.xgebcn("nr_uc_dialog","*",a);n=0;for(q=h.length;n<q;n++)f.xrc(h[n].parentNode.firstChild,"reduce_opacity"),f.xrc(h[n].parentNode.firstChild.nextSibling,"reduce_opacity"),h[n].parentNode.removeChild(h[n]);d=f.evtsrc(b).parentNode.parentNode;e=f.parse_json(f.get_data_attr(d,"tracking-params")).nrid;h=
document.createElement("div");f.xac(h,"nr_uc_dialog");f.xac(d.firstChild,"reduce_opacity");f.xac(d.firstChild.nextSibling,"reduce_opacity");h.innerHTML='<p>Tell us why?</p><ul class="nr-uc-hide-options dropdown-menu"><li><a rel="1">Unrelated</a></li><li><a rel="2">Offensive</a></li><li><a rel="3">Too &ldquo;salesy&rdquo;</a></li><li><a rel="4">Repetitive</a></li><li><a rel="5">Other</a></li><li class="divider"></li><li class="nr-uc-dont-hide"><a rel="0">Don&rsquo;t hide it</a></li></ul>';d.appendChild(h);
f.bind(h,"click",function(b){var l;f.prevent_default(b);b=f.evtsrc(b);"li"==b.tagName.toLowerCase()&&(b=b.firstChild);"a"==b.tagName.toLowerCase()&&(l=parseInt(b.rel));l?(l=f.aurlp(f.options.uc_url,{nrid:e,did:c.did,ct_id:a.id,r_id:l}),f.lr(l),d.removeChild(h),g=new r,g.opacity(d,0.2,500,5)):0===l&&(d.removeChild(h),f.xrc(d.firstChild,"reduce_opacity"),f.xrc(d.firstChild.nextSibling,"reduce_opacity"));return!1})})},tuc:function(a,b,c,d){var e,g,f,m=this;(e=this.xgebcn("nr_uc_toggle","div",a)[0])||
(e=document.createElement("div"),this.xac(e,"nr_uc_toggle"),g=document.createElement("span"),this.xac(g,"nr_uc_button glyphicon glyphicon-toggle"),f=document.createElement("div"),this.xac(f,"nr_uc_desc show-info"),f.innerHTML='<p class="uc_on_msg">  Click to turn on user control</p><p class="uc_off_msg"> Click to turn off user control</p><p class="uc_desc">Our new user control tool filters out content you dislike, and puts you in charge of what you read. Simply &lsquo;x&rsquo; out items you don&rsquo;t wish to see, and they will no longer pop up on this network. Then, enjoy quality content within a personalized user experience designed by you!</p>',
e.appendChild(g),e.appendChild(f),a.insertBefore(e,a.firstChild),this.bind(g,"click",function(){m.tuc(a,b,c,!0)}));d&&(a.nr_uc_enabled=!a.nr_uc_enabled);a.nr_uc_enabled?(this.xac(a,"nr_uc_enabled"),this.xrc(a,"nr_uc_disabled")):(this.xac(a,"nr_uc_disabled"),this.xrc(a,"nr_uc_enabled"))},cab:function(a){var b,c,d,e=!1,g={partner:0,internal:0,external:0},f=this.xgebcn("nr_link","*",a),m=this;b=0;for(c=f.length;b<c;b++){if(0<(d=this.xgebcn("nr_img","img",f[b])).length&&(d=d[0],!d.complete||"undefined"!=
typeof d.naturalHeight&&0==d.naturalHeight))return this.debug("%o wasn't fully loaded at the time cab checked. Will try again later",d.src),setTimeout(function(){m.cab(a)},250),!1;d=this.xhc(f[b],"nr_partner")?"partner":this.xhc(f[b],"nr_external")?"external":"internal";0==this.xHeight(f[b])&&(e=!0,g[d]++)}a.nr_all_partners_blocked=!1;a.nr_all_units_blocked=!1;e&&(b=this.aurlp(this.options.report_blocked_url,{pr_id:this.get_print_id(),widget_id:a.nr_widget_id,url:a.nr_src_url,domain:this.options.domain,
plugin:this.options.plugins[a.nr_plugin].shortname}),b=this.aurlp(b,g),a.nr_all_partners_blocked=this.xgebcn("nr_partner","*",a).length==g.partner?1:0,a.nr_all_units_blocked=this.xgebcn("nr_link","*",a).length==g.partner+g.internal+g.external?1:0,b=this.aurlp(b,{all_partners_blocked:a.nr_all_partners_blocked,all_units_blocked:a.nr_all_units_blocked}),this.lr(b));a.nr_all_units_blocked&&this.xac(a,"nr_partners");this.vch()},bdr:function(a,b){if(a){b=b?b:a.name?a.name+"()":"anonymous function";var c=
[];1<arguments.length&&(c=Array.prototype.slice.call(arguments,1));this.is_dom_ready?(this.debug("domReady already reached: calling %s",b),a.apply(this,Array.prototype.slice.call(c))):this.domready_callbacks[this.domready_callbacks.length]=function(){this.debug("Async calling %s",b);return a.apply(this,Array.prototype.slice.call(c))}}var d=this;(function(){if(!d.is_domready_bound){d.is_domready_bound=!0;if("complete"===document.readyState)return setTimeout(function(){d.dr.call(d)},1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",
function(){d.drsc.call(d)},!1),window.addEventListener("load",function(){d.debug("window.load triggered");d.dr()},!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){d.drsc.call(d)});window.attachEvent("onload",function(){d.debug("window.onload triggered");d.dr()});var a=!1;try{a=null==window.frameElement}catch(b){}document.documentElement.doScroll&&a&&d.iesc(d)}}})()},drsc:function(){document.addEventListener?(this.debug("DOMContentLoaded triggered"),document.removeEventListener("DOMContentLoaded",
arguments.callee,!1),this.dr()):document.attachEvent&&"complete"===document.readyState&&(this.debug("onreadystatechange triggered with document.readyState == complete"),document.detachEvent("onreadystatechange",arguments.callee),this.dr())},dr:function(){if(!this.is_dom_ready){var a;this.debug("domReady reached");if(!document.body)return this.debug("IE body not defined"),setTimeout(this.dr,1);this.is_dom_ready=!0;if(this.domready_callbacks)for(a in this.domready_callbacks)this.is_function(this.domready_callbacks[a])&&
this.domready_callbacks[a].call(this);this.domready_callbacks=[]}},iesc:function(a){if(!a.is_dom_ready){a.debug("IE scroll check");try{document.documentElement.doScroll("left")}catch(b){setTimeout(function(){a.iesc(a)},1);return}a.dr()}},bind:function(a,b,c,d){if(a=this.xgebi(a))if(b=b.toLowerCase(),a.addEventListener)a.addEventListener(b,c,d||!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var e=a["on"+b];a["on"+b]="function"==typeof e?function(a){e(a);c(a)}:c}},prevent_default:function(a){a.returnValue=
!1;a.cancelBubble=!0;a.stopPropagation&&(a.stopPropagation(),a.preventDefault())},debug:function(){if(this.options.debug_mode&&window.console)if(this.options.browser.msie)try{console.log.apply(console,Array.prototype.slice.call(arguments))}catch(a){console.log(Array.prototype.slice.call(arguments))}else console.log.apply(console,Array.prototype.slice.call(arguments))},extend:function(){var a,b,c,d,e,g=arguments[0]||{},f=1,m=arguments.length,l=!1;"boolean"===typeof g&&(l=g,g=arguments[1]||{},f=2);
for("object"===typeof g||this.is_function(g)||(g={});f<m;f++)if(null!=(e=arguments[f]))for(d in e)a=g[d],c=e[d],g!==c&&(l&&c&&(this.is_plain_object(c)||(b=this.is_array(c)))?(b?(b=!1,a=a&&this.is_array(a)?a:[]):a=a&&this.is_plain_object(a)?a:{},g[d]=this.extend(l,a,c)):void 0!==c&&(g[d]=c));return g},to_slug:function(a){var b="";"string"==typeof a&&(b=a.replace(/[^a-zA-Z0-9]+/g,"-"));return b},get_data_attr:function(a,b){var c;if(c=this.xgebi(a))if(c=c.getAttribute("data-"+b))if("javascript:"==c.substr(0,
11))try{return eval(c.replace("javascript:",""))}catch(d){}else return c;return null},in_array:function(a,b,c){var d;if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},aurlp:function(a,b){var c,d,e,g="&";if(!this.is_object(b))return a;/.*\?.*/.test(a)||(g="?");for(c in b){a=this.rurlp(a,c);if(this.is_object(b[c]))for(e in d=!this.is_array(b[c]),b[c])a+=g+c+"["+(d?encodeURIComponent(e).replace(/'/g,
"%27"):"")+"]="+encodeURIComponent(b[c][e]).replace(/'/g,"%27");else a+=g+c+"="+encodeURIComponent(b[c]).replace(/'/g,"%27");g="&"}return a},rurlp:function(a,b){var c=RegExp("\\?"+b+"=[^&]*&?","gi");a=a.replace(c,"?");c=RegExp("\\&"+b+"=[^&]*&?","gi");a=a.replace(c,"&");return a=a.replace(/(\?|&)$/,"")},gurlp:function(a,b){var c=a.replace("?","&").match(RegExp("\\&"+b+"=([^&]*)&?"));return c&&0<c.length?c[1]:null},parse_json:function(a){var b=null;if(!a||"string"!==typeof a)return null;a=a.replace(/^\s+|\s+$/,
"");try{window.JSON&&window.JSON.parse&&(b=window.JSON.parse(a))}catch(c){}if(this.is_object(b))return b;try{b=(new Function("return "+a))()}catch(d){}return b},create_apip:function(a,b){var c="numeric"==b?"numeric":"general";this.is_defined(this.options.extra_apip[c])||(this.options.extra_apip[c]=[]);0>this.in_array(a,this.options.extra_apip[c])&&(this.options.extra_apip[c][this.options.extra_apip[c].length]=a)},get_print_id:function(){if(!this.print_id){var a;this.print_id="";for(a=0;24>a;a++)this.print_id+=
"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())]}return this.print_id},is_object:function(a){var b={};try{return a&&"[object object]"===b.toString.call(a).toLowerCase()}catch(c){return!1}},is_plain_object:function(a){var b;if(!a||!this.is_object(a)||a.nodeType)return!1;for(b in a);return void 0===b},is_array:function(a){var b={};try{return a&&"[object array]"===b.toString.call(a).toLowerCase()}catch(c){return!1}},is_function:function(a){var b={};try{return a&&
"[object function]"===b.toString.call(a).toLowerCase()}catch(c){return!1}},get_keys:function(a){var b,c=[];for(b in a)c[c.length]=b;return c},regex_escape:function(a){return a.toString().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},is_defined:function(){for(var a=0,b=arguments.length;a<b;++a)if(void 0==arguments[a])return!1;return!0},evtsrc:function(a){var b=null;a.target?b=a.target:a.srcElement&&(b=a.srcElement);3==b.nodeType&&(b=b.parentNode);return b},lr:function(a,b,c){if(!b||!this.xgebi(b)){var d=
!1;"string"==typeof c&&(c={type:c});c=this.extend({type:"script",async:!0,custom_js:""},c);switch(c.type){case "script":if(c.async){var e,g,f,d=document.createElement("div");d.style.display="none";b&&(d.id=b);e=document.createElement("iframe");e.frameBorder="0";e.allowTransparency="true";try{document.body.insertBefore(d,document.body.firstChild)}catch(m){c.async=!1,this.lr(a,b,c)}d.appendChild(e);try{e.contentWindow.document.open()}catch(l){g="javascript:var d=document.open();d.domain='"+document.domain+
"';",e.src=g+"void(0);"}a='<body onload="var d=document;nRelate=window.parent.nRelate;'+c.custom_js+"d.getElementsByTagName('head')[0].appendChild(d.createElement('script')).src='"+a+"';\"></body>";try{f=e.contentWindow.document,f.write(a),f.close()}catch(n){e.src=g+"d.write('"+a.replace(/"/g,'\\"')+"');d.close();"}return d}d=document.createElement("script");d.type="text/javascript";d.src=a;break;case "css":case "link":if(d=document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=
a,this.is_function(c.callback)){e=document.createElement("img");var q=this;e.onerror=function(){c.callback.call(q,b,d)};e.src=a}}d&&(b&&(d.id=b),a=this.xgebtn("head")[0]||document.documentElement,a.insertBefore(d,a.firstChild));return d}},xgebcn:function(a,b,c,d){var e=[],g;a=RegExp("(^|\\s)"+a+"(\\s|$)");b=this.xgebtn(b,c);c=0;for(g=b.length;c<g;++c)a.test(b[c].className)&&(e[e.length]=b[c],d&&d(b[c]));return e},xgebtn:function(a,b){var c=null;a=a||"*";b=this.xgebi(b)||document;this.is_defined(b.getElementsByTagName)?
(c=b.getElementsByTagName(a),"*"!=a||c&&c.length||(c=b.all)):"*"==a?c=b.all:b.all&&b.all.tags&&(c=b.all.tags(a));return c||[]},xgebi:function(a){"string"==typeof a&&(a=document.getElementById?document.getElementById(a):document.all?document.all[a]:null);return a},xgeba:function(a,b,c,d){var e,g,f=[];c=RegExp(c,"i");g=this.xgebtn(a);var m=0;for(e=g.length;m<e;++m)(a=g[m].getAttribute(b))||(a=g[m][b]),"string"===typeof a&&-1!==a.search(c)&&(f[f.length]=g[m],d&&d(g[m]));return f},xhc:function(a,b){return(a=
this.xgebi(a))&&""!=a.className?RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className):!1},xac:function(a,b){if(a=this.xgebi(a)){var c="";a.className.length&&" "!=a.className.charAt(a.className.length-1)&&(c=" ");if(!this.xhc(a,b))return a.className+=c+b,!0}return!1},xrc:function(a,b){if(!(a=this.xgebi(a)))return!1;a.className=a.className.replace(RegExp("(^|\\s)"+b+"(\\s|$)","g"),function(a,b,e){return" "==b&&" "==e?" ":""});a.className=a.className.replace(/^\s+|\s+$/,"");return!0},xPageY:function(a){var b=
0;for(a=this.xgebi(a);a;)this.is_defined(a.offsetTop)&&(b+=a.offsetTop),a=this.is_defined(a.offsetParent)?a.offsetParent:null;return b},xPageX:function(a){var b=0;for(a=this.xgebi(a);a;)this.is_defined(a.offsetLeft)&&(b+=a.offsetLeft),a=this.is_defined(a.offsetParent)?a.offsetParent:null;return b},xHeight:function(a,b){var c,d=0,e=0,g=0,f=0;if(!(a=this.xgebi(a)))return 0;b=isNaN(b)||"number"!==typeof b?-1:0>b?0:Math.round(b);c=this.is_defined(a.style);if(a==document||"html"==a.tagName.toLowerCase()||
"body"==a.tagName.toLowerCase())b=this.xClientHeight();else if(c&&this.is_defined(a.offsetHeight)&&"string"==typeof a.style.height){if(0<=b){"CSS1Compat"==document.compatMode&&(d=this.xGetComputedStyle(a,"padding-top",1),null!==d?(e=this.xGetComputedStyle(a,"padding-bottom",1),g=this.xGetComputedStyle(a,"border-top-width",1),f=this.xGetComputedStyle(a,"border-bottom-width",1)):this.is_defined(a.offsetHeight,a.style.height)&&(a.style.height=b+"px",d=a.offsetHeight-b));b-=d+e+g+f;if(isNaN(b)||0>b)return;
a.style.height=b+"px"}b=a.offsetHeight}else c&&this.is_defined(a.style.pixelHeight)&&(0<=b&&(a.style.pixelHeight=b),b=a.style.pixelHeight);return b},xWidth:function(a,b){var c,d=0,e=0,g=0,f=0;if(!(a=this.xgebi(a)))return 0;b=isNaN(b)||"number"!==typeof b?-1:0>b?0:Math.round(b);c=this.is_defined(a.style);if(a==document||"html"==a.tagName.toLowerCase()||"body"==a.tagName.toLowerCase())b=this.xClientWidth();else if(c&&this.is_defined(a.offsetWidth)&&"string"==typeof a.style.width){if(0<=b){"CSS1Compat"==
document.compatMode&&(d=this.xGetComputedStyle(a,"padding-left",1),null!==d?(e=this.xGetComputedStyle(a,"padding-right",1),g=this.xGetComputedStyle(a,"border-left-width",1),f=this.xGetComputedStyle(a,"border-right-width",1)):this-is_defined(a.offsetWidth,a.style.width)&&(a.style.width=b+"px",d=a.offsetWidth-b));b-=d+e+g+f;if(isNaN(b)||0>b)return;a.style.width=b+"px"}b=a.offsetWidth}else c&&this.is_defined(a.style.pixelWidth)&&(0<=b&&(a.style.pixelWidth=b),b=a.style.pixelWidth);return b},xClientHeight:function(){var a=
0,b=document,c=window;b.compatMode&&"CSS1Compat"!=b.compatMode||!b.documentElement||!b.documentElement.clientHeight?b.body&&b.body.clientHeight?a=b.body.clientHeight:this.is_defined(c.innerWidth,c.innerHeight,b.width)&&(a=c.innerHeight,b.width>c.innerWidth&&(a-=16)):a=b.documentElement.clientHeight;return a},xClientWidth:function(){var a=0,b=document,c=window;b.compatMode&&"CSS1Compat"!=b.compatMode||c.opera||!b.documentElement||!b.documentElement.clientWidth?b.body&&b.body.clientWidth?a=b.body.clientWidth:
this.is_defined(c.innerWidth,c.innerHeight,b.height)&&(a=c.innerWidth,b.height>c.innerHeight&&(a-=16)):a=b.documentElement.clientWidth;return a},xDocSize:function(){var a=document.body,b=document.documentElement,c=0,d=0,e=0,g=0,f=0,m=0,l=0,n=0;b&&(c=b.scrollWidth,d=b.offsetWidth,f=b.scrollHeight,m=b.offsetHeight);a&&(e=a.scrollWidth,g=a.offsetWidth,l=a.scrollHeight,n=a.offsetHeight);return{w:Math.max(c,d,e,g),h:Math.max(f,m,l,n)}},xScrollTop:function(a,b){var c,d=0;!this.is_defined(a)||b||a==document||
"html"==a.tagName.toLowerCase()||"body"==a.tagName.toLowerCase()?(c=window,b&&a&&(c=a),c.document.documentElement&&c.document.documentElement.scrollTop?d=c.document.documentElement.scrollTop:c.document.body&&this.is_defined(c.document.body.scrollTop)&&(d=c.document.body.scrollTop)):(a=this.xgebi(a))&&!isNaN(a.scrollTop)&&"number"==typeof a.scrollTop&&(d=a.scrollTop);return d},xScrollLeft:function(a,b){var c,d=0;!this.is_defined(a)||b||a==document||"html"==a.tagName.toLowerCase()||"body"==a.tagName.toLowerCase()?
(c=window,b&&a&&(c=a),c.document.documentElement&&c.document.documentElement.scrollLeft?d=c.document.documentElement.scrollLeft:c.document.body&&this.is_defined(c.document.body.scrollLeft)&&(d=c.document.body.scrollLeft)):(a=this.xgebi(a))&&!isNaN(a.scrollLeft)&&"number"==typeof a.scrollLeft&&(d=a.scrollLeft);return d},xGetComputedStyle:function(a,b,c){if(!(a=this.xgebi(a)))return null;var d="undefined",e=document.defaultView;if(e&&e.getComputedStyle)(a=e.getComputedStyle(a,""))&&(d=a.getPropertyValue(b));
else if(a.currentStyle)d=a.currentStyle[this.xCamelize(b)];else return null;return c?parseInt(d)||0:d},xOpacity:function(a,b){var c=this.is_defined(b);if(!(a=this.xgebi(a)))return 2;"string"==typeof a.style.opacity?c?a.style.opacity=b+"":b=parseFloat(a.style.opacity):"string"==typeof a.style.filter?c?a.style.filter="alpha(opacity="+100*b+")":a.filters&&a.filters.alpha&&(b=a.filters.alpha.opacity/100):"string"==typeof a.style.MozOpacity?c?a.style.MozOpacity=b+"":b=parseFloat(a.style.MozOpacity):"string"==
typeof a.style.KhtmlOpacity&&(c?a.style.KhtmlOpacity=b+"":b=parseFloat(a.style.KhtmlOpacity));return isNaN(b)?1:b},xCamelize:function(a){var b,c,d;c=a.split("-");d=c[0];for(a=1;a<c.length;++a)b=c[a].charAt(0),d+=c[a].replace(b,b.toUpperCase());return d},options:{auto_invoke:"undefined"!=typeof window.nr_manual?!window.nr_manual:!0,posts_only:"undefined"!=typeof window.nr_posts_only?window.nr_posts_only:!1,debug_mode:/.*\?.*nrelate_debug=.*/.test(window.location)||Boolean(window.nr_debug),debug_cs_api_url:"http://staticrepo.nrelate.com/custom-script/1.0/dev/",
debug_css_api_url:"http://staticrepo.nrelate.com/custom-style/dev/",manual_ph_only:!0},constants:{version:"0.52.7",domain:"undefined"!=typeof window.nr_domain?window.nr_domain:window.location.hostname,cs_api_url:"http://js.nrcdn.com/custom-script/1.0/",css_api_url:"http://css.nrcdn.com/custom-style/",default_stylesheet_url:"http://css.nrcdn.com/custom-style/default.min.css",tracking_url:"http://t.nrelate.com/tracking/",remove_url:"http://api.nrelate.com/rcw_js/0.52.7/nr_removeID.php",report_blocked_url:"http://bl-1.nrelate.com/common/report_blocked.php",
views_url:"http://vt-1.nrelate.com/vt/",on_load_track_url:"http://ol-1.nrelate.com/ol/",uc_url:"http://api.nrelate.com/rcw_wp/nr_uc_update.php",print_id:!1,extra_apip:{}},nr_load_time:window.nr_load_time,nr_cs_load_time:0,nr_parse_time:0,is_initialized:!1,custom_scripts_loaded:!1,is_home_page:!1,plugins_sanitized:!1,views_handler_bound:!1,middle_click:!1,clicked_link:!1,is_dom_ready:!1,is_domready_bound:!1,domready_callbacks:[]},q=navigator.userAgent.toLowerCase();f.options.ua=q;f.options.browser=
{version:(q.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(q),opera:/opera/.test(q),msie:/msie/.test(q)&&!/opera/.test(q),mozilla:/mozilla/.test(q)&&!/(compatible|webkit)/.test(q)};q={cts:[],pls:[],kws:[],phs:[],supported_cssstyles:[null,"default","bty","dhot","huf","tre","toon","pol","loud","nsq","til","engadget","none","custom"],supported_thumbsizes:[null,110,80,90,100,120,130,140,150],supported_ad_places:[null,"First","Last","Mixed","Separate"],supported_widgetstyles:[null,
1,0],whats_this_url:"http://static.nrelate.com/common_js/sponsor_disclaimer.html",count_views:!0,should_load:function(a){return this.is_home_page&&this.options.posts_only?!1:!0},_defaults:{whats_this_link:!1,whats_this_content:"about these links",widget_id:null,page_type_id:null,page_type:null,geo:null,article_id:null}};f.plugin_helpers={related:f.extend(!0,{},q,{api_url:"http://api.nrelate.com/rcw_wp/"+f.constants.version+"/",shortname:"rc",fullname:"related"}),rsearch:f.extend(!0,{},q,{api_url:"http://api.nrelate.com/rcw_wp/"+
f.constants.version+"/",shortname:"rs",fullname:"rsearch"}),mapps:f.extend(!0,{},q,{api_url:"https://api.offercastmobile.com/appwall/45.jsonp",shortname:"ma",fullname:"mapps",_defaults:{access_token:"",nomappsposts:2},capip:function(a,b,c){return a=this.aurlp(a,{access_token:b.access_token,jsonCallback:"nRelate.sw",sessionid:this.get_print_id(),ct_id:c.id,totalCampaignsRequested:b.nomappsposts?b.nomappsposts:2})},csct:function(a,b,c){var d;0<(c=this.xgebcn("nr-appwall-impression-json","*",b)).length&&
0<(d=this.xgebcn("nr-appwall-impression-url","*",b)).length&&(d=d[0].value,imp_json_str=JSON.stringify(c[0].value),d=this.aurlp(d,{access_token:a.access_token}),a=new XMLHttpRequest,a.open("POST",d),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(imp_json_str));b=this.aurlp(this.options.on_load_track_url,{pr_id:this.get_print_id(),widget_id:b.nr_widget_id,url:b.nr_src_url,domain:this.options.domain,plugin:this.options.plugins[b.nr_plugin].shortname});this.lr(b)}}),popular:f.extend(!0,
{},q,{api_url:"http://api.nrelate.com/mpw_wp/"+f.constants.version+"/",loadcounter_url:"http://api.nrelate.com/mpw_wp/"+f.constants.version+"/loadcounter.php",shortname:"mp",fullname:"popular",loadcounter_log:{},should_load:function(a){this.create_apip("maxageposts","numeric");if(!this.is_home_page&&0==a.cts.length){var b=window.nr_pageurl?{href:window.nr_pageurl}:this.dfpl(a.fullname)[0]||{href:document.location.href};if(!this.is_defined(a.loadcounter_log[b.href])){var c=this.aurlp(a.loadcounter_url,
{tag:"nrelate_"+a.fullname,domain:this.options.domain,url:b.href});a.loadcounter_log[b.href]=c;this.lr(c)}}return!0},capip:function(a,b,c){a=this.aurlp(a,{increment:this.is_home_page?0:1});this.is_home_page&&(a=this.aurlp(a,{source:"hp"}));return a}}),texchange:f.extend(!0,{},q,{api_url:"http://api.nrelate.com/rcw_wp/"+f.constants.version+"/",shortname:"tx",fullname:"texchange"}),flyout:f.extend(!0,{},q,{api_url:"http://api.nrelate.com/fow_wp/"+f.constants.version+"/",shortname:"fo",fullname:"flyout",
home_page_only:!0,supported_thumbsizes:[null,90,80,100,110,120,130,140,150],supported_animstyles:[null,"nyt","simple","simplydk","centered","centereddk"],supported_animations:[null,"slideout","fade"],supported_locations:[null,"right","left"],supported_flyout_offsets:[null,1,2,3,4],csnt:function(a){0>this.in_array(a.animstyle,a.supported_animstyles)&&(a.animstyle=a.supported_animstyles[0]);0>this.in_array(a.animation,a.supported_animations)&&(a.animation=a.supported_animations[0]);0>this.in_array(a.location,
a.supported_locations)&&(a.location=a.supported_locations[0]);0>this.in_array(a.offset,a.supported_flyout_offsets)&&(a.offset=a.supported_flyout_offsets[0]);a.offset_node=null},capip:function(a,b,c){var d,e="width widthtype frombot frombottype animstyle animation location offset element".split(" ");for(c=0;c<e.length;c++)b[e[c]]&&(d={},d[e[c]]=b[e[c]],a=this.aurlp(a,d));return a},csct:function(a,b,c){var d,e=this;a.animstyle=c.animstyle||a.animstyle||a.supported_animstyles[1];a.animation=(c.animation||
a.animation||a.supported_animations[1]).toLowerCase();a.location=(c.location||a.location||a.supported_locations[1]).toLowerCase();this.xac(b,"nrelate_animate_style_"+a.animstyle);this.xac(b,"nr_animate_type_"+a.animation);this.xac(b,"nr_"+a.animation+"_"+a.location);a.width=c.width||a.width||360;a.widthtype=c.widthtype||a.widthtype||"px";a.frombot=c.frombot||a.frombot||0;a.frombottype=c.frombottype||a.frombottype||"px";b.style.width=a.width+a.widthtype;b.style.bottom=a.frombot+a.frombottype;(fo_open=
this.xgebi("nrelate_flyout_open"))||(fo_open=document.createElement("div"),fo_open.id="nrelate_flyout_open",this.xac(fo_open,"nrelate_animate_style_"+a.animstyle),this.xac(fo_open,"nr_"+a.animation+"_"+a.location),document.body.insertBefore(fo_open,b.nextSibling),this.bind(fo_open,"click",function(){a.fo_animate_open.call(e,a,b);a.fo_animate_close.call(e,a,b,fo_open);s.del("nr_fo_closed")}));b.style.display="none";b.style[a.location]="0px";fo_open.style.display="none";fo_open.style[a.location]="0px";
fo_open.style.bottom=a.frombot+a.frombottype;if(d=this.xgebi("nrelate_flyout_close"))d.style.background="#fff url(http://static.nrelate.com/common_js/close_window.gif) no-repeat 0 0",this.bind(d,"click",function(){a.fo_animate_close.call(e,a,b);a.fo_animate_open.call(e,a,b,fo_open);s.set("nr_fo_closed","true",7,"/")});a.offset=c.offset||a.offset||1;a.element=c.element||a.element||null;a.hscroll.call(e,null,a,b);this.bind(window,"scroll",function(c){a.hscroll.call(e,c,a,b)})},hscroll:function(a,b,
c){var d;if(!nRelate.flyout_show)return!1;a=b.should_open.call(this,b);if("true"==s.get("nr_fo_closed")){if(!(d=this.xgebi("nrelate_flyout_open")))return!1;a?b.fo_animate_open.call(this,b,c,d):b.fo_animate_close.call(this,b,c,d);return!1}a?b.fo_animate_open.call(this,b,c):b.fo_animate_close.call(this,b,c)},fo_animate_open:function(a,b,c){var d=new r,e=this;c=c||b;if(this.xhc(c,"nr_animating|nr_fo_opened"))return!1;this.xac(c,"nr_animating");this.xrc(c,"nr_fo_opened|nr_fo_closed");c.style.display=
"block";"slideout"==a.animation?(c.style[a.location]="-"+(this.xWidth(c)+40)+"px",d.css(c,a.location,0,400,5,0,function(){e.xrc(this.e,"nr_animating");e.xac(this.e,"nr_fo_opened")})):"fade"==a.animation&&d.opacity(c,1,400,5,0,function(){e.xrc(this.e,"nr_animating");e.xac(this.e,"nr_fo_opened")})},fo_animate_close:function(a,b,c){var d=new r,e=this;c=c||b;if(this.xhc(c,"nr_animating|nr_fo_closed"))return!1;this.xac(c,"nr_animating");this.xrc(c,"nr_fo_opened|nr_fo_closed");"slideout"==a.animation?d.css(c,
a.location,-1*(this.xWidth(c)+40),400,5,0,function(){e.xrc(this.e,"nr_animating");e.xac(this.e,"nr_fo_closed");this.e.style.display="none"}):"fade"==a.animation&&d.opacity(c,0,400,5,0,function(){e.xrc(this.e,"nr_animating");e.xac(this.e,"nr_fo_closed");this.e.style.display="none"})},should_open:function(a){var b=!1,b=this.xScrollTop(window,!0),c=this.xClientHeight(),d=this.xDocSize();a.offset_node||(4==a.offset?(a.offset_node="."==a.element[0]?this.xgebcn(a.element.replace(".",""))[0]:this.xgebi(a.element.replace("#",
"")),a.offset_node||(a.offset=1)):3==a.offset&&(a.offset_node=!0),a.offset_node||(a.offset_node=a.fo_faph.call(this,a)),a.offset_node||(a.offset=0,a.offset_node=!0));switch(a.offset){case 1:b=b+c>=this.xPageY(a.offset_node)+this.xHeight(a.offset_node)/2;break;case 2:b=b+c>=this.xPageY(a.offset_node)+this.xHeight(a.offset_node);break;case 3:b=b+c>=d.h;break;case 4:b=b+c>=this.xPageY(a.offset_node);break;default:b=b+c>=d.h/2}return b},should_load:function(a){if(this.is_home_page)return!1;a=navigator.userAgent||
navigator.vendor||window.opera;return/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))?!1:!0},fo_faph:function(a){a=this.dfph(a.fullname)[0];this.debug("fo_faph result: %o",a);return a},fph:function(a){return[document.body]}})};r.prototype.axes=function(a){var b;if(!this.a||this.a.length!=a)for(this.a=[],b=0;b<a;++b)this.a[b]={i:0,t:0,d:0,v:0}};r.prototype.init=function(a,b,c,d,e,g,h){this.e=f.xgebi(a);this.t=b;this.or=c;this.ot=d;this.oe=e;this.at=g||0;this.v=r.vf[this.at];this.qc=1+(h||0);this.fq=1/this.t;0<this.at&&4>this.at&&(this.fq=this.fq*this.qc*Math.PI,1==this.at||2==this.at)&&
(this.fq/=2);for(a=0;a<this.a.length;++a)this.a[a].d=this.a[a].t-this.a[a].i};r.prototype.run=function(a){var b,c,d,e=this;a||(e.t1=(new Date).getTime());e.tmr||(e.tmr=setInterval(function(){e.et=(new Date).getTime()-e.t1;if(e.et<e.t){e.f=e.v(e.et*e.fq);for(b=0;b<e.a.length;++b)e.a[b].v=e.a[b].d*e.f+e.a[b].i;e.or(e)}else{clearInterval(e.tmr);e.tmr=null;c=e.qc%2;for(b=0;b<e.a.length;++b)e.a[b].v=c?e.a[b].t:e.a[b].i;e.ot(e);d=!1;"function"==typeof e.oe?d=e.oe(e):"string"==typeof e.oe&&(d=eval(e.oe));
d&&e.resume(1)}},e.res))};r.prototype.pause=function(){clearInterval(this.tmr);this.tmr=null};r.prototype.resume=function(a){"undefined"==typeof this.tmr||this.tmr||(this.t1=(new Date).getTime(),a||(this.t1-=this.et),this.run(!a))};r.prototype.css=function(a,b,c,d,e,g,h){function m(a){a.e.style[a.prop]=Math.round(a.a[0].v)+"px"}this.axes(1);this.a[0].i=f.xGetComputedStyle(a,b,!0);this.a[0].t=c;this.prop=f.xCamelize(b);this.init(a,d,m,m,h,e,g);this.run()};r.prototype.opacity=function(a,b,c,d,e,g){function h(a){f.xOpacity(a.e,
a.a[0].v)}this.axes(1);this.a[0].i=f.xOpacity(a);this.a[0].t=b;this.init(a,c,h,h,g,d,e);this.run()};r.vf=[function(a){return a},function(a){return Math.abs(Math.sin(a))},function(a){return 1-Math.abs(Math.cos(a))},function(a){return(1-Math.cos(a))/2},function(a){return 1-Math.exp(6*-a)},function(a){return-Math.cos(a*Math.PI)/2+0.5}];var s={get:function(a){return(a=document.cookie.match(RegExp("(^|;)\\s*"+a+"=([^;\\s]*)")))&&3<=a.length?unescape(a[2]):null},set:function(a,b,c,d,e,f){if(c){var h=new Date;
h.setTime(h.getTime()+864E5*c)}document.cookie=a+"="+escape(b)+(c?"; expires="+h.toGMTString():"")+"; path="+(d||"/")+(e?"; domain="+e:"")+(f?"; secure":"")},del:function(a,b,c){this.set(a,"",-1,b,c)}};n.prototype.show=function(){660>f.xClientWidth()||590>f.xClientHeight()?(this.dialog.style.width=parseInt(0.9*f.xClientWidth())+"px",this.dialog.style.height="590px"):(this.dialog.style.width="660px",this.dialog.style.height="540px");var a=n.grey;this.is_opened=!0;a&&(this.dialog.greyZIndex=f.xGetComputedStyle(a,
"z-index",1),a.style.zIndex=f.xGetComputedStyle(this.dialog,"z-index",1)-1);this.dialog&&this.center()};n.prototype.center=function(){var a=f.xClientWidth(),b=f.xClientHeight(),c=n.grey;f.is_defined(this.dialog.max_dimensions)||(this.dialog.max_dimensions={width:this.dialog.offsetWidth-30,height:this.dialog.offsetHeight});this.dialog.style.width=660<a?"660px":parseInt(0.9*a)+"px";660<a?this.dialog.style.height="540px":400<a?this.dialog.style.height="590px":300<a&&(this.dialog.style.height="690px");
this.dialog.style.left=Math.max(0,(a-this.dialog.offsetWidth)/2)+"px";this.dialog.style.top=Math.max(0,f.xScrollTop()+(b-this.dialog.offsetHeight)/2)+"px";c&&(c.style.left="0px",c.style.top="0px",c.style.width=a+"px",c.style.height=b+"px")};n.prototype.hide=function(a){var b=n.grey;this.is_opened=!1;b&&(a||(b.style.left="-10px",b.style.top="-10px",b.style.width="10px",b.style.height="10px"),this.dialog&&(b.style.zIndex=this.dialog.greyZIndex,this.dialog.style.left=-this.dialog.offsetWidth+"px",this.dialog.style.top=
"0px"))};n.grey=null;n.instances={};return{setup:function(){return f.init.apply(f,Array.prototype.slice.call(arguments))},bind_dom_ready:function(){return f.bdr.apply(f,Array.prototype.slice.call(arguments))},acs:function(){return f.acs.apply(f,Array.prototype.slice.call(arguments))},sw:function(){return f.sw.apply(f,Array.prototype.slice.call(arguments))},prc:function(){return f.prc.apply(f,Array.prototype.slice.call(arguments))},fah:function(){return f.fah.apply(f,Array.prototype.slice.call(arguments))},
auto_invoke:f.options.auto_invoke,xgebi:function(){return f.xgebi.apply(f,Array.prototype.slice.call(arguments))},xgebcn:function(){return f.xgebcn.apply(f,Array.prototype.slice.call(arguments))},xgeba:function(){return f.xgeba.apply(f,Array.prototype.slice.call(arguments))},xgebtn:function(){return f.xgebtn.apply(f,Array.prototype.slice.call(arguments))},xrc:function(){return f.xrc.apply(f,Array.prototype.slice.call(arguments))},parse_json:function(){return f.parse_json.apply(f,Array.prototype.slice.call(arguments))},
get_data_attr:function(){return f.get_data_attr.apply(f,Array.prototype.slice.call(arguments))},lr:function(){return f.lr.apply(f,Array.prototype.slice.call(arguments))},debug:function(){return f.debug.apply(f,Array.prototype.slice.call(arguments))},cookie:s}}();var _comscore=_comscore||[],comscore_src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";_comscore.push({c1:"7",c2:"16479758",c3:"1"});nRelate.lr(comscore_src,"nrelate-tracking",{async:!1});
if(nRelate.auto_invoke){var script_tag,inline_options;(script_tag=nRelate.xgebi("nrelate_loader_script"))&&(inline_options=nRelate.parse_json(nRelate.get_data_attr(script_tag,"nrelate-options")))?nRelate.debug("Inline options found: %o",inline_options):inline_options={};nRelate.setup(inline_options)}nRelate.bind_dom_ready()};
