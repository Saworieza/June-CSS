(function(){var n,z;(function(){var b=this,d={};n=function(b,a){n[b]=a};z=function(c){if(z[c]===d)throw"Circular require";if(!n[c])throw"Unknown require: "+c;return z[c]||(z[c]=d)&&(z[c]=new function(){return n[c](this,z,b)||this})}})();n("adm-events",function(b,d){var c=d("util"),a=d("store"),i=d("routes"),g=b.COOKIE_SERVICE_TTL=30*a.MINUTES,e=b.EVENT_TTL=2*a.DAYS,f=b.prefix="e_",h=b.knownEventIds=[];b.addEventId=function(a){c.contains(h,a)||h.push(a)};var l=b.parse=function(a){a=a.split("&");return{id:a.shift(),
attrs:c.parseKeyValues(a.join("&"))}},j=b.stringify=function(a){return a.id+"&"+c.paramString(a.attrs)},q=b.storeEvent=function(b,c){c=c||0;a.set(f+j(b),1,e-c)},o=b.processEvent=function(a){var b="event_"+a.id;c.set(b,!0);c.eachHash(a.attrs,function(a,e){var f=b+"_attr_"+a,f=c.get(f)||c.set(f,[]);c.contains(f,e)||f.push(e)})},k=b.readFromStore=function(){var b=a.namespace(f);c.eachHash(b,function(a){o(l(a))})},s=b.process3rdParty=function(a){var b=/^e_(.*)/,e;c.eachHash(a,function(f){if(e=f.match(b)){var k=
l(e[1].replace(/\^/g,"&").replace(/\|/g,"="));c.contains(h,k.id)&&(f=(new Date-new Date(parseInt(a[f],10)))/1E3,q(k,f),o(k))}})};b.check3rdParty=function(){h.length&&!a.get("event3p")&&d("http").jsonp({url:c.get("url_cookies")||"//beacon.krxd.net/cookie2json",callback:"kxjsonp_3pevents",done:function(b){a.set("event3p","1",g);s(b)}})};k();i.simple("admEvent",function(a,b){var e={id:a,attrs:b};q(e);o(e);d("http").pixel({url:c.get("url_event"),data:c.extend({event_id:a,pub_id:c.get("pubid")},b)})})});
n("class",function(b,d){var c=d("util"),a=b.beget=function(a,b){function e(){this.constructor=b}c.extend(b,a);e.prototype=a.prototype;b.prototype=new e;return b};(b.Class=c.extend(function(){var a=arguments;c.each(this._class.initializers,function(b,c){c.apply(this,a)},this)},{extensions:{extension:[/^extension_(.+)/,function(a,b){var e={};e[a[1]]=b;this.extensions=c.extend(this.extensions||{},e)}]},mixin:function(a){c.isFunction(a)?a(this):c.each(a,c.bind(this.mixinProperty,this))},mixinProperty:function(a,
b){var e;c.some(this.extensions,function(c,h){if(e=a.match(h[0]))return h[1].call(this,e,b)||!0},this)||(this.prototype[a]=b)}})).mixin({_bind:function(a){c.each(a.split(" "),function(a){this[a]=c.bind(this[a],this)},this)},_apply:function(a,b){this[a].apply(this,b)},_super:function(a,b){var e,f=this._superctx;this._superctx=(this._superctx||this)._superproto;c.isString(a)?e=this._superctx[a].apply(this,b||[]):this._superctx.constructor.apply(this,a||[]);this._superctx=f;return e},extension_classMethod:[/^__(.+)/,
function(a,b){this[a[1]]=b}],extension_initialier:[/^_init_(.+)/,function(a,b){var e={};e[a[1]]=b;this.initializers=c.extend(this.initializers||{},e)}],__extend:function(b){a(this,b).construct(this,c.rest(arguments,1));return b},__construct:function(a,b){this.prototype._superproto=a.prototype;this.prototype._class=this;if(!this.name){var e=this.toString().match(/function\s+([^\(]+)/);e&&(this.name=e[1])}c.each(b,function(a){this.mixin(a)},this);this.init()},__init:function(){}})});n("client-type",
function(){return{PUBLISHER:0,MARKETER:1}});n("context-terms",function(b,d,c){var a=d("util"),i=c.document,c="a form script noscript style select textarea button".split(" "),g=RegExp("<("+c.join("|")+")\\b","i"),e=RegExp("^("+c.join("|")+")$","i");b.process=function(b){for(var c=[i.body],f="",d;d=c.shift();)3===d.nodeType?f+=d.nodeValue:1===d.nodeType&&!e.test(d.nodeName)&&(g.test(d.innerHTML)?[].unshift.apply(c,a.toArray(d.childNodes)):f+=d.innerText||d.textContent);f=f.replace(/\s\s+/g," ");a.each(b,
function(b){b.matches=0;var c=RegExp("\\b"+a.escapeRegexp(b.value)+"\\b","ig");f.replace(c,function(){b.matches++})});b=a.filter(b,function(b){return a.set("context_term_"+b.id,b.matches)});a.set("context_terms_processed",!0);a.set("page_attr_kx_context_terms",b);a.set("context_terms",a.map(b,function(a){return a.id}));return{text:f,terms:b}};var f=d("pixel"),b=b.pixelFormatter=function(b){return a.map(b,function(a){return a.id+f.tuppleSeparator+a.matches}).join(",")};f.addFormatter("_kpa_kx_context_terms",
b)});n("crypto-util",function(b,d){var c=d("util"),a=function(a,b,c){return(a|b<<24-8*(c%4))>>>0},i=function(a){for(var b=[],c=0;c<a.length;c+=8)b.push(a.substr(c,8));return b};return b={BITS_PER_BYTE:8,BITS_PER_WORD:32,BYTES_PER_WORD:4,MAX_BYTE:255,MAX_WORD:4294967295,WORD_SIZE:32,pad:function(a,b,c){for(var b=b||"0",h=[],c=(c||32)-a.length,l=0;l<c;++l)h.push(b);return h.join("")+a},fromWordToBytesArray:function(a){return c.map(c.range(4),function(b){return a>>>24-8*(b%4)&255})},fromBytesArrayToWord:function(b){return c.reduce(b,
a,0)},toWord:function(a){return b.pad(Number(a).toString(2))},fromWord:function(a){return parseInt(a,2)},toHex:function(a){return Number(a).toString(16)},fromHex:function(a){return parseInt(a,16)},rotl:function(a,b,c){return a<<b|a>>>(c||32)-b},rotr:function(a,b,c){return a>>>b|a<<(c||32)-b},fromWordsToLatin1:function(a){return c.map(a,function(a){return c.reduce(b.fromWordToBytesArray(a),function(a,b){return a+String.fromCharCode(b)},"")}).join("")},fromLatin1ToWords:function(a){for(var b=[],c=0,
h=a.length;c<h;c++)b[c>>>2]|=(a.charCodeAt(c)&255)<<24-8*(c%4);return b},fromWordsToUtf8:function(a){try{return decodeURIComponent(escape(b.fromWordsToLatin1(a)))}catch(c){throw Error("Malformed UTF-8 data");}},fromUtf8ToWords:function(a){return b.fromLatin1ToWords(unescape(encodeURIComponent(a)))},fromWordsToHex:function(a){for(var c=b.calculateSigBytesForWords(a),f=[],h=0;h<c;h++){var l=a[h>>>2]>>>24-8*(h%4)&255;f.push((l>>>4).toString(16));f.push((l&15).toString(16))}return f.join("")},fromHexToWords:function(a){return c.map(i(a),
b.fromHex)},calculateSigBytesForWords:function(a){return c.sum(c.map(a,function(a){return c.filter(b.fromWordToBytesArray(a),c.identity).length}))}}});n("data-rewrite",function(b,d){var c=d("util"),a=d("expression"),i=c.rewriter({country:"user_attr_kx_geo_country",sub_section:"subsection",segment:"user_segments"}),g=c.rewriter({"=":"is","!=":"isnt",before:"<",after:">"}),e=b.expression=function(b){var e=g(b.operator),l=i(b.name),j=b.delimiter;c.isArray(b.value)?b="["+b.value.join(",")+"]":(b=b.value,
b=String(b),b=b.match(/,/)?"["+b.split(", ").join(",")+"]":b);var d=function(a,b,e){return c.map(a,function(a){return[b,"$"+e,a]})},o=c.isArray(a.get(l,j)),k=a.parse(b);if(c.isArray(k)){if("is"===e&&(e=o?"intersects":"memberOf"),"isnt"===e&&(e=o?"notIntersects":"notMemberOf"),"url"===l&&!o){if("contains"===e)return["or"].concat(d(k,e,l));if("notContains"===e)return["and"].concat(d(k,e,l))}}else o&&("is"===e&&(e="contains"),"isnt"===e&&(e="notContains"));return[e,"$"+l+(j?":"+j:""),b]};b.tag=function(a){a=
c.extend({},a,{criteria:["and"].concat(c.map(a.criteria,e))});a.freq_cap&&a.criteria.push(["<","$tag_deliveries_today",a.freq_cap]);a.user_percent&&a.criteria.push(["<",["random"],a.user_percent/100]);delete a.rules;/^\s*\/\/@eval\b/.test(a.content)&&(a.method="eval");a.name=a.name||"Anonymous";a.timing=a.timing||"onload";return a};a.setDelimiter("user_segments",",");b.contextTermExpression=function(a){if("is"===g(a.operator))var b=a.occurrences.min||1,a=["or"].concat(c.map(a.values.split(","),function(a){return[">=",
"$context_term_"+a,b]}));else a=["and"].concat(c.map(a.values.split(","),function(a){return["is","$context_term_"+a,0]}));return["and","$context_terms_processed",a]}});n("data",function(b,d,c){var a=d("util"),i=b.root={},g=b.defs={};a.get=b.get=function(a){return i[a.match(/_/)?a:"_"+a]};a.set=b.set=function(b,c){if(!a.isString(b))return a.each(b,a.set);b=b.match(/_/)?b:"_"+b;i[b]=c;a.fire("data:change",{key:b,value:c});return c};a.removeData=b.remove=function(a){delete i[a]};b.raw=function(){return i};
var e=b.define=function(b,c){if(!a.isString(b))return a.each(b,e);g[b]=c},f=b.defaults=function(b,c){if(!a.isString(b))return a.each(b,f);var e=a.get(b);return null==e?a.set(b,c):e},h=b.namespace=function(b,c){var e=b+"_",h,k=RegExp(e+"(.+)"),f=a.attributes({get:function(b){return a.get(e+b)},set:function(b,c){return a.set(e+b,c)},all:function(){var b={};a.eachHash(i,function(a,c){if(null!=(h=a.match(k)))b[h[1]]=c});return b},values:c}),d;f.change=function(b){d||(d=[],a.on("data:change",function(b){null!=
(h=b.key.match(k))&&a.each(d,function(a){a(b)})}));d.push(b)};return f};b.user_attr=h("user_attr");b.page_attr=h("page_attr");d("routes").simple("set",a.set);d("routes").simple("get",a.get);d("routes").regexp(/data:(.+)/,function(a,b){return h(a[1],b)});d=c.navigator;if(d=d.language||d.browserLanguage||d.userLanguage||d.systemLanguage)d=d.replace("_","-"),d=d.toLowerCase();b.user_attr("kx_lang",d);b.user_attr("kx_tech_browser_language",d)});n("dataprovider",function(b,d){var c=d("http"),a=d("util"),
i=b.userMatch=function(b,f,h){c.pixel({url:a.get("url_um"),data:{partner:b,r:f,_kdpid:h}})},g=b.exelate=function(){i("exelate","//loadm.exelator.com/load/","e4942ff0-4070-4896-a7ef-e6a5a30ce9f9")};d("routes").simple("dataprovider.exelate",g)});n("dom-iframe",function(b,d,c){var a=d("util"),i=function(b){this.options=a.extend({},g,b||{});this.node=d("dom").createElement("iframe",this.options.attr);this.insert();if(!this.options.attr.src||this.options.html)this.html(this.options.html||"")},g={target:null,
targetAction:"append",html:"",attr:{}};i.prototype={insert:function(){var a=this.options,b=a.targetAction,a=a.target||c.document.body;d("dom").insert(b,a,this.node);this.win=i.window(this.node);this.doc=i.document(this.node)},html:function(a){var b=this.doc;a.match(/^<html>/)||(a="<html><head></head><body>"+a+"</body></html>");b.open();b.write(a);b.close()}};i.window=function(a){return a.contentWindow};i.document=function(a){return i.window(a).document};b.IFrame=i});n("dom",function(b,d,c){function a(b,
c,k){var p=b.tagName,h=b.attributes||{},b=b.children||[],c=c||[],k=k||0,d=l[p];c("<",p);e.each(h,function(a,b){c(" ",a,'="',b,'" ')});if(d)return c("/>");c(">");e.isString(b)?c(b):e.each(b,function(b){a(b,c,k+1)});d||c("</",p,">")}function i(b,c,k){b=e.isString(b)?{tagName:b,attributes:c,children:k}:b;c=new o;a(b,c);return c.data()}function g(){try{h.documentElement.doScroll("left")}catch(a){f(g,1);return}e.fireOnce("dom:ready")}var e=d("util"),f=c.setTimeout;e.extend(b,d("dom-iframe"));var h=c.document,
l=new e.Set("area base basefont br col frame hr img input isindex link meta param embed".split(" ")),j=b.attr=function(a,b,c){var k;if(void 0===c)try{return a.getAttribute(b)||null!=(k=a.attributes[b])&&k.value||""}catch(e){return""}else{try{a.setAttribute(b,c)}catch(p){throw Error("Failed to set: "+b);}return a}};b.removeAttr=function(a,b){try{a.removeAttribute(b)}catch(c){throw Error("Failed to remove: "+b);}};var q=b.text=function(a){return a.innerText||a.textContent};b.value=function(a){var b=
a.nodeName;return"INPUT"===b?j(a,"value"):"TEXTAREA"===b&&q(a)};var o=b.StringStream=function(){function a(){b.push.apply(b,arguments);return a}var b=[];a.data=function(){return b.join("")};return a},k=b.createElement=function(){var a=i.apply(null,arguments),b=h.createElement("div");b.innerHTML=a;return b.childNodes[0]};b.create=k;b.byId=function(a){return a&&a.nodeType?a:h.getElementById(a)};var s=b.head=function(a){a=a||h;return a.head||a.getElementsByTagName("head")[0]};b.document=function(a){return a.document||
a.ownerDocument||a};b.window=function(a){a=b.document(a);return a.parentWindow||a.defaultView};var t=b.remove=function(a){a.parentNode.removeChild(a)};b.isNode=function(a){return!!a.nodeType};var m=b.before=function(a,b){a.parentNode.insertBefore(b,a)},r=b.append=function(a,b){a.appendChild(b)};b.after=function(a,b){var c=a.nextSibling;c?m(c,b):r(a.parentNode,b)};b.prepend=function(a,b){var c=a.firstChild;c?m(c,b):r(a,b)};b.insert=function(a,c,k){if(3===arguments.length)b[a](c,k);else{var k=a,e=h.getElementsByTagName("script")[0];
e.parentNode.insertBefore(k,e)}};b.replace=function(a,b){m(a,b);t(a)};b.scriptEval=function(a){var b=h.createElement("script");b.text=a;s(h).appendChild(b)};b.winEval=function(a,b){a.kxeval||(a.execScript?a.execScript("(function(){\n  var win = this;\n  win.kxeval = win.execScript ? \n    function(expr){return win.execScript(expr);} :\n    function(expr){return win.eval(expr);};\n})();"):a.eval("(function(){\n  var win = this;\n  win.kxeval = win.execScript ? \n    function(expr){return win.execScript(expr);} :\n    function(expr){return win.eval(expr);};\n})();"));
return a.kxeval(b)};b.childElements=function(a){var b=[];e.each(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b};b.onload=function(a,b){e.isFunction(b)&&(b={done:b});var c=e.once(b.done||e.doNothing),k=e.once(b.fail||e.doNothing),p=a.attachEvent?"attachEvent":"addEventListener",h=a.attachEvent?"on":"";e.each({load:c,error:k,readystatechange:function(){a.readyState&&a.readyState.match(/complete|loaded/)&&c()}},function(b,c){a[p](h+b,c,!0)})};var p=1,u=b.hash=function(a){return a._krux_hash||
(a._krux_hash=p++)},x={};b.meta=function(a){var b=u(a);return x[b]||(x[b]={node:a,hash:b})};k=c.navigator;b.ie=!!k.userAgent.match(/MSIE /);var w=b.ff=!!k.userAgent.match(/Firefox/);b.ua=k.userAgent.toLowerCase();var v=b.ua.match(/(webkit)[ \/]([\w.]+)/)||b.ua.match(/(opera)(?:.*version)?[ \/]([\w.]+)/)||b.ua.match(/(msie) ([\w.]+)/)||0>b.ua.indexOf("compatible")&&b.ua.match(/(mozilla)(?:.*? rv:([\w.]+))?/)||["unknown","unknown",0];b.browser=v[1];b.version=parseFloat((v[2]||"0").match(/^[0-9]+[.0-9]*/)[0],
10);b.msie="msie"===v[1];b.mozilla="mozilla"===v[1];b.webkit="webkit"===v[1];b.opera="opera"===v[1];b.gecko=-1!==b.ua.indexOf("gecko/");b.chrome=!!c.chrome;b.ie6=b.msie&&"6"===b.version;b.ie7=b.msie&&"7"===b.version;b.ie8=b.msie&&"8"===b.version;b.ie9=b.msie&&"9"===b.version;b.browserBucket=b.msie?"IE."+b.version:w?"Firefox."+(4>b.version?"3x":"4plus"):b.opera?"Opera":b.chrome?"Chrome":b.webkit?"Webkit":"Other";b.lang=(k.language||k.systemLanguage||k.browserLanguage||k.userLanguage||"").substring(0,
2);d("events");var y=!!c.window.attachEvent,A=b._on_=y?"attachEvent":"addEventListener",k=b.type={ready:{target:c.document},load:{target:c},unload:{target:c},beforeunload:{target:c}},C=b.on=function(a,b,c,k){b=(y?"on":"")+b;a[A](b,c,k||!1)};b.d2on=c.addEventListener?function(a,b,c){a.addEventListener(b,c,!1);return{remove:function(){a.removeEventListener(b,c)}}}:function(a,b,c){a.attachEvent(b,c);return{remove:function(){a.detachEvent(b,c)}}};e.each(k,function(a,c){c.nativeName="ready"!==a?a:y?"readystatechanged":
"DOMContentLoaded";b[a]=function(b){e.onOnce("dom:"+a,b)}});var B=function(a){return"load"!==a?function(){e.fireOnce("dom:"+a)}:function(){e.fireOnce("dom:ready");e.fireOnce("dom:load")}};b.createHead=function(a,c){var k=d("sizzle"),p=e.first(k.find('div[data-id="'+a+'"]'));if(p)return p;b.kxhead=p=b.create("div",{"class":"kxhead","data-id":a,style:"display:none;"});c?b.before(c,p):b.insert(p);var h=b.insert;b.insert=function(a){1===arguments.length?b.append(p,a):h.apply(b,arguments)};return p};b.kruxDomain=
function(a){var b=2,a=a.match(/^([^:]+)/)[1];if(!a.match(/(?:\d{1,3}\.){3}\d{1,3}/))return a=a.split(".").reverse(),a[1]&&a[1].match(/com?/)&&(b=3),a.slice(0,Math.min(b,a.length)).reverse().join(".")};b.safeMode=function(){return-1<c.location.href.indexOf("krux_safe")||b.ie&&6>=b.version||b.gecko&&4>b.version||!c.document.readyState};if(/^(complete|loaded)$/.test(c.document.readyState))B("load")();else{if(b.ie){C(c,k.load.nativeName,B("ready"));w=!1;try{w=null==c.window.frameElement}catch(D){}h.documentElement.doScroll&&
w&&g()}e.each(k,function(a,b){C(b.target,b.nativeName,B(a),!1)})}f(e.bind(e.fireOnce,null,"dom:load",{timedout:!0}),6E3)});n("events",function(b,d){var c=d("util"),a=d("class").Class,a=b.Events=a.extend(function(){this._handlers={ALL:[]};this._happened={};this._super(arguments)},{on:function(a,b){if(c.isString(a))(this._handlers[a]||(this._handlers[a]=[])).push(b);else if(c.isFunction(a))this._handlers.ALL.push(a);else this.on(function(c){a.test(c.type)&&b(c)})},off:function(a,b){this._handlers[a]=
b?c.remove(this._handlers[a],b):[]},fire:function(a,b){b=b||{};b.type||(b.type=a);this._happened[a]=b;"data:change"!==b.type&&c.log(b);var d=function(a){a(b)};c.each(this._handlers[a],d);c.each(this._handlers.ALL,d);return b},onOnce:function(a,b){var d;return(d=this._happened[a])?c.defer(b,d):this.on(a,c.once(b))},fireOnce:function(a,b){return!this._happened[a]&&this.fire(a,b)},onOnceAll:function(a,b){var a=a.split(" "),b=c.once(b),d=c.bind(function(){c.all(a,function(a){return this._happened[a]},
this)&&b()},this);c.each(a,function(a){this.onOnce(a,d)},this)},happened:function(a){return this._happened[a]},clear:function(a){this._happened=c.reduce(this._happened,function(b,c,d){a&&0!==c.indexOf(a)&&(b[c]=d);return b},{})}}),i=b.instance=new a;i._bind("on off fire onOnce fireOnce onOnceAll happened");c.each("on off fire onOnce fireOnce onOnceAll happened".split(" "),function(a){c[a]=i[a]})});n("expression",function(b,d){var c=d("util"),a=c.isArray,i=c.isString,g={},e={},f,h=b.getDelimiter=function(a){return c.get(a+
"DELIM")},l=b.setDelimiter=function(a,b){h(a)!==b&&c.set(a+"DELIM",b)},j=b.get=function(a,b){var e=c.get(a);b&&l(a,b);b=h(a);return c.isArray(e)?e:b?e?e.split(b):[]:e},q=b.parse=function(a){var b;return!c.isString(a)?a:(b=a.match(/^\$([^:]+)(?::(.*))?$/))?j(b[1],b[2]):(b=a.match(/^\[\s*(.*)\s*\]$/))?c.map(b[1].split(/\s*,\s*/),q):(b=a.match(/^"(.*)"$/))?b[1]:a},o=function(a){var b;b=(b=f(a[0]))&&(g[b]||e[b]);return b.apply(this,b.isMacro?c.rest(a):c.map(c.rest(a),f))};f=b.eval=function(b){return a(b)?
o(b):i(b)?q(b):b};c.extend(g,{is:function(a,b){return a===b},matches:function(a,b){return RegExp(b).test(a)},startsWith:function(a,b){return g.matches(a,"^"+c.escapeRegexp(b))},endsWith:function(a,b){return g.matches(a,c.escapeRegexp(b)+"$")},contains:function(a,b){var a=a||[],e=(""+b).toLowerCase();return c.isArray(a)?c.any(a,function(a){return(""+a).toLowerCase()===e}):0<=(""+a).toLowerCase().indexOf(e)},memberOf:function(a,b){return g.contains(b,a)},intersection:function(a,b){return c.intersection(a,
b)},intersects:function(a,b){a=c.isArray(a)?a:[a];b=c.isArray(b)?b:[b];return c.any(a,function(a){return g.contains(b,a)})},random:function(){return Math.random()},now:function(){return new Date}});c.each(["<",">","<=",">="],function(a){g[a]=new Function("a","b","return a "+a+" b")});c.extend(g,{isnt:c.negate(g.is),notMemberOf:c.negate(g.memberOf),notContains:c.negate(g.contains),notIntersects:c.negate(g.intersects)});c.extend(e,{and:function(){return c.every(arguments,f)},or:function(){return c.any(arguments,
f)}});c.each(e,function(a,b){b.isMacro=!0})});n("fingerprint-scraper",function(b,d){var c=d("util"),a=b.all=function(a,b){var b=b||c.yes,e=[],d=c.deref(a),g;for(g in d){var o=d[g];b(o,g,d)&&null!=o&&e.push(o)}return e};b.path=c.deref;var i=function(a){return function(b,e){return a(b,function(a,b){return c.contains(e,b)})}};b.keys=i(a);var g=b.pluckAll=function(a,b){var b=b||c.yes,e=c.deref(a);return c.reduce(e.length?e:c.values(e),function(a,c){var e,d;for(d in c)c.hasOwnProperty(d)&&b(e=c[d],d,c)&&
a.push(e);return a},[])},e=b.pluckKeys=i(g);b.pluckKeysWhere=function(a,b,d){return c.filter(e(a,b),d)};b.primitives=c.partial(a,c._,c.isPrimitive);b.serializable=c.partial(a,c._,c.isSerializable)});n("fingerprint",function(b,d,c){var a=d("util");d("data");d("dom");var i=d("fingerprint-scraper"),g=d("sha1"),d=a.partial(i.keys,"navigator"),e=a.partial(i.keys,"screen"),f=function(a){return a[0]*a[1]},h=a.compose(e,f),l=a.partial(a.deref,c);b.canvas=function(){var a=document.createElement("canvas"),
b=a.getContext("2d");b.textBaseline="top";b.font="14px 'Arial'";b.textBaseline="alphabetic";b.fillStyle="#f60";b.fillRect(125,1,62,20);b.fillStyle="#069";b.fillText("F1ng3r Print",2,15);b.fillStyle="rgba(102, 204, 0, 0.7)";b.fillText("F1ng3r Print",4,17);return[a.toDataURL()]};b.winSize=function(){return a.map([["innerHeight","innerWidth"],["outerHeight","outerWidth"]],function(b){return f(a.map(b,l))})};b.mimeTypes=a.partial(i.pluckKeysWhere,"navigator.mimeTypes",["type","description","suffixes"],
function(b){return""!==b&&a.isString(b)||a.isNumber(b)&&!a.isNaN(b)});b.navigatorPrimitives=a.partial(d,"onLine product appCodeName platform appVersion appName vendorSub vendor productSub cookieEnabled language".split(" "));b.plugins=a.partial(i.pluckKeys,"navigator.plugins",["name","filename","description"]);b.screenDepth=a.partial(e,["pixelDepth","colorDepth"]);b.screenResolution=a.partial(h,["availWidth","availHeight"]);b.screenSize=a.partial(h,["width","height"]);b.timezone=function(){return[(new Date).getTimezoneOffset()]};
b.ua=function(){var a=i.path("navigator.userAgent");return[String(a).replace(/([a-z0-9]){8}\-(\1{4})\-\2\-\2\-\1{12}/i,"")]};var j=function(){return a.reduce(b,function(a,b,c){var e;try{e=c(),a.push.apply(a,e)}catch(d){}return a},[])};return a.extend(function(b){var c=b.get("fp"),b=b.get("fp_id"),e=g(j().sort().join(""));e!==c?(a.set("fp",e),a.set("fp_id",b),a.set("fp_sent",!0)):a.set("fp_sent",!1);return e},b,{raw:j})});n("geo",function(b,d){var c=d("util");d("data");d("events");var a=function(a){c.forEach(a,
function(b,c){var d=String(b).toLowerCase();d!==b&&(delete a[b],a[d]=c)});return a};return b=c.extend(function(a){if(c.isConfigValueTrue(a.params.no_pii))return c.forEach(b,function(a,d){c.isFunction(d)&&(b[a]=c.doNothing)}),a.geo={},b;var g=a.geo;c.isString(g)&&(a.geo=g=d("json").JSON.parse(a.geo));if(c.isEmpty(g))c.on("user_data_response",function(a){b.receive((a||{}).geo||{})});else b.receive(g);return b},{get:function(a){var b=c.get("geo")||{};return a?b[String(a).toLowerCase()]:b},set:function(d,
g){1===arguments.length?c.set("geo",a(d)):c.get("geo")[String(d).toLowerCase()]=g;return b},receive:function(a){b.set(a);c.forEach(["country","region","city","dma"],function(b){c.set("user_attr_kx_geo_"+b,a[b]||a[b.toUpperCase()])});c.fireOnce("geo:ready",b);return b}})});n("hash-set",function(b,d){function c(b,c){this._hash=function(c){var d=a.isFunction(b)?b(c):c;return String(void 0!==d?d:String(c))};this._q=[];this.put.apply(this,a.tail(arguments));this._items={}}var a=d("util");c.prototype._thunk=
function(){var b=this._q,c=this._hash;a.forEach(b.splice(0,b.length),function(a){this._items[c(a)]=a},this);return this};c.prototype.put=function(a){this._q.push.apply(this._q,arguments);return this};c.prototype.get=function(a){this._thunk();return this._items[this._hash(a)]};c.prototype.has=function(a){this._thunk();return this._hash(a)in this._items};c.prototype.remove=function(b){this._thunk();a.forEach(arguments,function(a){delete this._items[this._hash(a)]},this);return this};c.prototype.toArray=
function(){this._thunk();return a.values(this._items)};c.prototype.toString=function(){this._thunk();return a.keys(this._items)};return a.extend(function(b,d){var e=new c(b);e.put.apply(e,a.tail(arguments));return e},{HashSet:c})});(function(){function b(b,f){var b=b||"",f=f||{},j;for(j in d)d.hasOwnProperty(j)&&(f.autoFix&&(f["fix_"+j]=!0),f.fix=f.fix||f["fix_"+j]);var q={comment:/^<\!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s>]/i,startTag:/^</,chars:/^[^<]/},o=
{comment:function(){var a=b.indexOf("--\>");if(0<=a)return{content:b.substr(4,a),length:a+3}},endTag:function(){var c=b.match(a);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var a=o.startTag();if(a){var c=b.slice(a.length);if(c.match(RegExp("</\\s*"+a.tagName+"\\s*>","i"))&&(c=c.match(RegExp("([\\s\\S]*?)</\\s*"+a.tagName+"\\s*>","i"))))return{tagName:a.tagName,attrs:a.attrs,content:c[1],length:c[0].length+a.length}}},startTag:function(){var a=b.match(c);if(a){var p={};a[2].replace(i,
function(a,b,c,d,e){a=c||d||e||g.test(b)&&b||null;p[b]=a});return{tagName:a[1],attrs:p,unary:!!a[3],length:a[0].length}}},chars:function(){var a=b.indexOf("<");return{length:0<=a?a:b.length}}},k=function(){for(var a in q)if(q[a].test(b)){e&&console.log("suspected "+a);var c=o[a]();return c?(e&&console.log("parsed "+a,c),c.type=c.type||a,c.text=b.substr(0,c.length),b=b.slice(c.length),c):null}};if(f.fix){var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,t=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
m=[];m.last=function(){return this[this.length-1]};m.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()};m.containsTagName=function(a){for(var b=0,c;c=this[b];b++)if(c.tagName===a)return!0;return!1};var r=function(a){a&&"startTag"===a.type&&(a.unary=s.test(a.tagName)||a.unary);return a},p=k,u=function(){b="</"+m.pop().tagName+">"+b},x={startTag:function(a){var c=a.tagName;"TR"===c.toUpperCase()&&m.lastTagNameEq("TABLE")?(b="<TBODY>"+b,w()):f.fix_selfClose&&
t.test(c)&&m.containsTagName(c)?m.lastTagNameEq(c)?u():(b="</"+a.tagName+">"+b,w()):a.unary||m.push(a)},endTag:function(a){m.last()?f.fix_tagSoup&&!m.lastTagNameEq(a.tagName)?u():m.pop():f.fix_tagSoup&&(p(),w())}},w=function(){var a=b,c=r(p());b=a;if(c&&x[c.type])x[c.type](c)},k=function(){w();return r(p())}}return{append:function(a){b+=a},readToken:k,readTokens:function(a){for(var b;(b=k())&&!(a[b.type]&&!1===a[b.type](b)););},clear:function(){var a=b;b="";return a},rest:function(){return b},stack:[]}}
var d=function(){var a={},b=this.document.createElement("div");b.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==b.innerHTML;b.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===b.childNodes.length;return a}(),c=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,a=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,i=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,g=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,
e=!1;b.supports=d;b.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"--\>"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){console.log(a);return b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName,c;for(c in a.attrs)var d=a.attrs[c],b=b+(" "+c+'="'+(d?d.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"');return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)};b.escapeAttributes=function(a){var b={},c;for(c in a){var d=
a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var f in d)b.browserHasFlaw=b.browserHasFlaw||!d[f]&&f;this.htmlParser=b})();n("http-jsonp",function(b,d,c){var a=d("class").Class,i=d("util"),g=d("ns"),e=c.document,f={},h=b.Request=a.extend(function(a){a.data=a.data||{};this.options=a;if(!a.callback)throw"Callback name is required";i.extend(this,a);this.self&&(this.done=i.bind(this.done,this.self),this.fail=i.bind(this.fail,this.self));this.plantReceiver();this.src=d("http").src(this);
this._class.all.push(this)},{fail:function(a){i.fire("error",{message:"jsonp failed with status "+(a&&a.status||"unknown")+" src: "+this.src})},done:function(){},receive:function(a){this.time.end=new Date;return a.status?200==a.status?this.done(a.body):this.fail(a):this.done(a)},plantReceiver:function(){var a=this.options.callback;this.data.callback=g.path+"."+a;f[a]=f[a]||0;f[a]++;g.self[a]=i.bind(function(){f[a]--;0===f[a]&&delete g.self[a];this.receive.apply(this,arguments)},this)},sendInline:function(){e.write('<script src="'+
this.src+'" type="text/javascript"><\/script>')},send:function(){this.time={start:new Date};if(this.inline)return this.sendInline();var a=e.createElement("script");a.type="text/javascript";a.src=this.src;var b=e.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);return this},__all:[]});b.call=function(a){return(new h(a)).send()}});n("http",function(b,d,c){var a=d("util"),i=d("json").JSON,g=b.protocol="https:"===c.location.protocol?"https:":"http:",e=d("dom");b.maxUrlLength=e.msie?2048:
8E4;var f=b.param=function(b,c){var d=a.isString(c)||a.isNumber(c)?c:i.stringify(c);return encodeURIComponent(b)+"="+encodeURIComponent(d)},h=b.src=function(c){c.url=c.url||"no_url";var d=c.url;d.match(/^\/\//)&&(d=g+d);var e=a.map(c.data,f);if(!c.noClip)for(;(d+"?"+e.join("&")).length>b.maxUrlLength;)e.pop();return d+"?"+e.join("&")};b.willClip=function(c){c=b.src(a.extend({noClip:!0},c));return c.length>b.maxUrlLength&&c.length-b.maxUrlLength};b.pixel=function(b){try{(new c.Image).src=h(b),a.fire("http:pixel",
b)}catch(d){}};b.jsonp=function(a){return d("http-jsonp").call(a)}});n("impression",function(b,d){var c=d("util"),a=d("pixel");d("data");var i=b.send=function(b){c.set("url_pixel",b.url);a.sendImpl(b)};b.init=function(a){i(a)}});n("index",function(b,d){d("init")});n("init",function(b,d,c){d("util");var a=c.Krux||((c.Krux=function(){c.Krux.q.push(arguments)}).q=[]);if(!a.commit||a.ns)a.commit=a.commit||1,c.Krux=function(b,g){var e;g.params=g.params||{};e=g.params.control_tag_namespace;c.Krux=a;(e=
d("ns").init(e,function(){return d("routes").call}))&&d("marketer"===g.params.client_type?"marketer":"publisher")(e,g)}});n("jslog",function(b,d,c){function a(a){f&&c.console&&c.console.log("Error:",a);i.happened("jslog.pixel")?a.msg!==l[l.length-1]&&!(l.length>10*Math.random())&&(l.push(a.msg),a.type+="-postload",h.push(a),e.pixel(s()),h=[]):h.push(a)}var i=d("util"),g=d("dom"),e=d("http"),f=-1<c.location.search.indexOf("kxdebug"),h=[],l=[],j=b.errorTypes=["controltag","tag","test","js"],q=c.onerror||
function(){return!1};c.onerror=function(b,d,e){try{if("string"!==typeof b)return q.apply(c,arguments);var p;var k=/https*:\/\/([^\/]+)\/([^?\/]+)/.exec(d);p=k&&"apiservices.krxd.net"===k[1]?"service:"+k[2]:k&&-1<k[1].indexOf("krxd.net")?"controltag":"";a({type:p||"js",url:d,line:e,msg:b});return q.apply(c,arguments)}catch(f){c.console&&c.console.log("Error in the error handler",f)}return q.apply(c,arguments)};var o=b.sortByPriority=function(a){function b(a){a=i.indexOf(j,a.type);return-1!==a?a:j.length}
return i.clone(a).sort(function(a,c){var d=b(a),e=b(c);return d<e?-1:d>e?1:0})};i.on("tag:fail",function(b){a({type:"tag",tagid:b.id,msg:b.error})});i.on("test:fail",function(b){a({type:"test",msg:b.code+":"+b.data})});var k,s=b.getPixelOptions=function(a){for(var a=a||{url:i.get("url_log"),data:{control_tag_version:c.Krux.version,commit:c.Krux.commit,pubid:i.get("pubid"),siteid:i.get("siteid"),site_name:i.get("site"),browser_bucket:g.browserBucket,version_bucket:k,lang:g.lang,log_version:1.1,errors:o(h)}},
b=a.data.errors;e.willClip(a)&&b.length;)b.pop();return a};i.on("test:all_done",function(){if(!(1>h.length)){var a=0;k=i.get("config_param_control_tag_version");a="alpha"===k?1:0.1;Math.random()>a||(e.pixel(s()),i.fire("jslog.pixel",{errors:h.length}),h=[])}})});n("json",function(b,d,c){var a=d("util"),i,g,e,f,h=function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+'"'};f=function(b){++e;b=e<=i&&a.isNull(b)?"null":a.isUndefined(b)?
"null":a.isBoolean(b)?!0===b?"true":!1===b?"false":""+b:a.isString(b)?h(b):a.isNumber(b)?""+b:a.isArray(b)?"["+a.map(b,f).join(",")+"]":a.isArguments(b)?"["+a.map(b,f).join(",")+"]":"{"+a.map(b,function(a,b){return(g?"\n"+Array(e+1).join("  "):"")+h(""+a)+":"+f(b)}).join(",")+(g?"\n"+Array(e+1).join("  "):"")+"}";--e;return b};b.myJSON={stringify:function(a,b){b=b||{};g=b.pretty||!1;i=b.maxdepth||15;e=0;return f(a)}};b.JSON=c.JSON||b.myJSON});n("kxinterchange",function(b,d,c){var b=function(a){var b,
a="kx"+a;return((b=this.localStorage)?b[a]||"":(b=c.document.cookie)&&(b=b.match("\\b"+a+"=([^;]*)"))&&decodeURIComponent(b[1]))||""},a=d("util"),i=c.Krux,g=i.user,e=i.segments,f=b("user"),h=b("segs");d("test").module("kxinterchange-support-snippet",function(b){b.eq("Krux.user exported",g,f);b.eq("Krux.segments exported",e,h&&h.split(",")||[]);a.each(e,function(a){b("Krux.dartKeyValues contains segment "+a,0<=i.dartKeyValues.indexOf("ksgmnt="+a))});f&&b("Krux.dartKeyValues contains user",0<=i.dartKeyValues.indexOf("u="+
f))})});n("marketer",function(b,d,c){var a=d("util"),i=d("dom");d("events");var g=d("impression"),e=d("routes"),f=d("sizzle"),h=d("tag"),l=d("timing"),j=/^https?:\/\/([a-z0-9_\-\.]+\.)?krxd\.net(:\d{1,5})?(\/|$)/i,q=b.getParams=function(b){return a.urlParams(i.attr(b,"src"))},o=b.next=function(b){var c=a.find(f.find("script[src*="+b+"]"),function(a){return!i.attr(a,"data-kx-id")&&j.test(a.src)});if(!c)throw Error("No node found for "+b);return c};return a.extend(function(b,f){var j=f.confid,m=j+"-"+
(new Date).getTime();l.start();h.claimOneTimers(f.tags);a.set("tags",f.tags||[]);d("jslog");var r=d("data");r.user_attr=r.namespace("user_attr");r.page_attr=r.namespace("page_attr");d("scrape");d("dataprovider");d("events");var p=o(j);i.attr(p,"data-kx-id",m);var m=q(p),u=f.services;if(u&&u.impression)m.url=u.impression;else throw Error("impression service not specified");i.createHead(j,p);a.set("confid",j);a.set("pubid",a.get("pubid")||f.publisher.uuid);f.no_pii&&(a.set("pixel_data__knopii",1),r.user_attr("kx_lang",
null),r.user_attr("kx_tech_browser_language",null));d("test").init();d("test-visualtags").init();a.set("tags",f.tags);d("geo")(f);a.set("config",f);a.set("version_bucket",f.params.control_tag_version);r.namespace("config_param",f.params);j=!/localStorage/.test(a.get("config_param_client_side_storage"));d("store").init(j);if(i.safeMode())a.onOnce("dom:load",a.bind(a.fireOnce,null,"report"));else{j=a.map(a.get("tags"),d("data-rewrite").tag);a.set("tags",j);a.set("config_segments",f.realtime_segments);
a.onOnceAll("dom:load tag:all_done",a.bind(a.fireOnce,null,"report"));d("adm-events").check3rdParty();d("stats");d("social");e.api();if(f.context_terms)a.onOnce("dom:load",function(){d("context-terms").process(f.context_terms)});m._kpid=a.get("pubid");g.init(m);c.setTimeout(h.init,250)}l.end()},b)});n("ns",function(b,d,c){var a=d("util"),i=d("version"),g=c.Krux,e=b.NS_RE=/^ns:([\w\W]+)/,f=b.DEFAULT_NS="_default",h=b.parseArgs=function(b){var c=b[0];(c=c.match(e))?(c=c[1],b=a.rest(b)):c=f;return{nsName:c,
rest:b}},l;if(!(l=g.nsRouter)){var j=function(){var b=h(arguments),c=j.ns[b.nsName];if(!b.rest.length)return c;if(c)return c.apply(c,b.rest);j.q.push(arguments);return a.UNDEFINED};j.ns={};j.q=[];j.defineNamespace=function(b,c){var d=b||f;if(j.ns[d])return j.ns[d];var e=j.ns[d]=c(b);a.extend(e,{nsName:d,isDefault:d===f,path:"Krux.ns."+d});j.creator=j.creator||e;d=j.q.splice(0,j.q.length);a.each(d,function(a){j.apply(null,a)});return e};j.nsRouter=j;a.extend(j,g);l=c.Krux=j}b.router=l;b.init=function(e,
f){var k=b.self=b.router.defineNamespace(e,f);if(k){b.name=k.nsName;b.isDefault=k.isDefault;b.path=k.path;var h={version:i.version,commit:i.commit,require:d,define:n,_:a};a.extend(k,h);k.isDefault&&a.extend(c.Krux,h)}return k}});n("pixel",function(b,d,c){var a=d("util"),i=d("http"),g=d("dom"),e=d("data"),f=d("store"),h=c.Krux,l=b.sendImpl=function(b){var c={};a.eachHash(b,function(a,b){if(b=k(a,b))c[a]=b});var b=a.get("config_param_control_tag_pixel_throttle"),d=100*Math.random();b&&b<d||i.pixel({url:a.get("url_pixel"),
data:c})},j=b.stringifyValue=function(b){return null!=b&&(a.isArray(b)?a.map(b,j).join(s):b.toString())},q=b.formatters=[],o=b.addFormatter=function(a,b){q.push({test:a,formatter:b})},k=b.format=function(b,c){var d=a.find(q,function(c){return a.isString(c.test)?c.test===b:c.test.test(b)});return(d?d.formatter:j)(c)};b.tuppleSeparator=":";var s=b.arraySeparator=",",t=b.send=function(b,c){var d=m(b,c);l(d);a.fireOnce("pixel",{phase:b,data:d})},m=b.gather=function(b,k){var j={source:"smarttag",fired:b,
confid:a.get("confid"),_kpid:a.get("pubid"),_kcp_s:a.get("site"),_kcp_sc:a.get("section"),_kcp_ssc:a.get("subsection"),_kcp_d:a.get("domain"),_knifr:c.frames.length,_kpref_:c.document.referrer};!1===k&&(j.pageview=String(k));1!==a.get("pixel_data__knopii")&&(j.geo_country=a.get("user_attr_kx_geo_country"),j.geo_region=a.get("user_attr_kx_geo_region"),j.geo_city=a.get("user_attr_kx_geo_city"),j.geo_dma=a.get("user_attr_kx_geo_dma"));a.size(a.get("config_segments"))&&(j.rtsegs=d("segments").realtime());
var r=function(b,c){a.eachHash(c,function(a,c){j[b+a]=c})};r("_kua_",e.user_attr());r("_kpa_",e.page_attr());r("",e.namespace("pixel_data")());var s=c.performance,i=s&&s.navigation,A=s&&s.timing;i&&(A&&!(g.gecko&&9>g.version))&&(s=function(a,b){if(!b){b=a+"End";a=a+"Start"}var c=A[a]&&A[b]&&A[b]-A[a];return c==null||c<0||c>3E4?-1:c},a.extend(j,{t_navigation_type:i.type,t_dns:s("domainLookup"),t_tcp:s("connect"),t_http_request:s("request"),t_http_response:s("response"),t_content_ready:s("navigationStart",
"domInteractive"),t_window_load:s("navigationStart","loadEventStart"),t_redirect:s("redirect")}));var i=d("scrape"),s=a.happened("user_data_response"),l=d("ns"),l=l.isDefault?h:h[l.name]||{};a.extend(j,{interchange_ran:l.hasOwnProperty("user"),store_user:l.user,store_segs:l.segments,dart_user:i.dart("u"),dart_segs:i.dart("ksgmnt")||i.dart("ksg"),userdata_was_requested:!!a.happened("user_data_request"),userdata_did_respond:!!s,store_user_after:f.get("user"),store_segs_after:f.get("segs")});s&&a.extend(j,
{userdata_user:[s.kuid,s.kuid_long],userdata_segs:s.segments});a.each({user:"_kua_",page:"_kpa_"},function(b,c){a.each(e[b+"_attr"](),function(a,b){j[c+a]=b})});if(i=c.sessionStorage)try{j.sview=i.krux_views=+(i.krux_views||0)+1}catch(m){}i=a.get("tags");i=a.filter(i,function(a){return a.time&&a.time.end});a.each(i,function(a,b){j["kplt"+b]=a.id;r("tag"+a.id+"_timing",{duration:a.time.duration})});o(/tag.*_timing/i,function(){return false});j.jsonp_requests=a.map(d("http-jsonp").Request.all,function(a){return[a.url,
a.time.end-a.time.start]});return j},r=b.sendOnce=a.once(t);b.init=function(){a.onOnce("report",function(){var b=a.bind(r,null,"report");a.happened("user_data_fetch_scheduled")?(a.onOnce("user_data_response",function(){a.defer(b)}),c.setTimeout(function(){r("user_data_timeout")},300)):b()});a.onOnce("dom:beforeunload",function(){r("dom:beforeunload")});a.onOnce("dom:unload",function(){r("dom:unload")});a.on("navigation",function(b){b={source:"smarttag",type:"navigation",_kpid:a.get("pubid"),_kcp_s:a.get("site"),
_kcp_sc:b.section,_kcp_ssc:b.subsection};l(b)});d("test").module("pixel",function(b){b("pixel",a.happened("pixel"))})}});(function(){function b(){}function d(a,b,c){var d,e=a&&a.length||0;for(d=0;d<e;d++)b.call(c,a[d],d)}function c(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])}function a(a,b){c(b,function(b,c){a[b]=c});return a}function i(a){try{return e.call(a)}catch(b){var c=[];d(a,function(a){c.push(a)});return c}}var g=this;if(!g.postscribe){var e=Array.prototype.slice,f=function(a,
b,c){var d=l+b;if(2===arguments.length)return d=a.getAttribute(d),null==d?d:String(d);null!=c&&""!==c?a.setAttribute(d,c):a.removeAttribute(d)},h=function(b,c){var d=b.ownerDocument;a(this,{root:b,options:c,win:d.defaultView||d.parentWindow,doc:d,parser:g.htmlParser("",{autoFix:!0}),actuals:[b],proxyHistory:"",proxyRoot:d.createElement(b.nodeName),scriptStack:[],writeQueue:[]});f(this.proxyRoot,"proxyof",0)},l="data-ps-";h.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&
this.writeQueue.length;)a=this.writeQueue.shift(),"function"===typeof a?this.callFunction(a):this.writeImpl(a)};h.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this.onScriptStart(b);a.call(this.win,this.doc);this.onScriptDone(b)};h.prototype.writeImpl=function(a){this.parser.append(a);for(var b,a=[];(b=this.parser.readToken())&&!/^script$/i.test(b.tagName);)a.push(b);this.writeStaticTokens(a);b&&this.handleScriptToken(b)};h.prototype.writeStaticTokens=function(a){a=
this.buildChunk(a);if(a.actual)return a.html=this.proxyHistory+a.actual,this.proxyHistory+=a.proxy,this.proxyRoot.innerHTML=a.html,this.walkChunk(),a};h.prototype.buildChunk=function(a){var b=this.actuals.length,c=[],e=[],f=[];d(a,function(a){c.push(a.text);if(a.attrs){if(!/^noscript$/i.test(a.tagName)){var d=b++;e.push(a.text.replace(/(\/?>)/," "+l+"id="+d+" $1"));"ps-script"!==a.attrs.id&&f.push("atomicTag"===a.type?"":"<"+a.tagName+" "+l+"proxyof="+d+(a.unary?" />":">"))}}else e.push(a.text),f.push("endTag"===
a.type?a.text:"")});return{tokens:a,raw:c.join(""),actual:e.join(""),proxy:f.join("")}};h.prototype.walkChunk=function(){for(var a,b=[this.proxyRoot];null!=(a=b.shift());){var c=1===a.nodeType;if(!c||!f(a,"proxyof"))c&&(this.actuals[f(a,"id")]=a,f(a,"id",null)),(c=a.parentNode&&f(a.parentNode,"proxyof"))&&this.actuals[c].appendChild(a);b.unshift.apply(b,i(a.childNodes))}};h.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b);a.src=a.attrs.src||a.attrs.SRC;
if(a.src&&this.scriptStack.length)this.deferredRemote=a;else this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})};h.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue;this.writeQueue=[];this.scriptStack.unshift(a)};h.prototype.onScriptDone=function(a){a!==this.scriptStack[0]?this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),!this.scriptStack.length&&this.deferredRemote&&
(this.onScriptStart(this.deferredRemote),this.deferredRemote=null))};h.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),d=this.shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,!d?function(){b();e()}:e));try{this.insertScript(c),(!a.src||d)&&b()}catch(f){this.options.error(f),b()}};h.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);c(a.attrs,function(a,c){b.setAttribute(a,c)});a.content&&(b.text=a.content);return b};
h.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)};h.prototype.scriptLoadHandler=function(b,c){function d(){b=b.onload=b.onreadystatechange=b.onerror=null;c()}var e=this.options.error;a(b,{onload:function(){d()},onreadystatechange:function(){/^(loaded|complete)$/.test(b.readyState)&&d()},onerror:function(){e({message:"remote script failed "+b.src});d()}})};h.prototype.shouldRelease=function(a){return!/^script$/i.test(a.nodeName)||
!(!this.options.releaseAsync||!a.src||!a.hasAttribute("async"))};var j,q=function(){var a=t.shift();a&&(a.stream=o.apply(null,a))},o=function(c,d,e){function f(a){a=e.beforeWrite(a);m.write(a);e.afterWrite(a)}m=new h(c,e);m.id=s++;m.name=e.name||m.id;k.streams[m.name]=m;var j=c.ownerDocument,g={write:j.write,writeln:j.writeln};a(j,{write:function(){return f(i(arguments).join(""))},writeln:function(){return f(i(arguments).join("")+"\n")}});var o=m.win.onerror||b;m.win.onerror=function(a,b,c){e.error({msg:a+
" - "+b+":"+c});o.apply(m.win,arguments)};m.write(d,function(){a(j,g);m.win.onerror=o;e.done();m=null;q()});return m},k=function(a,d,e){"function"===typeof e&&(e={done:e});var f=e,e={releaseAsync:!1,afterAsync:b,done:b,error:function(a){throw a;},beforeWrite:function(a){return a},afterWrite:b},f=f||{};c(e,function(a,b){null==f[a]&&(f[a]=b)});var e=f,a=/^#/.test(a)?g.document.getElementById(a.substr(1)):a.jquery?a[0]:a,k=[a,d,e];a.postscribe={cancel:function(){k.stream?k.stream.abort():k[1]=b}};t.push(k);
m||q();return a.postscribe},s=0,t=[],m=null;j=a(k,{streams:{},queue:t,WriteStream:h});g.postscribe=j}})();n("publisher",function(b,d,c){var a=c.location,i=c.document;d("dom");var g=d("util"),e=d("timing");return function(b,h){e.start();var l=d("dom");d("jslog");var j=d("data");j.user_attr=j.namespace("user_attr");j.page_attr=j.namespace("page_attr");var q=d("routes");d("scrape");d("dataprovider");d("events");i.getElementById("kxinterchange")&&d("kxinterchange");var o=h.confid||"no-confid";l.createHead(o);
g.set("confid",o);g.set("pubid",g.get("pubid")||h.publisher.uuid);g.set("domain",l.kruxDomain(a.host));g.set("site",g.get("site")||h.site&&h.site.name||g.get("domain"));g.set("siteid",g.get("siteid")||h.site&&h.site.id);h.no_pii&&(g.set("pixel_data__knopii",1),j.user_attr("kx_lang",null),j.user_attr("kx_tech_browser_language",null));d("pixel").init();d("test").init();d("test-visualtags").init();g.set("tags",h.tags);g.set("url",c.location.href);d("geo")(h);g.set("config",h);g.set("version_bucket",
h.params.control_tag_version);j.namespace("url",h.services);j.namespace("config_param",h.params);j=!/localStorage/.test(g.get("config_param_client_side_storage"));d("store").init(j);if(l.safeMode())c.console&&c.console.log("Krux running in safe mode, no tags will be delivered"),g.onOnce("dom:load",g.bind(g.fireOnce,null,"report"));else{l=g.map(g.get("tags"),d("data-rewrite").tag);g.set("tags",l);g.set("config_segments",h.realtime_segments);g.onOnceAll("dom:load tag:all_done",g.bind(g.fireOnce,null,
"report"));d("adm-events").check3rdParty();d("stats");d("social");q.api();if(h.context_terms)g.onOnce("dom:load",function(){d("context-terms").process(h.context_terms)});d("tag").init()}e.end()}});n("routes",function(b,d,c){var a=d("util"),i=d("ns"),g=b.routes=[],e=b.q=c.Krux&&c.Krux.q||[],f=b.getHandler=function(b){return a.find(g,function(a){return a[0].test(b)})},h=b.call=function(b){if(i.NS_RE.test(b))return i.router(b);if(a.isFunction(b))return b.call(null,d);var c=f(b);if(c)return c[1].apply(null,
arguments);e.push(a.toArray(arguments));return a.UNDEFINED},l=b.understands=function(a){return!!f(a)},j=b.replay=function(){var b=a.clone(e);e.length=0;a.each(b,function(a){h.apply(null,a)})},q=b.add=function(a,b){g.push([a,b]);j()},o=b.regexp=function(b,c){q(b,function(d){return c.apply(this,[d.match(b)].concat(a.rest(arguments)))})},k=b.simple=function(b,c){o(RegExp("^"+b+"$"),function(){return c.apply(null,a.rest(arguments))})};b.once=function(c,d){var e=function(){g=b.routes=a.remove(g,e);return d.apply(this,
arguments)};k(c,e)};b.namespace=function(b,c){o(RegExp("^"+b+"\\.(.*)"),function(b){c[b[1]].apply(c,a.rest(arguments))})};b.api=function(){o(/^fire:(.+)/,function(b,c){return a.fire(b[1],c)});o(/^on:(.+)/,function(b,c){return a.on(b[1],c)});o(/^fireOnce:(.+)/,function(b,c){return a.fireOnce(b[1],c)});o(/^onOnce:(.+)/,function(b,c){return a.onOnce(b[1],c)});o(/^require:?(.*)/,function(a,b){return a[1]?d(a[1]):b?d(b):d});k("define",n);k("JSON.stringify",d("json").JSON.stringify);k("log",a.log);k("page:load",
function(b,e){var f=d("pixel");try{a.set("url",String(c.location)),h("tag:reload",function(a){b&&b(a);f.send("ajax",e&&e.pageView)})}catch(k){b(k)}})};k("understands",l)});n("scrape",function(b,d,c){var a=d("util"),i=d("data"),g=d("sizzle"),e=d("routes"),f=d("dom"),h=b.defaultExcludes="sz dcopt ord tile pos uri click ksgmnt null undefined".split(" "),l=b._dart=function(){function d(a){return g.find("script[src*="+e+"]",a).concat(g.find("iframe[src*="+e+"]",a))}var e=".doubleclick.net",f={},j=[],j=
j.concat(d(c.document)),h=g.find("iframe[src*=://"+c.location.hostname+"]").concat(g.find("iframe[src^=/]"));a.each(h,function(a){try{j=j.concat(d(a.contentWindow.document))}catch(b){}});b.dartElements=j;a.each(j,function(b){var c,b=(c=g.attr(b,"src").match(/[^;]*;(.*)/))&&c[1];c=a.parseKeyValues(b,";");a.eachHash(c,function(b,c){var d=f[b];d&&d!==c?(a.isArray(d)||(d=[d]),a.isArray(c)?d=d.concat(c):d.push(c),f[b]=a.uniq(d)):f[b]=c})});if(j[0]){var p,h=(p=g.attr(j[0],"src").match(/\.doubleclick\.net(\/[^;]*)/))?
p[1]:"";i.page_attr({dfpsite:h.split("/")[2],dfpzone:h.split("/")[3]})}return f},j,q=b.extensions={},d=b.extension=function(a,c){q[a]=b[a]=c;e.simple("scrape."+a,c);return c};a.eachHash({dart:function(b){if(!j||a.isEmpty(j))j=l();var c=new a.Set(b&&b._excludes||h);return null==b?j:a.isString(b)?j[b]:a.eachHash(b,function(b,d){var e=i.namespace(b);a.isArray(d)?a.each(d,function(a){j[a]&&e(a,j[a])}):"*"===d?a.eachHash(j,function(a,b){c[a]||e(a,b)}):a.set(b,j[d])})},dom:function(a){var b=a.match(/^(.+):([^:]+)$/),
a=g.find(b[1])[0],b=b[2];return a&&b&&("text"===b?f.text(a):"value"===b?f.value(a):"@"===b.charAt(0)&&f.attr(a,b.substr(1)))},link_rel:function(a){return b.dom("link[rel="+a+"]:@href")},link_rev:function(a){return b.dom("link[rev="+a+"]:@href")},meta_name:function(a){return b.dom("meta[name="+a+"]:@content")},meta_property:function(a){return b.dom("meta[property="+a+"]:@content")},opengraph:function(a){return b.meta_property("og:"+a)},url_path:function(a){return b.location.pathname.split("/")[a]},
url_param:function(a){var c;return(c=b.location.href.match("\\b"+a+"(?:=|\\b)([^&]*)"))&&(decodeURIComponent(c[1])||!0)},url_hash:function(a){return[""].concat(String(c.location.hash).replace(/^(?:#|\/){0,}/,"").split("/"))[a]},url_host:function(a){return b.location.hostname.split(".").reverse()[a-1]},url_domain:function(c){return a.last(b.location.hostname.split("."),c).join(".")},cookie:function(a){var b;return(b=c.document.cookie)&&(b=b.match("\\b"+a+"=([^;]*)"))&&decodeURIComponent(b[1])},data:function(b){return a.get(b)},
javascript:function(b){try{return c.eval(b)}catch(d){a.fire("error",d)}},js_global:function(a){try{for(var b=c,d=a.split(".");b&&d[0];)b=b[d.shift()];return b}catch(e){}}},d);b.location=c.location;var o=b.scrape=function(b){var c={};a.eachHash(b,function(d,e){var f=a.findHash(e,function(a){return q[a]&&a});if(!f)return a.fire("error",{message:"No extension found",scrape:b});f=q[f](e[f]);c[d]=f});return c};e.simple("scrape",function(b){b=o(b);a.set(b);return b})});n("segments",function(b,d){var c=
d("util"),a=d("store"),i=d("data"),g=c.param("segs");g&&c.set("user_segments",g.split(","));var e=b.allRealtime=c.pluck(c.get("config_segments"),"id"),f=d("expression").eval,h=b.realtime=function(){for(var b=[],d=c.get("config_segments")||[],e=24*a.HOURS,j=0,h=d.length,p,g;j<h;++j)p=d[j],g="rt_"+p.id,f(p.test)&&a.set(g,"1",e),a.get(g)&&b.push(p.id);return b},l=b.compute=function(){if(!g){var b=(b=a.get("segs"))?b.split(","):[],b=c.difference(b,e);c.set("user_segments",b);b=h().concat(b);c.set("user_segments",
b);a.set("segs",b.join(","))}},j=b.handleUserDataResponse=function(b){b.segments&&a.set("segs",b.segments.join(","),72*a.HOURS);b.prvx_segments&&(a.set("prvx_segs",b.prvx_segments.join(","),72*a.HOURS),c.set("user_prvx_segments",b.prvx_segments));b.shared_segments&&(a.set("shared_segments",b.shared_segments.join(","),72*a.HOURS),c.set("user_shared_segments",b.shared_segments));b.kuid&&(a.set("user",b.kuid,180*a.DAYS),c.set("user",b.kuid));b.technographics&&(a.set("tech",c.paramString(b.technographics),
30*a.DAYS),q());b.fp_id&&a.set("fp_id",b.fp_id);l();c.fire("user_data_response",b)},q=b.readTechFromStore=function(){var b=a.get("tech");return b?(1!==c.get("pixel_data__knopii")&&c.eachHash(c.parseKeyValues(b),function(a,b){c.set("user_attr_kx_tech_"+a,b)}),!0):!1},o={url:c.get("url_userData"),data:{pubid:c.get("pubid")},callback:"kxjsonp_userData",done:j};c.get("config").fingerprint&&c.get("fp_sent")&&c.extend(o.data,{fp_id:c.get("fp_id"),fp:c.get("fp")});q()||(o.data.technographics=1);j=b.fetch=
function(){c.fireOnce("user_data_request");d("http").jsonp(o)};c.get("segWait")||(c.set("segWait",1,5*a.MINUTES),c.onOnce("dom:load",j),c.fire("user_data_fetch_scheduled"));a.get("segs");l();j=[];a.get("prvx_segs")&&(j=a.get("prvx_segs").split(","));c.set("user_prvx_segments",j);j=[];a.get("shared_segments")&&(j=a.get("shared_segments").split(","));c.set("user_shared_segments",j);j=c.throttle(l,100);i.user_attr.change(j);i.page_attr.change(j);i.namespace("event").change(l);d("test").module("segments",
function(a){c.happened("user_data_fetch_scheduled")&&a("user_data_response",c.happened("user_data_response"))})});n("sha1",function(b,d){var c=d("crypto-util"),a=d("class").Class,i=d("routes"),g=[],e={20:1518500249,40:1859775393,60:1894007588,80:899497514},f=a.extend(function(a){this._message="";this.reset();this._append(a)},{_minBufferSize:0,finalize:function(){var a=this._data,b=8*c.calculateSigBytesForWords(a);a[b>>>5]|=128<<24-b%32;a[(b+64>>>9<<4)+14]=Math.floor(b/c.MAX_WORD);a[(b+64>>>9<<4)+
15]=b;this._process();return String(this)},toString:function(){return c.fromWordsToHex(this._hash)},clone:function(){var a=new f(this._message);a._hash=this._hash.slice(0);return a},reset:function(){this._hash=this._getInitial();this._data=[];return this},update:function(a){this._append(a);return this},_append:function(a){this._message+=a;a=c.fromUtf8ToWords(a);this._data.push.apply(this._data,a);return this},_process:function(){var a=this._data,b=16*(a.length*c.BYTES_PER_WORD/64),d;if(b){for(d=0;d<
b;d+=16)this._processBlock(a,d);d=a.splice(0,b)}return d},_processBlock:function(a,b){for(var c=this._hash,d=c[0],f=c[1],k=c[2],i=c[3],t=c[4],m=0;80>m;m++){if(16>m)g[m]=a[b+m]|0;else{var r=g[m-3]^g[m-8]^g[m-14]^g[m-16];g[m]=r<<1|r>>>31}r=(d<<5|d>>>27)+t+g[m];r=20>m?r+((f&k|~f&i)+e["20"]):40>m?r+((f^k^i)+e["40"]):60>m?r+((f&k|f&i|k&i)-e["60"]):r+((f^k^i)-e["80"]);t=i;i=k;k=f<<30|f>>>2;f=d;d=r}c[0]=c[0]+d|0;c[1]=c[1]+f|0;c[2]=c[2]+k|0;c[3]=c[3]+i|0;c[4]=c[4]+t|0},_getInitial:function(){var a=[1732584193,
4023233417,2562383102,271733878,3285377520];return function(){return a.slice(0)}}()}),a=function(a){return(new f(a)).finalize()};i.simple("hash:sha1",a);return a});n("sizzle",function(b,d,c){var a=d("util"),d=d("dom"),i=/^(?:(\w+)|(\*(?=\W|$))|\.([\w\-]+)|#([\w\-]+))([#\.\w\-]*)/,g=/^\[([\w\-]+)(?:(\W?=)(["']?)([^\]]*)\3(["']?))?\]/,e=b.attr=d.attr,f=b.hasAttr=function(a,b){var c;return a.hasAttribute?a.hasAttribute(b):!(!(c=a.attributes[b])||!c.nodeValue)},h=function(b,c,d,h){var g=function(a){return function(b){return!!e(b,
c).match(a)}},i=h&&a.escapeRegexp(h),d=!d?function(a){return f(a,c)}:"="===d?function(a){return e(a,c)===h}:"!="===d?function(a){return e(a,c)!==h}:"*="===d?function(a){return 0<=e(a,c).indexOf(h)}:"~="===d?g("(^|\\s)"+i+"(\\s|$)"):"|="===d?g("^"+i+"\\b"):"$="===d?g(i+"$"):"^="===d?g("^"+i):"false";return a.filter(b,d)},l=b.getElementsByClassName=function(b,d){a.isString(b)&&(d=b,b=c.document);return b.getElementsByClassName?b.getElementsByClassName(d):h(b.getElementsByTagName("*"),"class","~=",d)};
b.find=function(b,d){d=d||c.document;a.isArray(d)||(d=[d]);for(var e=d,f=[],s,t=0,m=function(b,c){return c[1]?a.toArray(b.getElementsByTagName(c[1])):c[2]?a.toArray(b.getElementsByTagName("*")):c[3]?a.toArray(l(b,c[3])):c[4]&&(c=b.getElementById(c[4]))?[c]:[]},r=function(){f=f.concat(e===d?[]:e);e=d},p=function(a,b){return function(){var c=s.match(a);if(!c)return 0;b(c);return c[0].length}},u=p(i,function(b){var c=[];a.each(e,function(a){c=c.concat(m(a,b))});e=c;for(var d,f=b[5]||"";d=f.match(/^([\.#])([\w\-]+)/);)e=
"."===d[1]?h(e,"class","~=",d[2]):h(e,"id","=",d[2]),f=f.slice(d[0].length);if(f)throw"parse error";}),x=p(g,function(a){e=h(e,a[1],a[2],a[4])}),w=p(/\s*/,function(){}),p=p(/,/,r);s=b.slice(t);){var v;if(!(v=u()))if(!(v=x()))if(!(v=p()))if(!(v=w()))throw"selector parse error";t+=v}r();return f}});n("social",function(b,d,c){var a=d("util");a.on("social",function(b){var e=a.rewriter({facebook:"fb",twitter:"twttr"});d("http").pixel({url:a.get("url_social"),data:{_kpid:a.get("pubid"),_kcp_s:a.get("site"),
_ksoc_t:e(b.provider),_ksoc_e:b.action,_ksoc_url:b.url,_kpa_title:c.document.title}})});var i=function(b,c){a.fire("social",{provider:"facebook",action:b,url:c})},g=b.init_facebook=function(){var b=(b=c.FB)&&(b=b.Event)&&b.subscribe&&a.bind(b.subscribe,b);b?(b("edge.create",a.bind(i,null,"like")),b("edge.remove",a.bind(i,null,"unlike")),b("message.send",a.bind(i,null,"send")),b="done"):b="fail";a.fire("social.init_facebook",{status:b})},e=b.init_twitter=function(){var b=(b=c.twttr)&&(b=b.events)&&
b.bind&&a.bind(b.bind,b);b?(b("tweet",function(b){a.fire("social",{provider:"twitter",action:"tweet",url:b&&b.target&&"IFRAME"===b.target.nodeName?b.target.src:null})}),b="done"):b="fail";a.fire("social.init_twitter",{status:b})};d("routes").simple("social.init",function(){c.setTimeout(function(){g();e()},1E3)})});n("stats",function(b,d){var c=d("util");d("events");d("data");var a={counter:{},time:{}},i=b.get=function(b,c){return a[b][c]},g=b.set=function(b,c,d){a[b][c]=d};b.time=function(a,b){g("time",
a,b)};var e=b.inc=function(a){var b=i("counter",a)||0;g("counter",a,b+1)},f=b.incPath=function(a){var b=a.split(".");c.times(b.length,function(a){e(c.first(b,a+1).join("."))})},h="."+d("dom").browserBucket,l="."+c.get("config_param_control_tag_version"),j=l+h;f("views"+j);c.get("config_param_control_tag_stats_prefix");c.on("social",function(a){e(a.provider+"."+a.action)});c.on("tag:done",function(){f("tags_delivered"+j)});var q=0;c.on("error",function(){try{10<q||(q++,f("js_errors"+j))}catch(a){}});
if(Math.random()<(".alpha"===l?1:".beta"===l||".stable"===l?0.01:0.001))c.onOnce("tag:all_done",function(){function b(a,c){return"controltagv2."+a+":"+c+"|"+this}var e=c.map(a.counter,c.bind(b,"c")).concat(c.map(a.time,c.bind(b,"ms"))).join(",");d("http").pixel({url:c.get("url_stats"),data:{q:e,format:"gif"}})})});n("store",function(b,d,c){var a=d("util"),i=c.localStorage,g=c.document,e=["set","get","remove","namespace"],f=b.SECONDS=1,f=b.MINUTES=60*f,f=b.HOURS=60*f;b.DAYS=24*f;var h={domain:function(a){return"; domain="+
a}},l=b.cookie={set:function(a,b,c,d){c=c?"; expires="+(new Date(+new Date+1E3*c)).toUTCString():"";a=a+"="+encodeURIComponent(b)+l._optionsToCookie(d)+";path=/"+c;return g.cookie=a},get:function(a){var b;return g.cookie&&(b=g.cookie.match("\\b"+a+"=([^;]*)"))&&c.decodeURIComponent(b[1])},remove:function(a){this.set(a,0,-1)},namespace:function(a){var b={};g.cookie.replace(RegExp("\\b"+a+"([^=]*)=([^;]*)","g"),function(a,c){b[decodeURIComponent(a)]=decodeURIComponent(c)});return b},_optionsToCookie:function(b){var c=
"";a.forEach(b,function(a,b){a in h&&(c+=h[a](b))});return c}};if(f=i){var j={set:function(a,b,c){i.setItem(a,b);c&&i.setItem("_"+a,+new Date(+new Date+1E3*c))},get:function(a){var b=i.getItem(a),a=i.getItem("_"+a);return!a?b:a>new Date?b:null},remove:function(a){i.removeItem(a);i.removeItem("_"+a)},namespace:function(a){var c={},d,e;for(e in i)if(d=e.match("^"+a+"(.*)"))c[d[1]]=b.get(d[1]);return c}},q={};a.each(e,function(a){q[a]=function(){try{return j[a].apply(j,arguments)}catch(b){}}});f=q}var o=
b.local=f,d=d("ns"),k=b.prefix="kx"+(d.isDefault?"":d.name+"_");b.init=function(c){var d;if(o&&!c)try{o.set("kxtest","test"),d="test"===o.get("kxtest")&&o,o.remove("kxtest")}catch(f){}var h=d=d||l,p={};a.each(e,function(b){p[b]=function(c){return h[b].apply(h,[k+(c||"")].concat(a.rest(arguments)))}});var j=b.impl=p;a.each(e,function(a){b[a]=j[a]})}});n("tag-actions",function(b,d){var c=d("util"),a=d("tag-delivery"),i=d("tag-delivery-timing"),g=d("events").instance;b.DEFAULT="all";var e=c.yes;b[b.DEFAULT]=
function(b){g.clear("tag");var d=c.filter(c.get("tags"),function(b){var c=e(b);c&&a.forget(b);return c});i(d);var l;c.on("tag:all_done",l=function(){b(null);c.off("tag:all_done",l)})}});n("tag-delivery-timing",function(b,d){var c=d("util"),a=d("tag-delivery"),i=d("dom");d("store");var g=b.isDone=function(a){return!!(a.time&&a.time.end||a.error||!1===a.metCriteria)};return c.extend(function(b){c.each(b,a.uniqueName);var d,h=function(){c.all(b,g)&&(h=c.doNothing,c.fireOnce("tag:all_done"))};c.on("tag:done",
function(){h()});c.on("tag:fail",function(){h()});h();var l=function(j){d=c.filter(b,function(a){return a.timing===j});c.each(d,function(b){a.meetsCriteria(b)&&a.deliver(b)});h()},j=c.once(l,null,"onload"),q=c.once(l,null,"onready");l("asap");i.ready(q);i.load(j);a.init();return{deliver:l,isDone:function(){return h!==c.doNothing}}},b,a)});n("tag-delivery",function(b,d,c){var a=d("util");d("client-type");var i=c.document,g=d("dom"),e=d("geo"),f=d("hash-set"),h=d("ns");d("sizzle");var l=d("store"),
j=d("x-frame");d("data");var q=new Date,q=new Date(+q+864E5),o=new Date(q.getFullYear(),q.getMonth(),q.getDate()),k=b.mode="1"===a.param("writeCapture")?"writeCapture":"1"===a.param("writeNativeIframe")?"nativeIframe":"1"===a.param("writeOld")?"old":"newWriter";b.forget=function(a){delete a.metCriteria;a.time={};return a};var n={};a.set("tagsByName",n);var t=b.uniqueName=function(a){if(!a.named){for(var b=a.name,c=1;n[b];)c++,b=a.name+"_"+c;a.name=b;a.named=!0;n[b]=a}},m=function(a,b,d,e){a.root=
b;var f=w(a.content);"writeCapture"===k?(c.$(b).attr("data-writeCapture","true"),c.$(b).writeCapture().html(f,{done:d})):"nativeIframe"===a.method||"native"===k&&a.target?b.ownerDocument.write(f):c.postscribe(b,f,{name:a.name,releaseAsync:!0,done:d,error:e})};d("routes").simple("nativeTag",function(c){"native"===k&&b.deliver(a.get("tagsByName")[c])});d("routes").simple("writeHtml",function(a,c,d){b.deliver({name:d||"Anonymous",content:c,target:a[0]||a})});var r=function(a,b){var c;if(a.target){c=
a.target;var d;c=c&&c.nodeType?c:c&&(d=c.match(/^(head|body)$/))?i[d[1]]:i.getElementById(c)}else c=g.kxhead||i.getElementsByTagName("script")[0].parentNode;if(d=c)g[a.target_action||"append"](d,b);return d},p=function(a){var b={"class":"kxtag","data-id":a.id,"data-alias":a.name};b["class"]+=a.target?" kxtargeted":" kxinvisible";return b},u={eval:function(b,c,d){var e;try{e=a.globalEval(b.content)}catch(f){d(f)}c();return e},apply:function(a,b,c){var d;try{d=a.content.apply(null)}catch(e){c(e)}b();
return d},document:function(a,b,c){var d=g.createElement("span",p(a));r(a,d)?m(a,d,b,c):b();return d},iframeCommon:function(a,b,d,e){var f=p(a);f.width=f.height=0;f.scrolling="no";f.style="overflow:hidden;";var h=a.name.match(/(\d+)x(\d+)/);h&&(f.width=h[1]+"px",f.height=h[2]+"px");f=g.createElement("iframe",f);if(r(a,f)){h=f.contentWindow.document;h.open();h.write('<html><head></head><body style="margin:0;">');e.leaveOpen||h.close();if(e.onIframe)e.onIframe(f);f.contentWindow.Krux=c.Krux;m(a,f.contentWindow.document.body,
b,d)}else b();return f},nativeIframe:function(a,b,c,d){d.leaveOpen=!0;return u.iframeCommon(a,b,c,d)},iframe:function(a,b,c,d){return u.iframeCommon(a,b,c,d)}},x=b.templateData=function(){return{pubid:a.get("pubid"),site:a.get("site"),geo:e.get(),now:new Date}},w=b.runTemplate=function(b,c){d("underscore").templateSettings={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{%-([\s\S]+?)%\}/g};x.now=new Date;return a.template(b,c||x())};b.meetsCriteria=function(b){if(b.once_per_page&&
y.has(b))return b.metCriteria=!1;if(!b.criteria)return b.metCriteria=!0;if("native"===k&&b.target)return b.metCriteria=!1;a.set("now",new Date);if(b.freq_cap){var c=+l.get("tag"+b.id+".day")||0;a.set("tag_deliveries_today",c)}return b.metCriteria=d("expression").eval(b.criteria)};var v=0,y=h.self._oneTimeTags=h.self._oneTimeTags||f(function(a){return a.id});b.deliver=function(b,d){var e=b.once_per_page;if(e&&y.has(b))return y.get(b).id;d=d||{};t(b);b.id=b.id||v++;b.time={mode:"async",start:a.ms()};
b.method=b.method||(a.isFunction(b.content)?"apply":"document");"nativeIframe"===k&&b.target&&(b.method="nativeIframe");var f=function(c){b.error=c&&c.message&&c||{message:"unknown error"};a.fire("tag:fail",{id:b.id,alias:b.name,error:b.error.message})};a.fire("tag:started",{id:b.id,alias:b.name});var p=function(){b.time.end=a.ms();b.time.duration=b.time.end-b.time.start;if(b.freq_cap){var c="tag"+b.id+".day",d=+l.get(c)||0;l.set(c,d+1,(o-new Date)/1E3)}a.fire("tag:done",{id:b.id,alias:b.name})};
try{var j=c.Krux;h.isDefault||(c.Krux=h.self);var g=u[b.method](b,p,f,d);c.Krux=j;e&&y.put({id:b.id});return g}catch(i){return f(i),null}};b.claimOneTimers=function(b){var b=a.filter(b,function(a){return a.once_per_page}),c=a.now(),d=a.map(b,function(a){return{id:a.id,claimId:c}});d.length&&(j.broadcast({tags:d}),j.listen(function(b){b=b.data.tags;b=a.filter(b,function(b){var c=a.find(d,function(a){return a.id===b.id});return b.claimId<c.claimId});y.put.apply(y,b)}))};b.init=a.once(function(){d("test").module("tag-delivery",
function(b){var c={};a.each(a.get("tags"),function(d){!a.happened("dom:beforeunload")&&!a.happened("dom:unload")&&b("tag_considered",null!=d.metCriteria,d.name);if(d.metCriteria){var e=d.time||{},f=e.start;b("tag_delivered",e.end,d.name);e=d.timing;b("tag_valid_timing_name",e,e);e=c[e]=c[e]||{lastStart:0};b("tag_order",f>=e.lastStart,d.name);e.lastStart=f}})})})});n("tag",function(b,d){var c=d("util"),a=d("tag-actions"),i=d("tag-delivery-timing"),g=d("routes"),e=d("store");d("x-frame");d("data");
c.extend(b,i,{Timing:i});b.init=function(){var a=e.get("kuid");a&&c.set("user",a);c.onOnce("user_data_response",function(){var a=c.get("user");a&&e.set("kuid",a)});i(c.get("tags"))};g.regexp(/^tag:reload:?(.*)$/,function(b,c){var d=b[1]||a.DEFAULT;if(d in a)try{a[d](c)}catch(e){c(e)}else c(new TypeError("Krux('tags') has no method: "+d))})});n("test-visualtags",function(b,d){function c(a){return-1<(""+a).indexOf("px")?parseInt(a.replace("px",""),10)||0:0}function a(a,b){return Math.floor(100*(Math.abs(a-
b)/b))}function i(a,b){return b["offset"+("width"===a?"Width":"Height")]||0}function g(a,b){h++;if(1E3<h)return 0;for(var c=0,d="offset"+("width"===a?"Width":"Height"),e=0;e<b.childNodes.length;e++)c=Math.max(c,b.childNodes[e][d]||0),b.childNodes[e].childNodes.length&&(c=Math.max(c,g(a,b.childNodes[e])));return c}var e=d("util"),f=d("sizzle").find;b.init=function(){d("test").module("visualtags",function(b){for(var d=f(".kxtargeted"),h=0,o=d.length;h<o;h++){var k=d[h].getAttribute("data-id"),n=d[h].getAttribute("data-alias");
a:{var t=e.get("tagsByName"),m=void 0;for(m in t)if(t[m].id===k){k=t[m].target||"";break a}k=""}k=f("#"+k);k=1===k.length?k[0]:d[h].parentNode;t=Math.max(i("width",d[h]),g("width",k));m=Math.max(i("height",d[h]),g("height",k));b("visualtag-not-blank",t*m,"Tag area appears to be empty ("+n+")");k.style&&c(k.style.width)&&b("visualtag-expected-width",10>a(c(k.style.width),t),"Tag width ain't right ("+n+")");k.style&&c(k.style.height)&&b("visualtag-expected-height",10>a(c(k.style.height),m),"Tag height ain't right ("+
n+")")}})};var h=0});n("test",function(b,d,c){var a=d("util"),i={},g="test";b.status="NOT_STARTED";var e=b.test=function(c,d,e){var f=d?"pass":"fail";b.results.push({module:g,code:c,data:e,assertion:d,time:new Date,status:f});a.fire("test:"+f,{code:c,data:e});return d},f=function(b,c){return a.isArray(b)&&a.isArray(c)?b.length===c.length&&a.all(b,function(a,b){return f(a,c[b])}):b===c};e.eq=function(a,b,c){return e(a,f(b,c),{actual:b,expected:c})};b.module=function(a,c){"NOT_STARTED"!==b.status&&
e("tests_not_started",!1,b.status);i[a]=c};var h=function(a,b){g=a;try{b(e)}catch(c){e("tests_module_threw",!1,"module_"+a+"_threw:"+c.message)}},l=b.run=function(){b.results=[];b.failureGroup=null;e("tests_to_run",!a.isEmpty(i));a.eachHash(i,h);var d=b.report=a.groupBy(b.results,"status");d.total=b.results.length;d.toString=function(){try{var d=[],e=function(){d.push(Array.prototype.join.call(arguments,""))};e("Test Summary: "+b.status);e("Version: "+c.Krux.version+", "+c.Krux.commit);b.failureGroup&&
e("Failure Group :"+b.failureGroup);e("Phase: "+b.phase);e("Status,Code,Data");a.each(b.results,function(a){e(a.status,",",a.code,",",a.data)});return d.join("\n")}catch(f){return"report.toString failed: "+f}};var f=b.status=d.status=d.fail?"FAIL":"PASS";if("PASS"!==f){var g=-1,k,l=1E3,n=[],m={tests_to_run:l--,tests_module_threw:l--,pixel:l--,tag_delivered:l--};a.each(d.fail,function(a){var b=m[a.code]||0;n.push(a.code+": "+a.data);b>g&&(g=b,k=a)});b.failureGroup=k.code+(k.data?":"+k.data:"");b.phase=
a.happened("dom:load")?"after_load":a.happened("dom:ready")?"after_ready_before_load":"before_ready"}a.fire("test:all_done",{status:f})};b.init=function(){var b=a.once(l);a.on("pixel",b);a.on("dom:beforeunload",b);a.on("dom:unload",b)}});n("timing",function(b,d){var c=d("data"),a=Date.now||function(){return(new Date).getTime()},i=function(b){return function(){c.set(b,a())}};return{start:i("started"),end:i("ended")}});n("underscore",function(b,d,c){var a=b,i={},g=Array.prototype,e=Object.prototype,
f=g.slice,h=e.toString,l=e.hasOwnProperty,j=g.map,q=g.reduce,o=g.filter,k=g.every,n=g.some,t=g.indexOf,g=Array.isArray,m=a.each=a.forEach=function(a,b,c){if(null!=a)if(a.length===+a.length)for(var d=0,e=a.length;d<e&&!(d in a&&b.call(c,a[d],d,a)===i);d++);else for(d in a)if(l.call(a,d)&&b.call(c,d,a[d],a)===i)break};a.map=function(a,b,c){var d=[];if(null==a)return d;if(j&&a.map===j)return a.map(b,c);m(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});return d};a.find=a.detect=function(a,b,c){var d;
r(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};a.every=a.all=function(a,b,c){var d=!0;if(null==a)return d;if(k&&a.every===k)return a.every(b,c);m(a,function(a,e,f){if(!(d=d&&b.call(c,a,e,f)))return i});return d};var r=a.some=a.any=function(b,c,d){var c=c||a.identity,e=!1;if(null==b)return e;if(n&&b.some===n)return b.some(c,d);m(b,function(a,b,f){if(e||(e=c.call(d,a,b,f)))return i});return!!e};a.include=a.contains=function(a,b){var c=!1;return null==a?c:t&&a.indexOf===t?-1!=a.indexOf(b):
c=r(a,function(a){return a===b})};a.filter=a.select=function(a,b,c){var d=[];if(null==a)return d;if(o&&a.filter===o)return a.filter(b,c);m(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};a.reduce=a.foldl=a.inject=function(b,c,d,e){var f=2<arguments.length;null==b&&(b=[]);if(q&&b.reduce===q)return e&&(c=a.bind(c,e)),f?b.reduce(c,d):b.reduce(c);m(b,function(a,b,h){f?d=c.call(e,d,a,b,h):(d=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};a.indexOf=
function(b,c,d){if(null==b)return-1;var e;if(d)return d=a.sortedIndex(b,c),b[d]===c?d:-1;if(t&&b.indexOf===t)return b.indexOf(c);d=0;for(e=b.length;d<e;d++)if(d in b&&b[d]===c)return d;return-1};a.uniq=a.unique=function(b,c,d){var d=d?a.map(b,d):b,e=[];3>b.length&&(c=!0);a.reduce(d,function(d,f,h){if(c?a.last(d)!==f||!d.length:!a.include(d,f))d.push(f),e.push(b[h]);return d},[]);return e};a.difference=function(b){var c=a.flatten(f.call(arguments,1),!0);return a.filter(b,function(b){return!a.include(c,
b)})};a.flatten=function(b,c){return a.reduce(b,function(b,d){if(a.isArray(d))return b.concat(c?d:a.flatten(d));b[b.length]=d;return b},[])};a.intersection=a.intersect=function(b){var c=f.call(arguments,1);return a.filter(a.uniq(b),function(b){return a.every(c,function(c){return 0<=a.indexOf(c,b)})})};a.groupBy=function(b,c){var d={},e=a.isFunction(c)?c:function(a){return a[c]};m(b,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};a.compact=function(b){return a.filter(b,function(a){return!!a})};
a.invoke=function(b,c){var d=f.call(arguments,2);return a.map(b,function(b){return(a.isFunction(c)?c||b:b[c]).apply(b,d)})};a.pluck=function(b,c){return a.map(b,function(a){return a[c]})};a.identity=function(a){return a};a.values=function(b){return a.map(b,a.identity)};a.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};a.clone=function(b){return!a.isObject(b)?b:a.isArray(b)?b.slice():a.extend({},b)};a.extend=function(a){m(f.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});
return a};a.defaults=function(a){m(f.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};a.first=a.head=function(a,b,c){return null!=b&&!c?f.call(a,0,b):a[0]};a.initial=function(a,b,c){return f.call(a,0,a.length-(null==b||c?1:b))};a.last=function(a,b,c){return null!=b&&!c?f.call(a,Math.max(a.length-b,0)):a[a.length-1]};a.rest=a.tail=function(a,b,c){return f.call(a,null==b||c?1:b)};a.size=function(b){return null==b?0:b.length===+b.length?b.length:a.keys(b).length};a.toArray=
function(b){return!b?[]:b.toArray?b.toArray():a.isArray(b)||a.isArguments(b)?f.call(b):a.values(b)};a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};a.template=function(b,c){var d=a.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape,function(a,b){return"',_.escape("+
b.replace(/\\'/g,"'")+"),'"}).replace(d.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(d.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return c?e(c,a):function(b){return e.call(this,b,a)}};a.isEmpty=function(b){if(a.isArray(b)||a.isString(b))return 0===b.length;for(var c in b)if(l.call(b,c))return!1;
return!0};a.isElement=function(a){return!!(a&&1==a.nodeType)};a.isArray=g||function(a){return"[object Array]"==h.call(a)};a.isObject=function(a){return a===Object(a)};a.isArguments="[object Arguments]"==h.call(arguments)?function(a){return"[object Arguments]"==h.call(a)}:function(a){return!(!a||!l.call(a,"callee"))};a.isFunction=function(a){return"[object Function]"==h.call(a)};a.isString=function(a){return"[object String]"==h.call(a)};a.isNumber=function(a){return"[object Number]"==h.call(a)};a.isNaN=
function(a){return a!==a};a.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==h.call(a)};a.isDate=function(a){return"[object Date]"==h.call(a)};a.isRegExp=function(a){return"[object RegExp]"==h.call(a)};a.isNull=function(a){return null===a};a.isUndefined=function(a){return void 0===a};a.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};a.now=Date.now||function(){return(new Date).getTime()};
a.throttle=function(b,c,d){var e,f,h,g=null,j=0;d||(d={});var i=function(){j=!1===d.leading?0:a.now();g=null;h=b.apply(e,f);e=f=null};return function(){var k=a.now();!j&&!1===d.leading&&(j=k);var l=c-(k-j);e=this;f=arguments;0>=l?(clearTimeout(g),g=null,j=k,h=b.apply(e,f),e=f=null):!g&&!1!==d.trailing&&(g=setTimeout(i,l));return h}};a.partial=function(b){var c=f.call(arguments,1);return function(){for(var d=0,e=c.slice(),f=0,h=e.length;f<h;f++)e[f]===a&&(e[f]=arguments[d++]);for(;d<arguments.length;)e.push(arguments[d++]);
return b.apply(this,e)}};a.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}}});n("util",function(b,d,c){var a=d("underscore");a.extend(b,a,{_:a});a=b;a.UNDEFINED=void 0;a.globalEval=function(a,b){b=b||c;a&&/\S/.test(a)&&b.eval.call(b,a)};a.parseParams=a.parseKeyValues=function(b,c,d,g){var c=c||"&",d=d||"=",g=g||decodeURIComponent,j={};if("string"!==typeof b)return j;b.replace(RegExp(c+"*([^"+d+c+"]+)"+d+"([^"+c+"]+)"+
c+"*","g"),function(b,c,d){d=g(d);j[c]=!j[c]?d:a.isArray(j[c])?j[c].concat([d]):[j[c],d]});return j};a.urlParams=function(b){b=(b||c.location.href).match(/[^\#?]+(?:\?([^#]*))?(?:#(.*))?/);return a.parseParams(a.compact(b.slice(1)).join("&"))};a.paramString=function(b,c,d,g){var c=c||"&",d=d||"=",g=g||encodeURIComponent,j=[];a.eachHash(b,function(b,c){c=a.isArray(c)?c:[c];a.each(c,function(a){null!=a&&""!==a&&j.push(g(b)+d+g(a))})});return j.join(c)};a.isPrimitive=function(b){return null==b||!/^object|function$/.test(typeof b)&&
!a.isNaN(b)};a.isSerializable=function(b){return a.isPrimitive(b)||!/[object [^\]]*]/.test(String(b))};a.without=a.remove=function(b,c){return a.filter(b,function(a){return a!==c})};var i=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");a.escapeRegexp=function(a){return(""+a).replace(i,"\\$1")};a.doNothing=a.noop=function(){};a.defer=function(b){var d=a.rest(arguments);c.setTimeout(function(){b.apply(null,d)},0)};var g=[];g.toString=function(){return d("json").JSON.stringify(g)};
a.log=function(b){if(a.isString(b))c.console&&console.log(b);else if(b)b.time=new Date,g.push(b);else return g};a.Set=function(a){for(var b=0;b<a.length;b++)this[a[b]]=!0};a.negate=function(a){return function(){return!a.apply(this,arguments)}};a.G=c;a.bind=function(b,c){if(b.isBound&&3>arguments.length)return b;var d=a.rest(arguments,2),g=function(){return b.apply(c,d.concat(a.toArray(arguments)))};g.actual=b;g.isBound=!0;return g};a.bindMethod=function(b,c){a.each(b.split(" "),function(b){c[b]=a.bind(c[b],
c)})};a.interpolate=function(a,b){return b.replace(/\$\{([^{}]*)\}/g,function(b,c){var d=a[c];return"string"===typeof d||"number"===typeof d?d:b})};a.rewriter=function(a){return function(b){return a[b]||b}};a.extend(a,{max:Math.max,min:Math.min});a.once=function(b){if(b.isOnce&&3>arguments.length)return b;var c=!1,b=a.bind.apply(null,arguments),d=function(){return!c&&(c=!0)&&b.apply(null,arguments)};d.isOnce=!0;d.actual=b;return d};a.ms=function(){return new Date-a.get("started")};a.param=function(a){var b;
return(b=c.location.href.match("\\bkx"+a+"(?:=|\\b)([^&#]*)"))&&(b[1]||!0)};a.eachHash=a.each;a.mapHash=function(b,c,d){var g={};a.eachHash(b,function(a,i){var o=c.call(d,a,i,b);g[o[0]]=o[1]});return g};a.anyHash=a.any;a.findHash=a.find;a.keys=function(b){return a.map(b,function(a){return a})};a.values=function(b){return a.map(b,function(a,b){return b})};a.say=function(){};a.property=function(a){var b=function(a){return arguments.length?b.set(a):b.get()};b.get=a.get;b.set=a.set;a.value&&b.set(a.value);
return b};a.attributes=function(b){var c=function(b,d){var e=arguments.length;return 0===e?c.all():!a.isString(b)?c.set(b):1===e?c.get(b):c.set(b,d)};c.get=b.get;c.all=b.all;c.set=function(c,d){return 1===arguments.length?a.each(c,b.set):b.set(c,d)};b.values&&c.set(b.values);return c};a.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),g=0,i=Array(d);g<d;)i[g++]=a,a+=c;return i};a.deref=a.dereference=function(b,d){1===arguments.length&&
(d=b,b=c);try{return a.reduce(d.split("."),function(a,b){return a[b]},b)}catch(g){}};a.sum=function(b){a.isArray(b)||(b=a.toArray(arguments));return a.reduce(b,function(a,b){return a+b},0)};a.yes=function(){return!0};a.isConfigValueTrue=function(a){return!!a&&/^(?:true|1)$/.test(String(a))};a.kruxDomain=function(a){a=String(a).replace(/:\d+$/,"");return/(?:\d{1,3}\.){3}\d{1,3}/.test(a)?"":a.replace(/.*?((?:(^|\.)[^\.]+){1,2}(?:\.com)?)$/,"$1").replace(/^\./,"")}});n("version",function(b){b.version=
"5.26.1";b.commit="8f942d9ee5a5a1edc99b3ec990619ad919ccc129"});n("x-frame",function(b,d,c){var a=d("util"),i=d("dom"),g=d("json").JSON,e=i.d2on,f=c.location.origin,h=b.isFramed=function(){return c.top!==c},l=b.send=function(b,c,d){if(a.isFunction(b.postMessage))try{"document"in b&&b.postMessage(g.stringify(c),d)}catch(e){}};b.broadcast=function(b,d){var d=a.defaults(d||{},{container:!0,domain:f,self:!1}),e=h()?c.parent:c;d.container&&(h()||d.self)&&l(e,b,d.domain);for(var g=0,e=e.frames,i=e.length;g<
i;++g)(e[g]!==c||d.self)&&l(e[g],b,d.domain)};b.listen=function(b,d){var h=a.defaults(d||{},{origin:f,strict:!0,win:c.window});return e(h.win,"message",function(c){if(!h.strict||0===String(c.origin||"").indexOf(h.origin))b.call(this,{data:a.isString(c.data)?g.parse(c.data):c.data,event:c})})};b.init=function(a){f=a}});z("index")})();
